var trdApp=angular.module("trdApp",["ngRoute","ngAnimate","infinite-scroll","ui.router","trdApp.services","trdApp.directives","trdApp.controllers","trdApp.factories","trdApp.filters","ui.slider","dtrw.bcrypt","ngTagsInput","ngError","flow","env.config","mm.foundation","angulartics","angulartics.google.analytics","angularFileUpload"]);trdApp.run(["$rootScope","$state","$stateParams","$cookies","$location","authService","$log",function(t,e,i,r,n,s,o){t.$state=e,t.$stateParams=i,t.isVisible=!1,t.$on("$stateChangeStart",function(t,i,r,n,a){o.debug("to:: "+i.name,"from:: "+n.name),o.debug("authorized / received",s.authorized,s.authorizationReceived);var d=function(){var t=["terms","store","checkout","order","support","locations"];return t.indexOf(i.name)>=0},c=function(){var t=["profile","settings","settings.profile","settings.store","settings.notifications","orders","leave_review","merchant_orders","merchant_inventory","office_scheduling"];return t.indexOf(i.name)>=0},l=function(){var t=["login","login_by_token","email_sent","email_taken","resend_email","new_password","reset_password","register","learn_more"];return t.indexOf(i.name)>=0};if("authorizing"==i.name);else if(s.authorizationReceived){if(d())return;if(!s.authorized&&c())t.preventDefault(),e.go("login");else{if(!s.authorized||!l())return;t.preventDefault(),e.go("profile")}}else t.preventDefault(),e.go("authorizing"),s.getAuthorization(function(t){d()?e.go(i.name,r):!s.authorized&&c()?e.go("login"):s.authorized&&l()?e.go("profile"):e.go(i.name,r)})}),t.$on("$stateChangeSuccess",function(i,r){t.title=e.current.title})}]),trdApp.config(["$httpProvider","$stateProvider","$urlRouterProvider","$analyticsProvider","$locationProvider","$logProvider","ENV",function(t,e,i,r,n,s,o){t.interceptors.push("trdInterceptor"),i.otherwise("/store"),n.hashPrefix("!"),s.debugEnabled("DEV"==o),e.state("authorizing",{url:"/authorizing",templateUrl:"partials/authorizing.html"}).state("admin",{"abstract":!0,url:"/admin",templateUrl:"/partials/admin.html",controller:"AdminCtrl"}).state("admin.users",{url:"/users",templateUrl:"/partials/admin_users.html",controller:"AdminUsersCtrl",title:"Admin Users"}).state("admin.user",{url:"/user/:profileid",templateUrl:"/partials/admin_user.html",controller:"AdminUserCtrl",title:"Inspect User"}).state("admin.promo",{url:"/promo",templateUrl:"/partials/admin_promo.html",controller:"AdminPromoCtrl",title:"Promo Codes"}).state("admin.orders",{url:"/orders",templateUrl:"/partials/admin_orders.html",controller:"AdminOrdersCtrl",title:"Admin Orders"}).state("admin.order",{url:"/order/:orderid",templateUrl:"/partials/admin_order.html",controller:"AdminOrderCtrl",title:"Admin Order"}).state("admin.vendors",{url:"/vendors",templateUrl:"/partials/admin_vendors.html",controller:"AdminVendorsCtrl",title:"Admin Vendors"}).state("admin.vendor",{url:"/vendor/:merchantid",templateUrl:"/partials/admin_vendor.html",controller:"AdminVendorCtrl",title:"Admin Vendor"}).state("admin.new_vendor",{url:"/vendors/add",templateUrl:"/partials/admin_new_vendor.html",controller:"AdminNewVendorCtrl",title:"New Vendor"}).state("admin.products",{url:"/products/",templateUrl:"/partials/admin_products.html",controller:"AdminProductsCtrl",title:"Admin Products"}).state("admin.product",{url:"/product/:productnumber",templateUrl:"/partials/admin_product.html",controller:"AdminProductCtrl",title:"Admin Product"}).state("admin.addproduct",{url:"/add-product",templateUrl:"/partials/admin_new_product.html",controller:"AdminNewProductCtrl",title:"Add Product"}).state("admin.metrics",{url:"/metrics",templateUrl:"/partials/admin_metrics.html",controller:"AdminMetricsCtrl",title:"Admin Metrics"}).state("login",{url:"/login",templateUrl:"/partials/login.html",controller:"LoginCtrl",title:"Login"}).state("register",{url:"/register?view",templateUrl:"/partials/register.html",controller:"RegisterCtrl",title:"Register"}).state("register.home",{url:"/intro",templateUrl:"/partials/register_home.html",controller:"RegisterHomeCtrl",title:"Register"}).state("register.form",{url:"/form",templateUrl:"/partials/register_form.html",controller:"RegisterFormCtrl"}).state("logout",{url:"/logout",templateUrl:"/partials/logout.html",controller:"LogoutCtrl"}).state("order",{url:"/order/:orderid",templateUrl:"/partials/order.html",controller:"OrderCtrl",title:function(t){return"Order #"+t.orderid}}).state("orders",{url:"/orders/:orderid",templateUrl:"/partials/orders.html",controller:"OrdersCtrl",title:"Account Orders"}).state("locations",{url:"/locations",templateUrl:"/partials/locations.html",controller:"LocationsCtrl",title:"Provider Locations"}).state("network",{url:"/network",templateUrl:"/partials/network.html",controller:"NetworkCtrl",title:"Network Information"}).state("office-scheduling",{url:"/scheduling",templateUrl:"/partials/office_scheduling.html",controller:"OfficeSchedulingCtrl",title:"Scheduling"}).state("merchant_inventory",{"abstract":!0,url:"/merchant-inventory",templateUrl:"/partials/merchant_inventory.html",controller:"MerchantInventoryCtrl"}).state("merchant_inventory.view",{url:"/view",templateUrl:"/partials/merchant_inventory_view.html",controller:"MerchantInventoryViewCtrl"}).state("merchant_inventory.product",{url:"/product/:productnumber",templateUrl:"/partials/merchant_inventory_product.html",controller:"MerchantInventoryProductCtrl"}).state("merchant_inventory.new_product",{url:"/new-product",templateUrl:"/partials/merchant_inventory_new_product.html",controller:"MerchantInventoryNewProductCtrl"}).state("merchant_orders",{url:"/merchant-orders",templateUrl:"/partials/merchant_orders.html",controller:"MerchantOrdersCtrl"}).state("limit_orders",{url:"/orders/:orderid/:limit",templateUrl:"/partials/limit_orders.html",controller:"OrdersCtrl"}).state("store",{url:"/store",templateUrl:"/partials/store.html",controller:"StoreCtrl",title:"Store"}).state("product",{url:"/product/:productnumber",templateUrl:"/partials/product.html",controller:"ProductCtrl"}).state("leave_review",{url:"/leave-review/:productnumber",templateUrl:"/partials/leave_review.html",controller:"LeaveReviewCtrl"}).state("search_results",{url:"/search-results?query",templateUrl:"/partials/search_results.html",controller:"SearchResultsCtrl"}).state("profile",{url:"/profile",templateUrl:"/partials/profile.html",controller:"ProfileCtrl",title:"Profile"}).state("reset_password",{url:"/reset-password/:resettoken",templateUrl:"/partials/reset_password.html",controller:"ResetPasswordCtrl",title:"Password Assistance"}).state("sell_info",{url:"/sell-info",templateUrl:"/partials/sell_with_us.html",controller:"SellInfoCtrl",title:"Sell with Y LIFT"}).state("about",{url:"/about",templateUrl:"/partials/about.html",controller:"AboutCtrl",title:"About"}).state("techniques",{url:"/techniques",templateUrl:"/partials/techniques.html",controller:"TechniquesCtrl"}).state("techniques.ylift",{parent:"techniques",url:"/y-lift",templateUrl:"/partials/techniques_ylift.html",title:"Techniques: Y LIFT"}).state("techniques.yeye",{parent:"techniques",url:"/y-eye",templateUrl:"/partials/techniques_yeye.html",title:"Techniques: Y EYE"}).state("techniques.botox",{parent:"techniques",url:"/botox",templateUrl:"/partials/techniques_botox.html",title:"Techniques: Botox"}).state("techniques.skynjection",{parent:"techniques",url:"/skynjection",templateUrl:"/partials/techniques_skynjection.html",title:"Techniques: skYnjection"}).state("techniques.chynjection",{parent:"techniques",url:"/chynjection",templateUrl:"/partials/techniques_chynjection.html",title:"Techniques: chYnjection"}).state("techniques.hands",{parent:"techniques",url:"/hands",templateUrl:"/partials/techniques_hands.html",title:"Techniques: Hands"}).state("techniques.injectables",{parent:"techniques",url:"/injectables",templateUrl:"/partials/techniques_injectables.html",title:"Techniques: Injectables"}).state("techniques.laser",{parent:"techniques",url:"/laser",templateUrl:"/partials/techniques_laser.html",title:"Techniques: Laser"}).state("techniques.veins",{parent:"techniques",url:"/veins",templateUrl:"/partials/techniques_veins.html",title:"Techniques: Veins"}).state("zones",{url:"/zones/:zone/:procedure",templateUrl:"/partials/zones.html",controller:"ZonesCtrl"}).state("zones.eyes",{parent:"zones",templateUrl:"/partials/zones_eyes.html",title:"Zones: Eyes"}).state("zones.face",{parent:"zones",templateUrl:"/partials/zones_face.html",title:"Zones: Face"}).state("zones.hair",{parent:"zones",templateUrl:"/partials/zones_hair.html",title:"Zones: Hair"}).state("zones.hands",{parent:"zones",templateUrl:"/partials/zones_hands.html",title:"Zones: Hands"}).state("zones.lips",{parent:"zones",templateUrl:"/partials/zones_lips.html",title:"Zones: Lips"}).state("zones.skin",{parent:"zones",templateUrl:"/partials/zones_skin.html",title:"Zones: Skin"}).state("before_after",{url:"/before-after/:procedure",templateUrl:"/partials/before_after.html",controller:"BeforeAfterCtrl",title:"Before & After"}).state("settings",{"abstract":!0,url:"/settings",templateUrl:"/partials/settings.html",controller:"SettingsCtrl",title:"Settings"}).state("settings.profile",{url:"/profile",templateUrl:"/partials/settings_profile.html",controller:"SettingsProfileCtrl",title:"Profile Settings"}).state("settings.store",{url:"/store",templateUrl:"/partials/settings_store.html",controller:"SettingsStoreCtrl",title:"Store Settings"}).state("settings.notifications",{url:"/notifications",templateUrl:"/partials/settings_notifications.html",controller:"SettingsNotificationsCtrl",title:"Notification Settings"}).state("settings.merchant",{url:"/merchant",templateUrl:"/partials/settings_merchant.html",controller:"SettingsMerchantCtrl"}).state("support",{url:"/support?topic&orderid",templateUrl:"/partials/support.html",controller:"SupportCtrl",title:"Support"}).state("terms",{url:"/terms",templateUrl:"/partials/terms.html",controller:"TermsCtrl",title:"Terms & Conditions"}).state("checkout",{url:"/checkout",views:{"":{templateUrl:"/partials/checkout.html",controller:"CheckoutCtrl",title:"Checkout"},"shipping@checkout":{templateUrl:"/partials/checkout_shipping.html",controller:"CheckoutShippingCtrl"},"billing@checkout":{templateUrl:"/partials/checkout_billing.html",controller:"CheckoutBillingCtrl"},"review@checkout":{templateUrl:"/partials/checkout_review.html",controller:"CheckoutReviewCtrl"}}})}]),trdApp.factory("trdInterceptor",["$cookieStore",function(t){var e={request:function(t){return e.getToken()&&(t.headers.Authorization="Bearer "+e.token),-1==t.url.indexOf("html")&&e.getAPIURL()&&("/"!=t.url.charAt(0)&&(t.url="/"+t.url),t.url=e.getAPIURL()+t.url),t}};return e.server=window.SERVER||"{{fill_in_server}}",e.apiURL=window.CORDOVA?e.server:null,e.token=null,e.getAPIURL=function(){return e.apiURL||null},e.getToken=function(){return e.token=e.token||t.get("trdTkn"),e.token},e.setToken=function(i){e.token=i,t.put("trdTkn",i)},e}]);var superApp=angular.module("trdApp.controllers",["ui.sortable","ui.slider"]);superApp.controller("MainCtrl",["$rootScope","$scope","$window","$location","$cookies","$state","authService","trdInterceptor","stripeService","ENV",function(t,e,i,r,n,s,o,a,d,c){e.cartAnimation="",e.displayIntro=!1,e.displayCart=!1,e.handleLoaded=function(){e.loaded=!0,e.authorized=o.authorized,e.isAdmin=o.isAdmin,e.loggedin=o.loggedin,e.loggedin||(e.displayIntro=!0)},e.handleViewClick=function(){e.closeModal()},e.closeCart=function(){e.displayCart=!1,e.cartAnimation="fadeOutUp"},e.closeModal=function(){e.displayIntro=!1},e.handleViewClick=function(){e.displayCart&&(e.displayCart=!1,e.cartAnimation="fadeOutUp")},e.getCartAnimateClass=function(){return e.cartAnimation},t.$on("cartviewchange",function(t,i){e.displayCart=i.displayCart,e.cartAnimation=e.displayCart?"fadeInDown":"fadeOutUp"}),e.$on("loggedin",function(t,i){e.loggedin=!0}),e.$on("loggedout",function(t,i){e.loggedin=!1}),o.authorizationReceived?e.handleLoaded():(e.loadedFun=null,e.loadedFun=t.$on("authorizationloaded",function(t,i){e.handleLoaded(),e.loadedFun()}))}]);var trdServices=angular.module("trdApp.services",["ngCookies"]).value("version","0.1"),trdFilters=angular.module("trdApp.filters",[]),trdFactories=angular.module("trdApp.factories",[]),appDirectives=angular.module("trdApp.directives",[]);appDirectives.directive("appVersion",["version",function(t){return function(e,i,r){i.text(t)}}]),trdFilters.filter("range",[function(){return function(t,e){e=parseInt(e);for(var i=0;e>i;i++)t.push(i);return t}}]),trdFilters.filter("unsafe",function(t){return function(e){return t.trustAsHtml(e)}}),trdFactories.factory("toolbelt",["$rootScope",function(t){var e={};return e.displayLocalTime=function(t){return t?moment(t).format("LT"):""},e.displayDate=function(t,e,i){return t?i.type?moment(t,i.type).format(e):moment(t).format(e):""},e.displayAddress=function(t){return t?"<strong>"+t.name+"</strong><br>"+t.address1+" "+(t.address2||"")+"<br>"+t.city+", "+t.state+" "+t.zip:"No address information provided"},e.insertCommasIntoNumber=function(t){return t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")},e}]),superApp.controller("AboutCtrl",["$rootScope","$scope","$state","authService","$location","$stateParams","$timeout",function(t,e,i,r,n,s,o){}]),superApp.controller("AdminCtrl",["$rootScope","$scope","$state","authService","profileService","$stateParams","adminService",function(t,e,i,r,n,s,o){r.isAdmin||i.go("store"),e.profile=angular.copy(r.profile),e.displayDate=function(t){return moment(t).format("MMM Do YYYY")},e.toTitleCase=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},o.getHash(e.profile.id,function(t,i){t&&(e.error=t),e.hash=i}),o.getAllMerchantProfiles(function(t,i){t?e.error=t:e.merchantsLoaded=!0,e.merchantProfiles=i})}]),superApp.controller("AdminNewProductCtrl",["$rootScope","$scope","$state","productService","awsService",function(t,e,i,r,n){function s(t,e,i){n.uploadFile(t,e,i,o)}function o(t){}e.fileCount=0,e.product={},e.product.tmpImg={},e.product.tmpAltImg=[],e.onFileAdded=function(t,i,r){var o=t[0].file,a=t[0].file.type.split("/"),d={};d.identifier=t[0].uniqueIdentifier+"."+t[0].chunks.length,d.extension=a[1],d.name=o.name,0==e.fileCount?e.product.tmpImg=d:e.product.tmpAltImg.push(d),n.getSignedRequest(o,s),e.fileCount++},e.addProduct=function(){return e.updating?void 0:e.product.tmpImg.name?void 0:void(e.error="Please upload an image for the product")}}]),superApp.controller("AdminNewVendorCtrl",["$rootScope","$scope","$state","authService","profileService","adminService","$stateParams","bcrypt","storeService",function(t,e,i,r,n,s,o,a,d){e.authorized=!1,e.generateKey=function(){for(var t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()-+=_/?;:<>,.~{}",r=20;r>0;--r)t+=i[Math.round(Math.random()*(i.length-1))];e.regkey=t},e.activate=function(){e.notify=null,(e.authorized=!1)||s.addRegKey(e.regkey,function(t,i){return t?void(e.error=t):(e.regkey=null,e.notify="Reg key '"+i.key+"' was successfully added.",void e.availableKeys.push(i.key))})},e.checkPassword=function(){e.authorized=a.compareSync(e.attempt,e.hash)?!0:!1},s.getAvailableRegKeys(function(t,i){t&&(e.error=t),e.availableKeys=[];for(var r=0;r<i.length;r++)e.availableKeys.push(i[r].key)})}]),superApp.controller("AdminOrderCtrl",["$rootScope","$scope","$state","adminService","$stateParams","storeService",function(t,e,i,r,n,s){function o(t,i){t?e.error=t:(e.products=[],e.order=i,e.order.products&&e.order.products.length&&e.order.products.forEach(function(t){s.getProductByID(t.productnumber,function(t,i){t&&(e.error=t),e.products.push(i)})}))}e.error=null,e.orderid=n.orderid,e.orderid||i.go("admin.orders"),e.getDisplayDate=function(t){return moment(t).format("LL")},e.formatValue=function(t){return t?"$"+t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(","):""},e.defaultImage=function(t){t.img=t.remote_img?t.remote_img:"http://placehold.it/475x475&text=[img]"},s.getOrderByID(e.orderid,o)}]),superApp.controller("AdminOrdersCtrl",["$rootScope","$scope","$state","adminService",function(t,e,i,r){function n(t){var e=[];for(date in t)e.push(t[date]);$("#orders-chart").highcharts({chart:{zoomType:"x"},title:{text:"Daily Sales Totals"},xAxis:{type:"datetime",minRange:12096e5},yAxis:{title:{text:"Total Sales in USD"}},legend:{enabled:!1},series:[{type:"line",name:"Total",pointInterval:864e5,pointStart:Date.UTC(2015,6,11),data:e}]})}function s(t,i){if(t)e.error=t;else{for(var r={},s=0;s<i.length;s++)void 0===r[moment(i[s].createdAt).format("M/D")]&&(r[moment(i[s].createdAt).format("M/D")]=0),r[moment(i[s].createdAt).format("M/D")]+=parseInt(i[s].total),e.totalOrderVolume+=parseInt(i[s].total),moment(i[s].createdAt).isAfter(moment().subtract(1,"months"))&&(e.monthOrderVolume+=parseInt(i[s].total)),moment(i[s].createdAt).isAfter(moment().subtract(1,"days"))&&(e.dailyOrderVolume+=parseInt(i[s].total));e.orders=i,n(r)}}e.totalOrderVolume=0,e.monthOrderVolume=0,e.dailyOrderVolume=0,e.error=null,e.getDisplayDate=function(t){return moment(t).format("LL")},e.formatShipTo=function(t){return t?"<strong>"+t.name+"</strong><br>"+t.address1+" "+(t.address2||"")+"<br>"+t.city+", "+t.state+" "+t.zip:"No shipping information provided"},e.formatValue=function(t){return"$"+t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")},r.getAllOrders(s)}]),superApp.controller("AdminProductCtrl",["$rootScope","$scope","$state","storeService","productService","$stateParams",function(t,e,i,r,n,s){s.productnumber||i.go("admin.products"),e.mode="view",e.message="",e.updateProduct=function(){e.updating||(e.updating=!0,n.updateProduct(e.product,function(t,i){t&&(e.error=t)}),e.updating=!1,e.mode="view")},r.getProductByID(s.productnumber,function(t,i){e.product=i})}]),superApp.controller("AdminProductsCtrl",["$rootScope","$scope","$state","adminService","merchantService","productService","storeService",function(t,e,i,r,n,s,o){e.vendornames={},r.getAllProducts(function(t,i){if(t)return void(e.error=t);e.products=i,e.vendorIDs=[];for(var n=0;n<i.length;n++)e.vendorIDs.indexOf(i[n].attributes.vendor)<0&&(e.vendorIDs.push(i[n].attributes.vendor),r.getMerchantProfile(i[n].attributes.vendor,function(t,i){t?e.error=t:e.vendornames[i.id]=i.name}));e.$parent.vendornames=e.vendornames}),e.editProduct=function(t,i){e.products.forEach(function(e){e.productnumber==t&&("featured"==i?e.featured=e.featured?!1:!0:("active"==i||"isYLIFT"==i)&&(e[i]="Y"==e[i]?"N":"Y"),s.updateProduct(e))})},e.viewProduct=function(t){e.message="",o.getProductByID(t,function(t,i){return t?void(e.error=t):void(e.view_product=i)}),e.mode="view"}}]),superApp.controller("AdminPromoCtrl",["$rootScope","$scope","$state","bcrypt","adminService",function(t,e,i,r,n){e.displayPromo=function(t,e){return"percent_off"==e?100*Number(t)+"% off":"new_price"==e?"New price: $"+t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(","):"money_off"==e?"$"+t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")+" off":void 0},e.promptDelete=function(t){confirm("Are you sure you want to delete "+t+"?")&&n.deletePromo(t,function(i,r){if(i&&(e.error=i),r){e.notify="Promo code '"+t+"'' was successfully deleted.";for(var n=0;n<e.promos.length;n++)if(e.promos[n].key==t)return void e.promos.splice(n,1)}})},e.activate=function(){if(e.error=null,e.activating)return void(e.error="Please wait");if(!e.newcode)return void(e.error="Please enter a promo code");if(!e.promotype)return void(e.error="Please select a promo type");if(!e.value)return void(e.error="Enter a value for the promo code");if(!e.makeactive)return void(e.error="Choose whether to make the promo code active upon submission");if(!e.message)return void(e.error="Please provide a message to display upon use of code");if(!e.domain)return void(e.error="Please indicate how the code can be used");if("percent_off"==e.promotype){if(isNaN(e.value)||e.value<=0||e.value>100||e.value.length>2)return void(e.error="Enter a valid percent")}else if("new_price"==e.promotype){if(isNaN(e.value)||e.value<=0)return void(e.error="Enter a valid price")}else if("money_off"==e.promotype&&isNaN(e.value))return void(e.error="Enter a valid discount");var t={};t.key=e.newcode,t.type=e.promotype,t.value="percent_off"==e.promotype?.01*Number(e.value):e.value,t.active=e.makeactive,t.message=e.message,t.domain=e.domain,e.activating=!0,n.addPromoCode(t,function(i,r){return i?void(e.error=i):(e.notify="Promo code '"+r+"' was successfully activated",e.activating=!1,void e.promos.push(t))})},n.getAllPromoCodes(function(t,i){t&&(e.error=t),e.promos=i})}]),superApp.controller("AdminUserCtrl",["$rootScope","$window","$scope","$state","toolbelt","adminService","storeService","$stateParams","$http",function(t,e,i,r,n,s,o,a,d){function c(){return i.error=null,i.addressname?i.address1?i.city?i.state?i.zip?i.addressphone?i.addressemail?!0:(i.error="Please add a contact email address",!1):(i.error="Please add a contact phone number for this address",!1):(i.error="Please add the address zip",!1):(i.error="Please add the address state",!1):(i.error="Please add the address city",!1):(i.error="Please add the street address",!1):(i.error="Please name this address",!1)}function l(t,e){i.loadingAddresses=!1,t&&(i.error=t),i.addresses=e,i.userloaded=!0}i.edit=!1,i.clearAddress=function(){i.addressname=null,i.address1=null,i.address2=null,i.city=null,i.state=null,i.zip=null,i.addressphone=null,i.addressemail=null,i.currAddress=null,i.addressInd=null,i.yliftInd=null},i.updateInfo=function(){i.error=null,i.notify=null,i.updating=!0;var t=angular.copy(i.profile);t.name=i.name,t.email=i.email,s.checkEmailAvailability(i.email,function(e,r){return e?void(i.error=e):r.available?void s.updateUserProfile(t,function(t,e){i.profile=e,i.edit=!1,i.updating=!1,i.notify="Successfully updated user profile",i.edit=!1}):void(i.error="Email is already in use.")})},i.submitAddress=function(){if(i.error=null,i.notify=null,c()){var t={name:i.addressname,address1:i.address1,address2:i.address2,city:i.city,state:i.state,zip:i.zip,phone:i.addressphone,email:i.addressemail,profile:i.profile.id,"default":i["default"]};0==i.addresses.length&&(t["default"]=!0),i.isYLIFT&&(t.yliftInd=i.yliftInd),i.currAddress&&(t.id=i.currAddress.id,t.createdAt=i.currAddress.createdAt),i.editAddressView&&(i.updating=!0,s.updateAddress(t,function(t,e){t?i.error=t:(i.updating=!1,i.clearAddress(),i.addAddressView=!1,i.editAddressView=!1,i.notify="Successfully updated user address")})),i.addAddressView&&(i.adding=!0,s.addAddress(t,function(t,e){t?i.error=t:(i.updating=!1,i.clearAddress(),i.addAddressView=!1,i.editAddressView=!1,i.notify="Successfully added user address",i.addresses.push(e))}))}},i.selectAddress=function(t){return i.addAddressView=!1,i.currAddress==i.addresses[t]?(i.currAddress=null,i.currAddressImg=null,void(i.editAddressView=!1)):(i.currAddress=i.addresses[t],i.addressname=i.currAddress.name,i.address1=i.currAddress.address1,i.address2=i.currAddress.address2,i.city=i.currAddress.city,i.state=i.currAddress.state,i.zip=i.currAddress.zip,i.addressphone=i.currAddress.phone,i.addressemail=i.currAddress.email,i.yliftInd=i.currAddress.yliftInd,i.addressInd=t,void(i.editAddressView=!0))},i.enableAddAddress=function(){i.clearAddress(),i.editAddressView=!1,i.addAddressView=!0},i.cancel=function(){i.editAddressView=!1,i.addAddressView=!1},i.makeDefault=function(t){if(e.confirm("Make this address the default?"))for(var r=0;r<i.addresses.length;r++)i.addresses[r]["default"]&&(i.addresses[r]["default"]=!1,s.updateAddress(i.addresses[r],function(t,e){t&&(i.error=t)})),r==t&&(i.addresses[r]["default"]=!0,s.addAddress(i.addresses[r],function(t,e){t&&(i.error=t)}))},i.removeAddress=function(t){if(i.error=null,i.notify=null,e.confirm("Are you sure?")){i.clearAddress(),i.addAddressView=!1,i.editAddressView=!1;var r=i.addresses[t];s.deleteAddress(r,function(e,r){e?i.error=e:(i.addresses.splice(t,1),i.notify="Address successfully removed")})}},i.formatPrice=function(t){return"$"+n.insertCommasIntoNumber(t)},s.getProfileByID(a.profileid,function(t,e){t&&(i.error=t),i.profile=e,s.getAddresses(i.profile.id,l),i.loadingAddresses=!0,o.getProductsInCart(a.profileid,function(t,e){if(!t){i.cartProducts={},i.total=0,i.quantities={};for(var r=0;r<e.length;r++)i.quantities[e[r].productnumber]=e[r].quantity,s.getProduct(e[r].productnumber,function(t,e){t?i.error=t:(i.cartProducts[e.productnumber]=e,i.total+=e.price*i.quantities[e.productnumber])})}})})}]),superApp.controller("AdminUsersCtrl",["$rootScope","$scope","$state","adminService","productService","$http",function(t,e,i,r,n,s){function o(t){return moment().diff(t.last_login,"days")<5}function a(t){return moment().diff(t.last_login,"months")<=1}function d(t,i){t&&(e.error=t),e.profiles=i}function c(t,i){return t?void(e.error=t):void(e.yliftProfiles=i)}e.error=null,e.getActiveUserCount=function(){return e.profiles.filter(o).length},e.getMonthlyUserCount=function(){return e.profiles.filter(a).length},r.getAllProfiles(d),r.getAllYLIFTProfiles(c)}]),superApp.controller("AdminVendorCtrl",["$rootScope","$scope","$state","storeService","adminService","$stateParams",function(t,e,i,r,n,s){function o(t,i){return e.updating=!1,t?void(e.error=t):void 0}e.error=null,e.updating=!1,s.merchantid||i.go("admin.vendors"),e.updateMerchant=function(){e.updating||(e.error=null,e.updating=!0,n.updateMerchantProfile(e.vendor,o))},n.getMerchantProfile(s.merchantid,function(t,i){t&&(e.error=t),e.vendor=i,e.vendor.members&&e.vendor.members.length>0&&(e.members=[],e.vendor.members.forEach(function(t){n.getProfileByID(t,function(t,i){i&&e.members.push(i)})}))}),r.getProductsByMerchant(s.merchantid,function(t,i){t&&(e.error=t),e.merchantProducts=i})}]),superApp.controller("AdminVendorsCtrl",["$rootScope","$scope","$state","authService","profileService","adminService","$stateParams","$timeout","storeService",function(t,e,i,r,n,s,o,a,d){r.isAdmin||i.go("store")}]),superApp.controller("CheckoutBillingCtrl",["$rootScope","$scope","$state","$stateParams","storeService","authService","stripeService",function(t,e,i,r,n,s,o){function a(t,i){e.customerUpdating=!1,i?e.error=i:(d(t),e.toggleAddPayment())}function d(t){e.customer=t,e.cards=t.sources?t.sources.data:[],e.loadingCustomer=!1}e.processingBillingInfo=!1,e.addPaymentView=!1,e.ccnum=null,e.cvc=null,e.exp=null,e.namecard=null,e.billingname=null,e.billingaddress1=null,e.billingaddress2=null,e.billingcity=null,e.billingstate=null,e.billingzip=null,e.error=null,e.toggleAddPayment=function(){e.addPaymentView=!e.addPaymentView},e.selectPayment=function(t){e.paymentMethod==e.cards[t]?(e.paymentMethod=null,o.setCard(null)):(e.paymentMethod=e.cards[t],o.setCard(e.paymentMethod))},e.isCardSelected=function(t){return e.paymentMethod==e.cards[t]},e.creditCardFieldsComplete=function(){return e.validCCNum()&&e.namecard&&e.validCVC()&&e.validExpDate()},e.billingFieldsComplete=function(){return e.billingname&&e.billingaddress1&&e.billingcity&&e.billingstate&&e.billingzip},e.validCCNum=function(){return Stripe.card.validateCardNumber(e.ccnum)},e.validCVC=function(){return Stripe.card.validateCVC(e.cvc)},e.validExpDate=function(){if(void 0==e.exp)return!1;var t=e.exp.split("/");return Stripe.card.validateExpiry(t[0],t[1])},e.formatExp=function(t){e.exp&&2==e.exp.length&&"/"!=e.exp.slice(-1)&&(e.exp=e.exp+"/")},e.goToSummary=function(){o.setCard(e.paymentMethod),e.nextState()},e.addPayment=function(){if(!e.customerUpdating)if(e.customerUpdating=!0,e.creditCardFieldsComplete){var t=e.exp.split("/");e.card={number:e.ccnum,cvc:e.cvc,exp_month:t[0],exp_year:t[1]},e.billing={name:e.billingname,address_line1:e.billingaddress1,address_line2:e.billingaddress2,address_city:e.billingcity,address_state:e.billingstate,address_zip:e.billingzip},o.addCard(e.card,e.billing,a)}else e.error="Please fill out all credit card information",e.customerUpdating=!1},e.profile&&e.profile.customerid?o.getCustomer(e.profile.customerid,d):(e.loadingCustomer=!1,e.toggleAddPayment())}]),superApp.controller("CheckoutCtrl",["$rootScope","$scope","$state","$stateParams","$timeout","storeService","authService","stripeService","locationService","productService",function(t,e,i,r,n,s,o,a,d,c){function l(t,i){i&&(e.addresses=i,e.addressesLoaded=!0)}function u(){e.productsInCart.forEach(function(t,i){c.getMerchant(t.productnumber,function(i,r){"N"==r.yliftCanAcceptPayment&&(e.total-=parseInt(e.products[t.productnumber].price)*parseInt(t.quantity),e.note="Note: You will receive a separate invoice in your inbox for some items in your cart due to the terms of the Y Lift Network.")})})}e.shippingCost=5,e.total=e.shippingCost,e.addAddressView=!1,e.addresseshipTo=null,e.productsInCart=[],e.products=[],e.addresses=[],e.checkoutState="shipping",e.orderError=null,e.addressesLoaded=!1,e.orderSubmitted=!1,e.states={shipping:{editable:!0,next:"billing"},billing:{editable:!1,next:"review"},review:{editable:!1}},o.authorized?(e.profile=o.profile,e.profileid=o.profile.id,d.getProfileAddresses(l)):(e.addresses=[],e.addressesLoaded=!0),e.nextState=function(){var t=e.states[e.checkoutState].next;e.states[t].editable=!0,e.goToState(t)},e.goToState=function(t){e.states[t].editable&&n(function(){e.checkoutState=t},0)},e.isCheckoutState=function(t){return e.checkoutState==t},e.isEditable=function(t){return e.states[t].editable},e.onProductsLoaded=function(){e.products=s.productsByID,s.getProductsInCart(e.profileid,function(t,i){e.merchants=[],e.productsInCart=i;for(var r=0;r<e.productsInCart.length;r++)-1==e.merchants.indexOf(s.getProductMerchant(e.productsInCart[r].productnumber))&&e.merchants.push(s.getProductMerchant(e.productsInCart[r].productnumber)),e.total+=parseInt(e.products[e.productsInCart[r].productnumber].price)*parseInt(e.productsInCart[r].quantity);u()})},e.submitOrder=function(t,r){1!=e.orderSubmitted&&(e.orderSubmitted=!0,a.submitOrder(e.addressShipTo,e.productsInCart,e.merchants,e.shippingCost,e.total,function(t,r){t?(e.orderError=t.message,e.orderSubmitted=!1):(i.go("order",{orderid:r.id}),s.emptyCart(e.profileid,function(t){}))}))},s.productsRetrieved?e.onProductsLoaded():s.getStoreFront(e.onProductsLoaded)}]),superApp.controller("CheckoutReviewCtrl",["$rootScope","$scope","$state","$stateParams","toolbelt","storeService","authService","stripeService",function(t,e,i,r,n,s,o,a){e.emailEntered=!1,e.showItems=!1;var d=a.customer;d&&d.email?(e.confEmail=d.email,e.emailEntered=!0):o.authorized&&(e.confEmail=o.profile.email,e.emailEntered=!0),e.formatValue=function(t){if(t){var e=parseInt(t).toFixed(2);return"$"+n.insertCommasIntoNumber(e)}return""},e.addEmail=function(){if(!t)var t=a.customer;t.email=e.confEmail,a.setCustomer(t),e.emailEntered=!0},e.toggleItems=function(){e.showItems=!e.showItems}}]),superApp.controller("CheckoutShippingCtrl",["$rootScope","$scope","$state","$stateParams","storeService","authService","profileService","locationService",function(t,e,i,r,n,s,o,a){function d(t,i){0==e.$parent.addresses.length&&(i["default"]=!0,e.$parent.addressShipTo=i),e.addAddressView=!1,e.updatingAddress=!1,e.clearAddress()}e.addAddressView=!1,e.toggleAddAddress=function(){e.addAddressView=!e.addAddressView},e.selectAddress=function(t){e.$parent.addressShipTo=e.$parent.addressShipTo==e.$parent.addresses[t]?null:e.$parent.addresses[t]},e.isAddressSelected=function(t){return e.$parent.addressShipTo==e.$parent.addresses[t]},e.clearAddress=function(){e.addressname=null,e.address1=null,e.address2=null,e.city=null,e.state=null,e.zip=null,e.currAddress=null,e.currAddressImg=null,e.addressInd=null},e.addAddress=function(){e.updatingAddress=!0;var t={name:e.name,address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip};s.authorized?a.addAddressToProfile(t,d):d(null,t)};var c=null;c=e.$watch("addressesLoaded",function(t,i){if(t)if(e.$parent.addresses.length>0)for(var r=0;r<e.$parent.addresses.length;r++)e.$parent.addresses[r]["default"]&&(e.$parent.addressShipTo=e.$parent.addresses[r]);else e.addAddressView=!0}),e.$on("$destroy",function(){
c()})}]),superApp.controller("BeforeAfterCtrl",["$rootScope","$scope","$window","$location","$state","$stateParams","testimonialService",function(t,e,i,r,n,s,o){e.procedures=[],e.displayTestimonials=[],e.filter=function(t){e.displayTestimonials=[];for(var i=0;i<e.testimonials.length;i++)e.testimonials[i].procedure==t&&e.displayTestimonials.push(e.testimonials[i])},o.getAllTestimonials(function(t,i){t&&(e.testimonials=i,e.displayTestimonials=i,e.testimonials.forEach(function(t){e.procedures.indexOf(t.procedure)<0&&e.procedures.push(t.procedure)}),s.procedure&&e.filter(s.procedure))})}]),superApp.controller("LeaveReviewCtrl",["$rootScope","$state","$scope","$stateParams","authService","storeService","productService",function(t,e,i,r,n,s,o){function a(t,e){t&&(i.error=t),i.productLoaded=!0,i.product=e}i.submitted=!1,i.pn=r.productnumber,i.sendReview=function(){i.submitting=!0,i.review={title:i.title,review:i.review,name:n.profile.name,rating:parseInt(i.rating)},o.submitReview(i.pn,i.review,function(t){i.submitted=!0,i.submitting=!1})},i.backToProduct=function(){e.go("product",{productnumber:i.pn})},s.getProductByID(i.pn,a)}]),superApp.controller("LocationsCtrl",["$rootScope","$scope","$state","$location","locationService",function(t,e,i,r,n){function s(t,i){var r={url:"/img/logo_md.png"};e.locations=i,e.locationsLoaded=!0,e.locations.forEach(function(t,i){t.focused=!1,e.markers[i]=new google.maps.Marker({position:new google.maps.LatLng(t.location.A,t.location.F),map:e.map,animation:google.maps.Animation.DROP,title:t.name,icon:r}),google.maps.event.addListener(e.markers[i],"click",function(t){e.toggleFocus(i),e.map.panTo(t.latLng)})})}t.pageTitle="Locations",e.locationsLoaded=!1,e.showLocationsRight=!0,e.selectedLocation=null,e.showSearch=!1,e.viewBooking=!1,e.mapLoaded=!1,e.locations=[],e.locationFocused={},e.map={},e.markers=[],e.toggleFocus=function(t){e.locations[t].focused=!e.locations[t].focused,e.locations[t].focused&&e.map.panTo(new google.maps.LatLng(e.locations[t].location.A,e.locations[t].location.F))},e.toggleSearch=function(){e.showSearch=!e.showSearch},e.focusLocation=function(t){e.locations[t].focused=!0},e.unFocusLocation=function(){e.locations[index].focused=!1},e.searchZip=function(t){var i=new google.maps.Geocoder;i.geocode({address:t},function(t,i){if(i==google.maps.GeocoderStatus.OK&&t.length>0){var r=new google.maps.LatLng(t[0].geometry.location.A,t[0].geometry.location.F);e.map.setCenter(r),e.zip=null}else e.zipError="Enter a valid zip code"})},e.onMapLoaded=function(t){e.mapLoaded=!0,e.map=t,n.getYLiftLocations(s)},e.toggleLocationPanel=function(){e.showLocationsRight=!e.showLocationsRight},e.openBooking=function(t,i){i.stopPropagation(),e.selectedLocation=t,e.viewBooking=!0},e.closeBooking=function(t){e.selectedLocation=null,e.viewBooking=!1},navigator.geolocation.getCurrentPosition(function(t){var i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),r=new google.maps.Map(document.getElementById("map-canvas"),{center:i,zoom:12,mapTypeControl:!1,streetViewControl:!1});e.onMapLoaded(r)},function(t){if(t.code==t.PERMISSION_DENIED){var i=new google.maps.LatLng(39,-95),r=new google.maps.Map(document.getElementById("map-canvas"),{center:i,zoom:4,mapTypeControl:!1,streetViewControl:!1});e.onMapLoaded(r)}})}]),superApp.controller("LoginCtrl",["$rootScope","$scope","$state","authService","$location","$stateParams","$timeout",function(t,e,i,r,n,s,o){e.name="",e.loginState="signin",e.loginToken=s.token,e.failedMessage="",e.loggedin=r.loggedin,e.signingIn=!1,e.requestingReset=!1,e.registering=!1,e.loginToken&&r.loginWithToken(e.loginToken,function(t,r){r?i.go("profile"):(console.log(t),e.failedMessage="Invalid/missing token.")}),e.showOptions=function(){return"signin"==e.loginState||"register"==e.loginState?!0:!1},e.showSignin=function(){e.failedMessage="",e.loginState="signin"},e.showForgotPass=function(){e.failedMessage="",e.loginState="forgot_password"},e.login=function(){e.signingIn=!0,r.login(e.email,e.password,function(t,r){r?(e.loggedin=!0,i.go("temp_password"==r?"pass_reset":"store")):(e.signingIn=!1,e.failedMessage=t)})},e.requestPasswordReset=function(){e.requestingReset=!0,r.requestPasswordReset(e.email,function(t,i){i?(e.failedMessage=null,e.loginState="signin",e.email="",e.pass_reset=!0,e.requestingReset=!1):(e.requestingReset=!1,e.failedMessage=t)})},e.changeState=function(t){e.loginState=t,e.failedMessage="",o(function(){var e=document.getElementById("focus_"+t);e&&e.focus()})}}]),superApp.controller("LogoutCtrl",["$rootScope","$scope","$state","$cookies","authService","trdInterceptor",function(t,e,i,r,n,s){e.clearCookies=function(){delete r.trdTkn,delete r.pInCart},s.setToken(null),e.clearCookies(),n.clearAuthorization(),n.loggedin=!1,t.$broadcast("loggedout"),i.go("login")}]),superApp.controller("MerchantInventoryCtrl",["$rootScope","$scope","$state","profileService","storeService",function(t,e,i,r,n){function s(t,i){return t?void(e.error=t):(e.products=i,e.filteredProducts=i,i.forEach(function(t,i){e.productNames.push(t.name)}),void(e.productsLoading=!1))}function o(t,i){return t?void(e.error=t):(e.merchant=i,e.profileLoading=!1,void n.getProductsByMerchant(e.merchant.id,s))}e.profileLoading=!0,e.productNames=[],e.filteredProducts=[],e.goToOrders=function(){i.go("merchant_orders")},e.filter=function(t){""==t?(e.query="",e.filteredProducts=e.products):(e.filteredProducts=[],e.products.forEach(function(i,r){i.name.toUpperCase().indexOf(t.toUpperCase())>-1&&e.filteredProducts.push(i)}))},r.getMerchantProfile(o)}]),superApp.controller("MerchantInventoryNewProductCtrl",["$rootScope","$scope","$state","productService","awsService",function(t,e,i,r,n){function s(t,e,i){n.uploadFile(t,e,i,o)}function o(t){}function a(t,r){return t?void(e.error=t):void i.go("merchant_inventory.product",{productnumber:r.productnumber})}e.fileCount=0,e.product={},e.product.tmpImg={},e.product.tmpAltImg=[],e.onFileAdded=function(t,i,r){var o=t[0].file,a=t[0].file.type.split("/"),d={};d.identifier=t[0].uniqueIdentifier+"."+t[0].chunks.length,d.extension=a[1],d.name=o.name,0==e.fileCount?e.product.tmpImg=d:e.product.tmpAltImg.push(d),n.getSignedRequest(o,s),e.fileCount++},e.addProduct=function(){e.updating||(e.updating=!0,r.addProduct(e.product,a))}}]),superApp.controller("MerchantInventoryProductCtrl",["$rootScope","$scope","$state","storeService","$stateParams","productService","awsService",function(t,e,i,r,n,s,o){function a(t,e,i){o.uploadFile(t,e,i,d)}function d(t){}function c(t,i){return t?void(e.error=t):(e.mode="view",e.updating=!1,void(e.product=i))}e.onFileAdded=function(t,i,r){e.file=t[0].file;var n=t[0].file.type.split("/");e.product.tmpImg.identifier=t[0].uniqueIdentifier+"."+t[0].chunks.length,e.product.tmpImg.extension=n[1],e.product.tmpImg.name=e.file.name,o.getSignedRequest(e.file,a)},e.updateProduct=function(){e.updating||(e.updating=!0,s.updateProduct(e.product,c))},r.getProductByID(n.productnumber,c)}]),superApp.controller("MerchantInventoryViewCtrl",["$rootScope","$scope","$state","storeService","profileService","productService",function(t,e,i,r,n,s){e.goToProduct=function(t){i.go("merchant_inventory.product",{productnumber:t})},e.deactivateProduct=function(t){confirm("Are you sure you want to deactivate this product?")&&(t.active="N",s.updateProduct(t))},e.activateProduct=function(t){t.active="Y",s.updateProduct(t)},e.defaultImage=function(t){t.img=t.remote_img?t.remote_img:"http://placehold.it/475x475&text=[img]"}}]),superApp.controller("NetworkCtrl",["$rootScope","$scope","$window","$location","$state","authService",function(t,e,i,r,n,s){e.loggedin=s.profile?!0:!1}]),superApp.controller("MerchantOrdersCtrl",["$rootScope","$scope","$state","profileService","storeService",function(t,e,i,r,n){function s(t,i){return t?void(e.error=t):void(e.orders=i)}function o(t,i){return t?void(e.error=t):(e.merchant=i,void n.getMerchantOrders(e.merchant.id,s))}e.displayDate=function(t){return moment(t).format("MMMM Do, YYYY")},e.goToOrder=function(t){i.go("order",{orderid:t})},e.updateOrder=function(t){n.updateOrder(t)},e.getMerchantProducts=function(t){for(var i=[],r=0;r<t.length;r++)n.getProductMerchant(t[r].productnumber)==e.merchant.id&&i.push(n.productsByID[t[r].productnumber]);return i},r.getMerchantProfile(o)}]),superApp.controller("OfficeSchedulingCtrl",["$scope","$state","profileService","bookingService","authService","locationService",function(t,e,i,r,n,s){function o(e,i){t.apptsLoaded=!0,t.appts=i||[]}function a(e,i){for(var r=0;r<i.length;r++)i[r].yliftInd&&(t.addresses.push(i[r]),t.selectedOffice=t.selectedOffice||i[r].id);t.officesLoaded=!0,t.selectedOffice||(t.error='Please add a Y Lift Network office in your <a href="#!/settings/profile">settings</a> to access appointment scheduling.')}t.appts=[],t.addresses=[],t.apptsByOfficeAndTimestamp={},t.startDate=moment().startOf("week"),t.endDate=moment().endOf("week"),t.viewState="Week",t.apptsLoaded=!1,t.officesLoaded=!1,t.selectedAppt=null,t.selectedOffice=null,t.closeConfirm=function(e){t.selectedAppt=null,e&&e.stopPropagation()},t.getNavDisplay=function(){return"Week"==t.viewState?t.startDate.format("MMM Do")+" - "+t.endDate.format("MMM Do"):t.startDate.format("MMMM")},t.prev=function(){"Week"==t.viewState?(t.endDate.subtract(1,"weeks"),t.startDate=angular.copy(t.endDate).subtract(1,"weeks").startOf("week")):"Month"==t.viewState&&(t.endDate.subtract(1,"months").endOf("month"),t.startDate=angular.copy(t.startDate).subtract(1,"months").startOf("month")),t.loadApptsInRange(t.startDate.format("X"),t.endDate.format("X"))},t.next=function(){"Week"==t.viewState?(t.startDate.add(1,"weeks").startOf("week"),t.endDate=angular.copy(t.startDate).add(1,"weeks")):"Month"==t.viewState&&(t.startDate.add(1,"months").startOf("month"),t.endDate=angular.copy(t.startDate).add(1,"months")),t.loadApptsInRange(t.startDate.format("X"),t.endDate.format("X"))},t.getSlotClass=function(e,i){t.apptsByOfficeAndTimestamp[t.selectedOffice]=t.apptsByOfficeAndTimestamp[t.selectedOffice]||[];var r=t.apptsByOfficeAndTimestamp[t.selectedOffice][t.getUnix(e,i)];return r&&r.status?r.status:""},t.getUnix=function(e,i){return angular.copy(t.startDate).add(e,"days").hours(i).format("X")},t.getDisplayDay=function(e){return angular.copy(t.startDate).add(e,"days").format("ddd")},t.getDisplayDate=function(e){return angular.copy(t.startDate).add(e,"days").format("MMM Do YYYY")},t.getDisplayTime=function(e,i){return angular.copy(t.startDate).add(e,"days").hours(i).format("LT")},t.selectAppt=function(e,i,r){t.selectedAppt=t.apptsByOfficeAndTimestamp[t.selectedOffice][t.getUnix(e,i)],r.stopPropagation()},t.loadApptsInRange=function(e,i){r.getProviderAppts(e,i,t.selectedOffice,n.profileid,o)};var d=null;d=t.$watch("appts",function(e,i){if(e&&e.length)for(var r=0;r<e.length;r++)t.apptsByOfficeAndTimestamp[e[r].office]=t.apptsByOfficeAndTimestamp[e[r].office]||[],t.apptsByOfficeAndTimestamp[e[r].office][e[r].date]=e[r]});var c=null;c=t.$watch("selectedOffice",function(e,i){e&&r.getProviderAppts(t.getUnix(0,0),t.getUnix(30,0),t.selectedOffice,n.profileid,o)}),t.$on("$destroy",function(){c(),d()}),s.getProfileAddresses(a)}]),superApp.controller("OrderCtrl",["$rootScope","$scope","$window","$location","$state","$stateParams","storeService",function(t,e,i,r,n,s,o){e.orderid=s.orderid,e.loading=!0,e.goToProfile=function(){n.go("profile")},e.displayCreatedAt=function(t){return moment(t).format("MMMM Do, YYYY")},o.getOrderByID(e.orderid,function(t,i){return t?(e.error=t,void(e.loading=!1)):(e.order=i,e.createdAt=e.displayCreatedAt(e.order.createdAt),void(e.loading=!1))})}]),superApp.controller("ProductCtrl",["$rootScope","$scope","$state","$stateParams","storeService","authService","productService","profileService",function(t,e,i,r,n,s,o,a){function d(i,r){i?e.error=i:(t.$broadcast("cartviewchange",{displayCart:!0}),e.adding=!1,e.added=!0)}function c(t,i){e.loading=!1,t&&(e.error=t),e.product=i}function l(t,i){for(var r=0;r<i.length;r++)i[r].productnumber==e.product.productnumber&&i.splice(r,1);e.relatedProducts=i,e.relatedLoading=!1}function u(t,i){i&&"N"==i.yliftCanAcceptPayment&&(e.note="Note: This product will not be billed at checkout, purchase will result in a separate invoice from the vendor.")}function p(t,i){e.reviews=i,e.reviewsLoading=!1}function f(t,i){i&&(e.rating=i.mean),e.ratingLoading=!1}e.loading=!0,e.reviewsLoading=!0,e.ratingLoading=!0,e.relatedLoading=!0,e.adding=!1,e.added=!1,e.productnumber=r.productnumber,e.error=!1,e.addToCart=function(){return console.log("adding to cart",e.product,e.quantity),e.quantity<=0?void(e.error="Please select a quantity first"):e.quantity%e.product.attributes.increment!=0?void(e.error="The quantity entered must be a multiple of "+e.product.attributes.increment):void(e.adding||(e.error=!1,e.adding=!0,n.addItemToCart(e.profileid,e.product.productnumber,e.quantity,d)))},e.reset=function(){e.added=!1,e.error=!1,e.quantity=0},e.goToLeaveReview=function(){i.go("leave_review",{productnumber:e.productnumber})},e.defaultImage=function(t){t.img=t.remote_img?t.remote_img:"http://placehold.it/475x475&text=[img]"},s.authorized&&(e.profileid=s.profile.id),n.getProductByID(e.productnumber,c),n.getRelatedProducts(e.productnumber,l),o.getMerchant(e.productnumber,u),o.getReviews(e.productnumber,p),o.getRating(e.productnumber,f),o.addPageView(e.productnumber)}]),superApp.controller("ProfileCtrl",["$rootScope","$scope","$state","authService","awsService","$location","$stateParams","$timeout","storeService","trainingService","toolbelt",function(t,e,i,r,n,s,o,a,d,c,l){function u(t,i){t&&(e.error=t),e.orders=i,e.ordersLoaded=!0}function p(t,i){i&&(e.trainings=i)}e.profile=r.profile,e.ordersLoaded=!1,e.downloading=!1,e.orders=[],e.trainings=[],e.createdAt=moment(e.profile.createdAt).format("MMMM Do, YYYY"),e.getDisplayDate=function(t){return l.displayDate(t,"LLL",{type:"X"})},e.formatAddress=function(t){return l.displayAddress(t)},e.getDisplayTotal=function(t){return t?"$"+t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(","):""},e.logoutNow=function(){i.go("logout")},e.goToOrder=function(t){i.go("order",{orderid:t})},e.download=function(t){e.error=null,e.downloading=!0,n.getObject(t,function(t,i){t&&(e.error="There was an issue downloading the materials, please reach out to support@ylift.io if this problem persists."),e.downloading=!1})},d.getOrdersByUserID(r.profile.id,u),c.getTrainingsByProfileID(p)}]),superApp.controller("RegisterCtrl",["$rootScope","$scope","$state","authService","$location","$window","$timeout","stripeService","storeService","trainingService","REG_FEE","profileService","locationService","$stateParams",function(t,e,i,r,n,s,o,a,d,c,l,u,p,f){function h(t){e.dates=t}function m(){var t={name:"Y Lift "+e.city,address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,email:e.profile.email,"default":!0};e.profile.name=e.name,e.profile.phone=e.phone,u.updateProfile(e.profile),p.addAddressToProfile(t)}function g(t){if(e.validating=!0,e.error=null,"form2"==t){if(e.name)if(e.address1)if(e.city)if(e.state&&2==e.state.length)if(e.zip&&5==e.zip.length)if(e.email){if(e.phone)return e.validating=!1,!0;e.error="Please enter a phone number"}else e.error="Please enter an email address";else e.error="Please enter a five digit zip";else e.error="Please enter a two letter state identifier";else e.error="Please enter a city";else e.error="Please enter an address";else e.error="Please enter your name to register";return e.validating=!1,!1}if("form3"==t)return e.validating=!0,e.medlicensenum?(e.validating=!1,!0):(e.error="Please enter your medical license number",e.validating=!1,!1);if("form4"==t){if(e.certname){if(e.location)return e.validating=!1,!0;e.error="Please select a training location"}else e.error="Please enter the name you'd like to appear on your YLIFT certificate";return e.validating=!1,!1}if("form5"==t)return e.validating=!0,e.password!==e.confirmpassword?(e.error="Passwords need to match",e.validating=!1,!1):e.password&&e.confirmpassword?e.password.length<6?(e.error="Password must be at least 6 characters long",e.validating=!1,!1):e.loginemail?(e.profile={},r.register(e.loginemail,e.password,function(i,n){return e.validating=!1,i?(e.error=n,!1):r.getAuthorization(function(i){return i&&(e.profile=angular.copy(r.profile),m()),e.viewState=t,!0})},JSON.stringify(e.meta))):(e.error="Please enter an account login email",e.validating=!1,!1):(e.error="Please enter a password",e.validating=!1,!1);if("review"==t){if("check"==e.cctype)return e.validating=!1,!0;if(e.cardname||(e.error="Please enter your name as it appears on your card"),Stripe.card.validateCardNumber(e.ccnum)||(e.error="Please enter a valid credit card number"),Stripe.card.validateCVC(e.cvc)||(e.error="Please enter a valid CVC code"),Stripe.card.validateExpiry(e.expmonth,e.expyear)||(e.error="Please enter a valid expiration date"),e.error)return e.validating=!1,!1;var i={number:e.ccnum,cvc:e.cvc,exp_month:e.expmonth,exp_year:e.expyear},n={name:e.cardname,address_line1:e.billingaddress1,address_line2:e.billingaddress2,address_city:e.billingcity,address_state:e.billingstate,address_zip:e.billingzip,country:e.billingcountry};e.meta={name:e.name,address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,fax:e.fax,uses_filler:e.uses_filler,specialty:e.specialty,medlicense:e.medlicensenum,filler_revenue_pct:e.filler_revenue_pct,filler_procedures:e.filler_procedures,training_location:e.location,training_date:e.training_date,certname:e.certname,staff:JSON.stringify(e.staff)},a.addCard(i,n,function(i,r){if(r)return e.error=r.message||r,e.validating=!1,!1;var n={email:e.email,metadata:e.meta};a.updateGuestCustomer(n,function(i,r){return r?(e.error=r.message||r,e.validating=!1,!1):(e.validating=!1,e.viewState=t,!0)})})}}e.staff=[],e.viewState=f.view||"start",e.total=l,e.$watch("billingsame",function(t,i){t&&e.billingsame&&(e.billingname=e.name,e.billingaddress1=e.address1,e.billingaddress2=e.address2,e.billingcity=e.city,e.billingstate=e.state,e.billingzip=e.zip,e.billingcountry=e.country)}),e.getNumber=function(t){for(var e=[],i=0;t>i;i++)e.push(i);return e},e.goTo=function(t){g(t)&&(e.viewState=t)},e.backTo=function(t){e.viewState=t,e.error=null},e.submit=function(){if(e.validating=!0,"check"==e.cctype){var t={name:e.name,address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,fax:e.fax,specialty:e.specialty,uses_filler:e.uses_filler,medlicense:e.medlicensenum,filler_revenue_pct:e.filler_revenue_pct,filler_procedures:e.filler_procedures,training_location:e.location,training_date:e.training_date,certname:e.certname,staff:e.staff};d.submitCheckOrder(t,e.total,function(t,i){e.validating=!1,t?e.error=t:e.viewState="success"})}else a.submitOrder(void 0,void 0,void 0,void 0,e.total,function(t,i){t?e.error=t:r.addUserYLIFT(i.id,function(t){e.validating=!1,t?e.error=t:e.viewState="success"})})},e.resetScope=function(){i.go(i.current,{},{reload:!0})},e.registerIndividual=function(){return e.registering?void(e.failedMessage="Processing your registration, please wait..."):(e.failedMessage=null,e.password!==e.confirmpassword?void(e.failedMessage="Passwords do not match"):e.password.length<6?void(e.failedMessage="Password must be at least 6 characters"):(e.registering=!0,void r.register(e.email,e.password,function(t,r){t?(e.registering=!1,e.failedMessage=r):i.go(r)})))},c.getAvailableDates(h)}]),superApp.controller("ResetPasswordCtrl",["$rootScope","$scope","$state","authService","$location","$stateParams","$timeout",function(t,e,i,r,n,s,o){r.validateResetToken(s.resettoken,function(t,i){t?e.valid=!0:(e.valid=!1,e.message=i)}),e.updatePassword=function(){return"undefined"==typeof e.password||e.password.length<6?void(e.failedMessage="Password must be at least 6 characters"):"undefined"==typeof e.confirm||0==e.confirm.length?void(e.failedMessage="Please confirm your password"):e.password!=e.confirm?void(e.failedMessage="Passwords do not match"):void r.updatePassword(s.resettoken,e.password,function(t,r){t?e.error=t:i.go("login")})}}]),superApp.controller("SearchResultsCtrl",["$rootScope","$scope","$window","$location","$state","$stateParams","storeService",function(t,e,i,r,n,s,o){e.query=s.query,e.displayProducts=function(t){e.products=t,e.displayedProducts=e.products.slice(0,15)},e.goToProduct=function(t){n.go("product",{productnumber:t})},e.loadMore=function(){for(var t=e.products[e.displayedProducts.length-1],i=1;6>=i;i++)e.products.push(t+i)},e.query?o.getFilteredProducts(e.query.toLowerCase(),function(t){e.displayProducts(t)}):(e.allProducts=[],e.dispayedProducts=[])}]),superApp.controller("SellInfoCtrl",["$rootScope","$scope","$state","authService","$location","$stateParams","$timeout",function(t,e,i,r,n,s,o){}]),superApp.controller("SettingsCtrl",["$rootScope","$scope","$state","authService","emailService","profileService","$location","$stateParams","$timeout","storeService","FileUploader","$window","locationService",function(t,e,i,r,n,s,o,a,d,c,l,u,p){e.profile=angular.copy(r.profile),e.isYLIFT=r.isYLIFT,e.viewState=i.current.name.split(".")[1],e.currOffice={},e.updating="none",e.updateProfile=function(t){if(e.emailchange=!1,e.updating=t,e.profile.email!=r.profile.email){if(!confirm("Are you sure you want to change your login email address to "+e.profile.email+"?"))return void(e.updating="none");s.updateProfile(e.profile,function(t,i){e.profile=i,e.updating="none",e.emailchange=!0,n.changeUserEmail(r.profile.email,e.profile.email)})}s.updateProfile(e.profile,function(t,i){e.profile=i,e.updating="none"})},e.updateAddress=function(t){p.updateAddress(t)},e.isCurrAddress=function(t){return e.currAddress==e.addresses[t]},e.goToState=function(t){e.viewState=t,i.go("settings."+e.viewState)},e.isSettingsState=function(t){return e.viewState==t}}]),superApp.controller("SettingsMerchantCtrl",["$rootScope","$scope","$state","authService","profileService","registrationService","$window",function(t,e,i,r,n,s,o){function a(t,i){e.verifying=!1,"verified"==t?(e.keyStatus=t,e.showSignUp=!0):"unverified"==t?e.keyStatus=t:"invalid"==t&&(e.keyStatus=t),i&&"can_add"==t&&(e.keyStatus=t,e.merchantProfile=i)}function d(i,r){e.merchantLoading=!1,e.registering=!1,r&&r.id&&(e.merchantProfile=r,e.admin=n.isAdminOfMerchant(r.id),e.merchantLoaded=!0),t.$broadcast("merchantcreated",r)}function c(t,i){return e.updating=!1,t?void(e.error=t):void(e.merchantLoaded=!0)}e.showSignUp=!1,e.verifying=!1,e.registering=!1,e.updating=!1,e.deleting=!1,e.merchantLoading=!0,e.merchantLoaded=!1,e.keyStatus=null,e.addMerchantAccount=function(){e.error=null,e.registering=!0,n.addMerchantProfile(e.merchantname,e.category,e.regkey,d)},e.updateMerchantAccount=function(){e.error=null,e.updating=!0,n.updateMerchantProfile(e.merchantProfile,c)},e.cancel=function(){e.showSignUp=!1,e.verifying=!1,e.registering=!1,e.updating=!1,e.deleting=!1,e.merchantLoading=!1,e.merchantLoaded=!1,e.keyStatus=null},e.addProfileToMerchant=function(){e.adding=!0,e.merchantProfile.members.push(r.profile.id),e.updateMerchantAccount(e.merchantProfile,c)},e.verifyRegKey=function(){e.verifying=!0,s.verifyKey(e.regkey,a)},n.getMerchantProfile(d)}]),superApp.controller("SettingsNotificationsCtrl",[,function(){}]),superApp.controller("SettingsProfileCtrl",["$rootScope","$scope","$state","authService","profileService","$location","$stateParams","$timeout","storeService","$window","locationService",function(t,e,i,r,n,s,o,a,d,c,l){function u(){return e.error=null,e.addressname?e.address1?e.city?e.state?e.zip?e.addressphone?e.addressemail?!0:(e.error="Please add a contact email address",!1):(e.error="Please add a contact phone number for this address",!1):(e.error="Please add the address zip",!1):(e.error="Please add the address state",!1):(e.error="Please add the address city",!1):(e.error="Please add the street address",!1):(e.error="Please name this address",!1)}function p(t,i){e.adding=!1,t?e.error=t:(e.addAddressView=!1,e.clearAddress(),e.addresses=l.locationsByProfile[r.profileid])}function f(t,i){e.updating=!1,t?e.error=t:(e.editAddressView=!1,e.clearAddress(),e.addresses=l.locationsByProfile[r.profileid],console.log("address updated",t,i,e.addresses))}function h(t,i){e.addresses=l.locationsByProfile[r.profileid]}function m(t,i){e.loadingAddresses=!1,e.addresses=l.locationsByProfile[r.profileid]}e.uploading=!1,e.addAddressView=!1,e.editAddressView=!1,e.loadingAddresses=!0,e.adding=!1,e.updating=!1,e.addresses=[],e.clearAddress=function(){e.addressname=null,e.address1=null,e.address2=null,e.city=null,e.state=null,e.zip=null,e.addressphone=null,e.addressemail=null,e.currAddress=null,e.addressInd=null,e.yliftInd=null},e.selectAddress=function(t){return e.addAddressView=!1,e.currAddress==e.addresses[t]?(e.currAddress=null,e.currAddressImg=null,void(e.editAddressView=!1)):(e.currAddress=e.addresses[t],e.addressname=e.currAddress.name,e.address1=e.currAddress.address1,e.address2=e.currAddress.address2,e.city=e.currAddress.city,e.state=e.currAddress.state,e.zip=e.currAddress.zip,e.addressphone=e.currAddress.phone,e.addressemail=e.currAddress.email,e.yliftInd=e.currAddress.yliftInd,e.addressInd=t,void(e.editAddressView=!0))},e.submitAddress=function(){if(u()){var t={name:e.addressname,address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip,phone:e.addressphone,email:e.addressemail,"default":e["default"]};0==e.addresses.length&&(t["default"]=!0),e.isYLIFT&&(t.yliftInd=e.yliftInd),e.currAddress&&(t.id=e.currAddress.id,t.createdAt=e.currAddress.createdAt,t.profile=r.profileid),e.editAddressView&&(e.updating=!0,l.updateAddress(t,f)),e.addAddressView&&(e.adding=!0,l.addAddressToProfile(t,p))}},e.removeAddress=function(t){if(c.confirm("Are you sure?")){e.clearAddress(),e.addAddressView=!1,e.editAddressView=!1;var i=e.addresses[t];l.removeAddress(i,h)}},e.makeDefault=function(t){if(c.confirm("Make this address the default?"))for(var i=0;i<e.addresses.length;i++)e.addresses[i]["default"]&&(e.addresses[i]["default"]=!1,l.updateAddress(e.addresses[i])),i==t&&(e.addresses[i]["default"]=!0,l.updateAddress(e.addresses[i]))},e.enableAddAddress=function(){e.clearAddress(),e.editAddressView=!1,e.addAddressView=!0},e.cancel=function(){e.editAddressView=!1,e.addAddressView=!1},l.getProfileAddresses(m)}]),superApp.controller("SettingsSchedulingCtrl",["$rootScope","$scope","$state","authService","profileService","$location","$stateParams","$timeout","storeService","$window",function(t,e,i,r,n,s,o,a,d,c){}]),superApp.controller("SettingsStoreCtrl",["$rootScope","$scope","$state","authService","profileService","$location","$stateParams","$timeout","storeService","stripeService","$window",function(t,e,i,r,n,s,o,a,d,c,l){e.loadingOrders=!0,e.loadingCustomer=!0,e.customerUpdating=!1,e.addPaymentView=!1,e.orders={},e.customer={},e.creditCardFieldsComplete=function(){return e.validCCNum()&&e.namecard&&e.validCVC()&&e.validExpDate()},e.billingFieldsComplete=function(){return e.billingname&&e.billingaddress1&&e.billingcity&&e.billingstate&&e.billingzip},e.validCCNum=function(){return Stripe.card.validateCardNumber(e.ccnum)},e.validCVC=function(){return Stripe.card.validateCVC(e.cvc)},e.validExpDate=function(){if(void 0==e.exp)return!1;var t=e.exp.split("/");return Stripe.card.validateExpiry(t[0],t[1])},e.formatExp=function(t){e.exp&&2==e.exp.length&&"/"!=e.exp.slice(-1)&&(e.exp=e.exp+"/")},e.onPaymentAdded=function(t,i){i?e.error=i:(e.onCustomerLoaded(t),e.customerUpdating=!1,e.toggleAddPayment())},e.onPaymentRemoved=function(t,i){i?e.error=i:(e.onCustomerLoaded(t),e.removingCard=!1)},e.goToOrder=function(t){i.go("order",{orderid:t})},e.toggleAddPayment=function(){e.addPaymentView=!e.addPaymentView},e.addPayment=function(){if(e.customerUpdating=!0,e.creditCardFieldsComplete){var t=e.exp.split("/");e.card={number:e.ccnum,cvc:e.cvc,exp_month:t[0],exp_year:t[1]},e.billing={name:e.billingname,address_line1:e.billingaddress1,address_line2:e.billingaddress2,address_city:e.billingcity,address_state:e.billingstate,address_zip:e.billingzip},c.addCard(e.card,e.billing,e.onPaymentAdded)}else e.error="Please fill out all credit card information",e.customerUpdating=!1},e.removePayment=function(t){l.confirm("Are you sure? This will remove your credit card information from our database.")&&(e.removingCard=!0,c.removeCard(t,e.onPaymentRemoved))},e.onCustomerLoaded=function(t){e.customer=t,e.loadingCustomer=!1,e.customer&&e.customer.sources&&(e.cards=e.customer.sources.data)},e.onOrdersLoaded=function(t){e.orders=t,e.loadingOrders=!1},d.getOrdersByUserID(r.profile.id,e.onOrdersLoaded),c.getCustomer(r.profile.customerid,e.onCustomerLoaded)}]),superApp.controller("StoreCtrl",["$rootScope","$scope","$window","$location","$state","$stateParams","storeService","authService",function(t,e,i,r,n,s,o,a){function d(t){e.productsInCart=t}function c(t,i){if(t)return void(e.error=t);e.products=i,e.productsByCategory=o.productsByCategory,o.getProductsInCart(a.profileid,d);var n=r.path().split("/");if(n.indexOf("product")>=0){var s=n.indexOf("product");e.goToProduct(n[++s])}e.loading=!1}t.pageTitle="Store",e.filteredProducts=[],e.products=[],e.productsInCart=[],e.productsByCategory=[],e.loading=!0,e.authLoaded=a.authorizationReceived,e.goToProduct=function(t){n.go("product",{productnumber:t})},e.isActive=function(t){return t==r.path()},e.openCart=function(){t.showCart(function(t){e.showCart=t})},e.defaultImage=function(t){t.img=t.remote_img?t.remote_img:"http://placehold.it/475x475&text=[img]"},e.$watch("authLoaded",function(t,e){t&&o.getStoreFront(c,!0)})}]),superApp.controller("SupportCtrl",["$rootScope","$scope","emailService","authService","$stateParams",function(t,e,i,r,n){e.submitted=!1,r.authorized&&(e.email=r.profile.email),n.topic&&(e.topic=n.topic),e.sendRequest=function(){return null==e.email?void(e.error="Please provide an email address for us to contact."):(e.submitting=!0,e.data={topic:e.topic,subject:e.subject,orderid:e.orderid,message:e.message},void i.sendSupportRequest(e.email,e.data,function(t,i){e.submitted=!0,e.submitting=!1}))}}]),superApp.controller("TechniquesCtrl",["$rootScope","$scope",function(t,e){}]),superApp.controller("TermsCtrl",["$rootScope","$scope","$window",function(t,e,i){}]),superApp.controller("ZonesCtrl",["$rootScope","$scope","$stateParams",function(t,e,i){e.viewState=i.procedure,e.changeView=function(t){e.viewState=t}}]),appDirectives.directive("appointmentConfirmModalDir",["profileService","authService","bookingService",function(t,e,i){return{restrict:"E",scope:{appt:"=",close:"="},templateUrl:"directives/appointment_confirm_modal_template.html",link:function(e,r){function n(t,i){return t?void(e.error=t):(e.appt=i,void e.close())}function s(t,i){e.patient=i}e.patient={},e.toTitleCase=function(t){return t?t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}):""},e.getDisplayDate=function(t){return moment(t,"X").format("LLLL")},e.updateStatus=function(t){e.appt.status=t,i.updateApptRequest(e.appt,e.patient,n)};var o=null;o=e.$watch("appt",function(e,i){e&&t.getProfileByID(e.patient,s)}),e.$on("$destroy",function(){o()})}}}]),appDirectives.directive("bookingModalDir",["$window","authService","bookingService",function(t,e,i){return{restrict:"E",scope:{office:"=",close:"="},templateUrl:"directives/booking_modal_template.html",link:function(t,e){function r(e,i){e?t.error=e:(t.success=!0,t.appts.push(i),t.apptsByOfficeAndTimestamp[i.office]=t.apptsByOfficeAndTimestamp[i.office]||{},t.apptsByOfficeAndTimestamp[i.office][i.date]=i)}function n(e,i){t.appts=i||[]}t.appts=[],t.apptsByOfficeAndTimestamp={},t.dateOffset=0,t.startDate=moment().startOf("week").add(1,"days"),t.error=null,t.success=null,t.reset=function(){t.appts=[],t.apptsByOfficeAndTimestamp={},t.dateOffset=0,t.startDate=moment().startOf("week").add(1,"days"),t.error=null,t.success=null},t.getUnix=function(e,i){return moment().startOf("week").add(1,"days").add(t.dateOffset+e,"days").hours(i).format("X");

},t.getDisplayDay=function(e){return moment().startOf("week").add(1,"days").add(t.dateOffset+e,"days").format("ddd")},t.getDisplayDate=function(e){return moment().startOf("week").add(1,"days").add(t.dateOffset+e,"days").format("MMM Do YYYY")},t.getDisplayTime=function(e,i){return moment().startOf("week").add(1,"days").add(t.dateOffset+e,"days").hours(i).format("LT")},t.getSlotClass=function(e,i){var r=t.apptsByOfficeAndTimestamp[t.office.id][t.getUnix(e,i)];return r&&r.status?r.status:""},t.selectSlot=function(e,n,s){t.error=null,t.success=null,i.sendApptRequest(t.getUnix(e,n),t.office,t.office.profile,t.procedure,r)},t.previous=function(){t.dateOffset>0&&(t.dateOffset-=7)},t.next=function(){t.dateOffset+=7},i.getPatientAppts(n);var s=null;s=t.$watch("appts",function(e,i){if(e&&e.length)for(var r=0;r<e.length;r++)t.apptsByOfficeAndTimestamp[e[r].office]=t.apptsByOfficeAndTimestamp[e[r].office]||{},t.apptsByOfficeAndTimestamp[e[r].office][e[r].date]=e[r]});var o=null;o=t.$watch("office",function(e,r){e&&(t.reset(),i.getPatientAppts(n))}),t.$on("$destroy",function(){o(),s()})}}}]),appDirectives.directive("comingSoonDir",["$parse",function(t){return{restrict:"E",templateUrl:"directives/coming_soon_template.html",link:function(e,i,r){{var n=t(r.fileModel);n.assign}}}}]),appDirectives.directive("cartDir",["authService","$state","$rootScope","$cookieStore","$cookies","$window","storeService","$timeout",function(t,e,i,r,n,s,o,a){return{restrict:"E",scope:{close:"="},templateUrl:"directives/cart_template.html",link:function(s,a){function d(t,e){s.products=o.productsByID,s.productsInCart.length>0&&s.updateTotal(),s.cartProductsLoading=!1}function c(t,e){s.productsInCart=e,o.productsReceived?d(null,o.products):o.getStoreFront(d)}s.products={},s.productsInCart=[],s.profileid=null,s.cartTotal=0,s.cartProductsLoading=!0,s.cartWatch=null,t.authorized&&(s.profileid=t.profileid),s.persistCartItems=function(){for(var e=[],i=[],r=0;r<s.productsInCart.length;r++)e[r]=s.productsInCart[r].productnumber,i[r]=s.productsInCart[r].quantity;o.updateCart(t.profileid,e,i)},s.removeItemFromCart=function(t){s.productsInCart.splice(t,1),s.updateTotal(),s.persistCartItems()},s.updateTotal=function(){s.cartTotal=0;for(var t=0;t<s.productsInCart.length;t++)s.cartTotal+=parseInt(s.products[s.productsInCart[t].productnumber].price)*parseInt(s.productsInCart[t].quantity);s.cartTotal=parseInt(s.cartTotal).toFixed(2)},s.updateTotalAndPersist=function(){s.cartTotal=0;for(var t=0;t<s.productsInCart.length;t++)s.cartTotal+=parseInt(s.products[s.productsInCart[t].productnumber].price)*parseInt(s.productsInCart[t].quantity);s.cartTotal=parseInt(s.cartTotal).toFixed(2),s.persistCartItems()},s.goToCheckout=function(){e.go("checkout"),i.$broadcast("cartviewchange",{displayCart:!1})},cartWatch=s.$watch(function(){return n.pInCart},function(t,e){t&&t!=e&&(s.productsInCart=r.get("pInCart"),s.updateTotal())}),o.getProductsInCart(t.profileid,c),s.$on("loggedout",function(){cartWatch(),r.put("pInCart",[])})}}}]),appDirectives.directive("errorDir",["$window","$log",function(t,e){return{restrict:"E",scope:{msg:"@",htmlMsg:"=",level:"="},templateUrl:"directives/error_template.html",link:function(t,e){}}}]),appDirectives.directive("fileModelDir",["$parse",function(t){return{restrict:"A",link:function(e,i,r){console.log("attrs",r);var n=t(r.fileModelDir);console.log("parse result",n);var s=n.assign;i.bind("change",function(){e.$apply(function(){s(e,i[0].files[0])})})}}}]),appDirectives.directive("footerDir",["authService","$state",function(t,e){return{restrict:"E",scope:{},templateUrl:"directives/footer_template.html",link:function(t,e){}}}]),appDirectives.directive("learnMoreModalDir",["$window","authService","emailService",function(t,e,i){return{restrict:"E",scope:{close:"="},templateUrl:"directives/learn_more_modal_template.html",link:function(t,e){t.submitted=!1,t.submitting=!1,t.submit=function(){if(!t.submitting){if(null==t.email)return void(t.error="Please provide an email address for us to contact.");t.submitting=!0,t.data={topic:"Learn More",subject:"Learn More Inquiry",orderid:"N/A",message:"This user submitted their email for more information, please reach out to them in a timely manner"},i.sendSupportRequest(t.email,t.data,function(e,i){e?t.error="Error submitting request, please try again.":t.submitted=!0,t.submitting=!1})}}}}}]),appDirectives.directive("mobileNavBarDir",["authService","$state","$location","$rootScope","$window","$cookieStore","$cookies","storeService",function(t,e,i,r,n,s,o,a){return{restrict:"E",scope:{},templateUrl:"directives/mobile_nav_bar_template.html",link:function(i,n){function s(t){t.forEach(function(t,e){void 0===i.productCategories[t.category]&&(i.productCategories[t.category]=0),i.productCategories[t.category]++,i.productNames.push(t.name)})}i.loggedIn=!1,i.name="",i.profileid=null,i.isAdmin=!1,i.isMerchant=!1,i.query=null,i.productsInCart=[],i.itemCount=0,i.cart={},i.productNames=[],i.productCategories={},i.goToPage=function(t){e.go(t)},i.logoutNow=function(){i.loggedIn=!1,e.go("logout")},i.openCart=function(){r.showCart(function(t){i.showCart=t})},i.search=function(t){e.go("search_results",{query:t})},i.handleLoaded=function(){t.authorized?(i.loggedIn=!0,i.name=t.profile.name,i.profileid=t.profile.id,i.isAdmin=t.isAdmin,i.isYLIFT=t.isYLIFT,i.isMerchant=t.isMerchant):(i.loggedIn=!1,i.name=null,i.isAdmin=!1,i.isMerchant=!1)},t.authorized?(i.loggedIn=!0,i.name=t.profile.name,i.profileid=t.profile.id,i.isAdmin=t.isAdmin,i.isYLIFT=t.isYLIFT,i.isMerchant=t.isMerchant):(i.loadedFun=null,i.loadedFun=r.$on("authorizationloaded",function(t,e){i.handleLoaded(),i.loadedFun()})),i.$on("productsloaded",function(t,e){s(e)});var a=i.$watch(function(){return o.pInCart},function(t,e){t&&(i.productsInCart=JSON.parse(t)),i.itemCount=i.productsInCart.length||0});i.$on("$destroy",function(){a()})}}}]),appDirectives.directive("nameDir",["profileService",function(t){return{restrict:"E",scope:{id:"=",format:"@"},templateUrl:"directives/name_template.html",link:function(e,i){e.name="",e.width&&e.height||(e.width=e.height=20),e.$watch("id",function(i,r){i&&t.getProfileByID(e.id,function(t,i){if("initials"==e.format)for(var r=i.name.split(" ",3),n=0;n<r.length;n++)e.name+=r[n].charAt(0);else e.name="first-name"==e.format?i.name.split(" ")[0]:i.name||i.email})})}}}]),appDirectives.directive("navBarDir",["authService","$state","$location","$rootScope","$window","$cookieStore","$cookies","storeService","profileService",function(t,e,i,r,n,s,o,a,d){return{restrict:"E",scope:{back:"=",close:"=",center:"="},templateUrl:"directives/nav_bar_template.html",link:function(n,s){function c(){n.loggedIn=!1,n.name="",n.profileid=null,n.isAdmin=!1,n.isMerchant=!1,n.isYLIFT=!1,n.query=null,n.productsInCart=[],n.productCategories={},n.itemCount=0,n.cart={},n.productNames=[]}function l(){d.getMerchantProfile(function(t,e){e&&e.name&&(n.merchantName=e.name,n.isMerchant=!0)})}function u(t,e){e.forEach(function(t,e){void 0===n.productCategories[t.category]&&(n.productCategories[t.category]=0),n.productCategories[t.category]++,n.productNames.push(t.name)})}c(),n.goToPage=function(t){e.go(t)},n.toTitleCase=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},n.isActive=function(t){return t===i.path()},n.logoutNow=function(){n.loggedIn=!1,c(),e.go("logout")},n.openCart=function(){r.$broadcast("cartviewchange",{displayCart:!0})},n.search=function(t){e.go("search_results",{query:t})},n.handleLoaded=function(){t.authorized?(n.loggedIn=!0,n.name=t.profile.name,n.profileid=t.profile.id,n.isAdmin=t.isAdmin,n.isYLIFT=t.isYLIFT,l()):(n.loggedIn=!1,n.name=null,n.isAdmin=!1)},n.checkProductsLoaded=function(t){return n.productNames.length>0?void t.stopPropagation():void a.getStoreFront(u)};var p=n.$watch(function(){return o.pInCart},function(t,e){t&&(n.productsInCart=JSON.parse(t)),n.itemCount=n.productsInCart.length||0});t.authorized?(n.loggedIn=!0,n.name=t.profile.name,n.profileid=t.profile.id,n.isYLIFT=t.isYLIFT,n.isAdmin=t.isAdmin,l()):(n.loadedFun=null,n.loadedFun=r.$on("authorizationloaded",function(t,e){n.handleLoaded(),n.loadedFun()})),n.$on("authorizationloaded",function(t,e){n.handleLoaded()}),n.$on("productsloaded",function(t,e){u(null,e)}),n.$on("merchantcreated",function(t,e){l()}),n.$on("$destroy",function(){p()})}}}]),appDirectives.directive("navLinksDir",["authService","$state","$rootScope",function(t,e,i){return{restrict:"E",scope:{},templateUrl:"directives/nav_links_template.html",link:function(e,i){e.handleLoaded=function(){t.authorized?(e.isAdmin=t.isAdmin,e.isYLIFT=t.isYLIFT):(e.isAdmin=!1,e.isYLIFT=!1)},e.$on("authorizationloaded",function(t,i){e.handleLoaded()})}}}]),appDirectives.directive("productCardDir",["$state","$rootScope","$window","storeService",function(t,e,i,r){return{restrict:"E",scope:{product:"="},templateUrl:"directives/product_card_template.html",link:function(t,e){t.defaultImage=function(t){t.img=t.remote_img?t.remote_img:"http://placehold.it/475x475&text=[img]"}}}}]),appDirectives.directive("productCartDir",["$state","$rootScope","$window","storeService","$timeout","merchantService",function(t,e,i,r,n,s){return{restrict:"E",scope:{product:"=",item:"=",ind:"=",edit:"=",remove:"="},templateUrl:"directives/product_cart_template.html",link:function(i,r){i.recentChange=!1,i.vendornames={},i.updateQuantity=function(t){i.item.quantity=t,i.$parent.updateTotalAndPersist()},i.addOne=function(){i.item.quantity++,i.$parent.updateTotalAndPersist(),i.recentChange=!0,n(function(){i.recentChange=!1},1e3)},i.minusOne=function(){i.item.quantity>0?(i.item.quantity--,i.recentChange=!0,n(function(){i.recentChange=!1},1e3)):i.remove(i.ind),i.$parent.updateTotalAndPersist()},i.goToProduct=function(){t.go("product",{productnumber:i.product.productnumber}),e.$broadcast("cartviewchange",{displayCart:!1})},s.getMerchantByID(i.product.attributes.vendor,function(t,e){t||(i.vendorname=e.name)})}}}]),appDirectives.directive("productImgDir",["$state","$rootScope","$window","storeService",function(t,e,i,r){return{restrict:"E",scope:{pn:"=",w:"=",h:"=",x:"=",click:"="},templateUrl:"directives/product_img_template.html",link:function(t,e){t.src=r.productsByID&&r.productsByID[t.pn]&&r.productsByID[t.pn].remote_img?r.productsByID[t.pn].remote_img:"/img/logo.png"}}}]),appDirectives.directive("productReviewDir",["$state",function(t){return{restrict:"E",scope:{review:"="},templateUrl:"directives/product_review_template.html",link:function(t,e){t.title=t.review.title,t.description=t.review.review,t.rating=t.review.rating,t.name=t.review.name}}}]),appDirectives.directive("promoDir",["$window","promoService",function(t,e){return{restrict:"E",scope:{total:"=",shipping:"=",domain:"@",error:"=",showLabel:"="},templateUrl:"directives/promo_template.html",link:function(t,i){function r(e,i){e?t.error=e:(t.code=i,"money_off"==i.type?t.total-=parseInt(i.value):"percent_off"==i.type?t.total-=t.total*parseFloat(i.value):"new_price"==i.type?t.total=i.value:"free_shipping"==i.type&&(t.shipping=0),t.total=parseFloat(t.total).toFixed(2),t.success=!0,t.error=null),t.validating=!1}t.validating=!1,t.success=!1,t.code=null,t.domain||$log.debug("no domain set in promo dir"),t.applyCode=function(){t.validating||(t.validating=!0,e.getPromoCode(t.code,t.domain,r))}}}}]),appDirectives.directive("suggestedProductDir",["$state","$rootScope","$window","storeService",function(t,e,i,r){return{restrict:"E",scope:{pn:"=",detailed:"="},templateUrl:"directives/suggested_product_template.html",link:function(e,i){e.name=null,e.price=null,e.p=r.productsByID[e.pn],e.goToProduct=function(){t.go("product",{productnumber:e.pn})},"yes"==e.detailed&&(e.name=p.name,e.price=p.price)}}}]),appDirectives.directive("zipSearchDir",["$state","$rootScope","$window","storeService",function(t,e,i,r){return{restrict:"E",replace:!0,scope:{onSubmit:"="},templateUrl:"directives/zip_search_template.html",link:function(t,e){e.bind("keydown keypress",function(e){13===e.which&&t.onSubmit(t.zip)})}}}]),trdServices.service("adminService",["$rootScope","$http","authService","merchantService","profileService","$cookieStore","$log",function(t,e,i,r,n,s,o){this.merchantProfilesByID={},this.profilesByID={},this.productsByProductnumber={},this.productsByVendor={},this.getProfileByID=function(t,i){if(void 0!==this.profilesByID[t])i(null,this.profilesByID[t]);else{var r=this;e({method:"GET",url:"/admin/profile/"+t}).success(function(t,e,n,s){i(null,t.profile),r.profilesByID[t.profile.id]=t.profile}).error(function(t,e,r,n){o.debug("error getting profile",t),i(t.message)})}},this.getAllProducts=function(t){var i=this;e({method:"GET",url:"/admin/all_products"}).success(function(e,r,n,s){t(null,e.products);for(var o=0;o<e.products.length;o++)i.productsByProductnumber[e.products[o].productnumber]=e.products[o],i.productsByVendor[e.products[o].attributes.vendor]=e.products[o]}).error(function(e,i,r,n){o.debug("error getting all products",e),t(e.message)})},this.getProduct=function(t,i){if(this.productsByProductnumber[t])i(this.productsByProductnumber[t]);else{var r=this;e({method:"GET",url:"/admin/product/"+t}).success(function(t,e,n,s){i(null,t.product),r.productsByProductnumber[t.product.productnumber]=t.product}).error(function(t,e,r,n){o.debug("error getting product",t),i(t.message)})}},this.getAllProfiles=function(t){var i=this;e({method:"GET",url:"/admin/all_profiles"}).success(function(e,r,n,s){t(null,e.profiles);for(var o=0;o<e.profiles.length;o++)i.profilesByID[e.profiles[o].id]=e.profiles[o]}).error(function(e,i,r,n){o.debug("error getting all profiles",e),t(e.message)})},this.getAddresses=function(t,i){e({method:"GET",url:"/admin/addresses/"+t}).success(function(t,e,r,n){i(null,t.addresses)}).error(function(t,e,r,n){o.debug("error getting addresses",t),i(t.message)})},this.addAddress=function(t,i){e({method:"POST",url:"/admin/add_address/",data:{address:t}}).success(function(t,e,r,n){i(null,t.address)}).error(function(t,e,r,n){o.debug("error adding address",t),i(t.message)})},this.updateAddress=function(t,i){e({method:"POST",url:"/admin/update_address/",data:{address:t}}).success(function(t,e,r,n){i&&i(null,t.address)}).error(function(t,e,r,n){o.debug("error updating address",t),i&&i(t.message)})},this.deleteAddress=function(t,i){e({method:"POST",url:"/admin/delete_address/",data:{address:t}}).success(function(t,e,r,n){i&&i(null,t.success)}).error(function(t,e,r,n){o.debug("error deleting address",t),i&&i(t.message)})},this.getAllMerchantProfiles=function(t){var i=this;e({method:"GET",url:"/admin/all_merchants"}).success(function(e,r,n,s){t(null,e.profiles);for(var o=0;o<e.profiles.length;o++)i.merchantProfilesByID[e.profiles[o].id]=e.profiles[o]}).error(function(e,i,r,n){o.debug("error getting all merchant profiles",e),t(e.message)})},this.getMerchantProfile=function(t,e){void 0!==this.merchantProfilesByID[t]?e(null,this.merchantProfilesByID[t]):r.getMerchantByID(t,e)},this.getAllYLIFTProfiles=function(t){e({method:"GET",url:"/admin/all_ylift_profiles"}).success(function(e,i,r,n){t(null,e.profiles)}).error(function(e,i,r,n){o.debug("error getting ylift profiles",e),t(e.message)})},this.getAllOrders=function(t){e({method:"GET",url:"/admin/all_orders"}).success(function(e,i,r,n){t(null,e.orders)}).error(function(e,i,r,n){o.debug("error getting orders",e),t(e.message)})},this.getAvailableRegKeys=function(t){e({method:"POST",url:"/admin/regkeys"}).success(function(e,i,r,n){t(null,e.keys)}).error(function(e,i,r,n){o.debug("error getting available keys",e),t(e.message)})},this.getHash=function(t,i){e({method:"POST",url:"/admin/hash",data:{profileid:t}}).success(function(t,e,r,n){i(null,t.hash)}).error(function(t,e,r,n){o.debug("error getting hash",t),i(t.message)})},this.addRegKey=function(t,i){e({method:"POST",url:"/admin/add_regkey",data:{regkey:t}}).success(function(t,e,r,n){i(null,t.regkey)}).error(function(t,e,r,n){o.debug("error adding key",t),i(t.message)})},this.addProduct=function(t,i){e({method:"POST",url:"/admin/add_product",data:{product:t}}).success(function(t,e,r,n){i(null,t.product)}).error(function(t,e,r,n){o.debug("error getting ylift profiles",t),i(t.message)})},this.updateMerchantProfile=function(t,i){var r=this;e({method:"POST",url:"/admin/profile/update_merchant",data:{profile:t}}).success(function(t,e,n,s){r.merchant=t.profile,i(null,t.profile)}).error(function(t,e,r,n){o.debug("error updating merchant profile",t),i(t.message)})},this.updateUserProfile=function(t,i){e({method:"POST",url:"/admin/update_user_profile",data:{profile:t}}).success(function(t,e,r,n){i&&i(null,t.profile)}).error(function(t,e,r,n){o.debug("error updating user profile",t),i&&i(t.message)})},this.addPromoCode=function(t,i){e({method:"POST",url:"/admin/add_promo",data:{promo:t}}).success(function(t,e,r,n){i(null,t.promo)}).error(function(t,e,r,n){o.debug("error adding promo",t),i(t.message)})},this.deletePromo=function(t,i){e({method:"POST",url:"/admin/delete_promo",data:{promo:t}}).success(function(t,e,r,n){i(null,t.success)}).error(function(t,e,r,n){o.debug("error deleting promo",t),i(t.message)})},this.getAllPromoCodes=function(t){e({method:"GET",url:"/admin/promos"}).success(function(e,i,r,n){t(null,e.promos)}).error(function(e,i,r,n){o.debug("error getting promo codes",e),t(e.message)})},this.addProduct=function(t,i,r){e({method:"POST",url:"/add_product",data:{product:t,merchant:i}}).success(function(t,e,i,n){r&&r(null,t)}).error(function(t,e,i,n){o.debug("error adding product",t),r&&r(t.message)})},this.checkEmailAvailability=function(t,i){e({method:"POST",url:"/admin/email_availability",data:{email:t}}).success(function(t,e,r,n){i(null,t)}).error(function(t,e,r,n){o.debug("error checking email availability",t),i(t.message)})}}]),trdServices.service("authService",["$rootScope","$http","$cookieStore","trdInterceptor","$log",function(t,e,i,r,n){this.authorizationReceived=!1,this.authorized=!1,this.clearAuthorization=function(){this.authorizationReceived=!1,this.authorized=!1,this.stripePubKey=null,this.userid=null,this.profile=null,this.profileid=null,this.isAdmin=null,this.isYLIFT=null},this.getAuthorization=function(i){if(r.getToken()){var n=this;e({method:"GET",url:"/authorized"}).success(function(e,r,s,o){e&&e.user&&e.profile?(n.email=e.profile.email,n.isAdmin=e.isAdmin,n.isYLIFT=e.isYLIFT,n.profile=e.profile,n.profileid=e.profile.id,n.authorizationReceived=!0,n.authorized=!0,n.loggedin=!0,t.$broadcast("authorizationloaded",n.authorized),i(n.authorized)):(n.authorizationReceived=!0,n.authorized=!1,t.$broadcast("authorizationloaded",n.authorized),i(n.authorized))}).error(function(e,r,s,o){n.authorizationReceived=!0,n.authorized=!1,t.$broadcast("authorizationloaded",n.authorized),i(n.authorized)})}else this.authorizationReceived=!0,this.authorized=!1,i(this.authorized),t.$broadcast("authorizationloaded",this.authorized)},this.loginWithToken=function(t,i){this.clearAuthorization();e({method:"GET",url:"/login?token="+t}).success(function(t,e,n,s){t.tkn?(r.setToken(t.tkn),i(null,t.message)):i(t.message||"FAILED TO LOGIN.")}).error(function(t,e,r,n){i("FAILED TO LOGIN")})},this.login=function(t,i,s){this.clearAuthorization();e({method:"POST",url:"/login",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:$.param({email:t,password:i})}).success(function(t,e,i,o){t.tkn?(r.setToken(t.tkn),s(null,"success!")):(n.debug("error login in",t),s(t.message,null))}).error(function(t,e,i,r){n.debug("error login in",t),s(t.message,null)})},this.register=function(t,i,s,o){this.clearAuthorization();e({method:"POST",url:"/register",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:$.param({email:t,password:i,metadata:o})}).success(function(t,e,i,n){t.tkn&&r.setToken(t.tkn),s(t.error,t.status)}).error(function(t,e,i,r){n.debug("error registering user",t),s(t.error,t.message)})},this.resendEmail=function(t,i){e({method:"POST",url:"/resend_email?email="+t}).success(function(t,e,r,n){i(t)}).error(function(t,e,r,n){i(t)})},this.requestPasswordReset=function(t,i){e({method:"GET",url:"/request_pass_reset/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(t,e,r,n){"success"==t?i(null,"Please check your email for instructions on resetting your password."):i(t,null)}).error(function(t,e,r,n){i(t,null)})},this.updatePassword=function(t,i,r){e({method:"POST",url:"/update_password",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:$.param({resettoken:t,password:i})}).success(function(t,e,i,n){t.success?r(null,"Password has been successfully updated."):r(t.message||"FAILED TO UPDATE PASSWORD.",null)}).error(function(t,e,i,n){r(t.error||"FAILED TO UPDATE PASSWORD",null)})},this.unsubscribe=function(t,i){e({method:"POST",url:"/unsubscribe",data:{email:t}}).success(function(t,e,r,n){t&&t.success?i(null,t.success):i(t.message||"FAILED TO UNSUBSCRIBE.")}).error(function(t,e,r,n){i("FAILED TO UNSUBSCRIBE")})},this.addUserYLIFT=function(t,i){e({method:"POST",url:"/user/give_ylift",data:{orderid:t}}).success(function(t,e,r,n){i(null)}).error(function(t,e,r,n){i("There was an error associating your order with a YLIFT account, please reach out to YLIFT support.")})},this.validateResetToken=function(t,i){e({method:"POST",url:"/validate_reset_token",data:{token:t}}).success(function(t,e,r,n){t.valid?i(!0):i(!1,"Your reset token has expired. Please return to the login page to request another.")}).error(function(t,e,r,n){i(!1,t)})}}]),trdServices.service("awsService",["$http","$log",function(t,e){this.getSignedRequest=function(i,r){t({method:"GET",url:"/sign_s3?file_name="+i.name+"&file_type="+i.type}).success(function(t,e,n,s){r(i,t.signed_request,t.url)}).error(function(t,i,n,s){e.debug("getting signed request failed:",t),r()})},this.getObject=function(i,r){t({method:"POST",url:"/get_object",data:{file_name:i}}).success(function(t,e,i,n){r(null,t.success)}).error(function(t,i,n,s){e.debug("getting object failed:",t),r(!0)})},this.uploadFile=function(t,e,i,r){var n=new XMLHttpRequest;n.open("PUT",e),n.setRequestHeader("x-amz-acl","public-read"),n.onload=function(){r(i)},n.onerror=function(){alert("Could not upload file.")},n.send(t)}}]),trdServices.service("bookingService",["$rootScope","$http","$cookieStore","$log","authService",function(t,e,i,r,n){this.patientAppts=[],this.apptsByProvider={},this.sendApptRequest=function(t,i,s,o,a){if(!n.profileid)return void a("Please login to request an appointment");e({method:"POST",url:"/booking/request_appt/"+s,data:{office:i,patient:n.profile,date:t,procedure:o}}).success(function(t,e,i,r){a(null,t.appt)}).error(function(t,e,i,n){r.debug("error adding appointment request",t),a(t.message)})},this.updateApptRequest=function(t,i,n){e({method:"POST",url:"/booking/update_appt",data:{appt:t,patient:i}}).success(function(t,e,i,r){n&&n(null,t.appt)}).error(function(t,e,i,s){r.debug("error adding appointment request",t),n&&n(t.message)})},this.getPatientAppts=function(t){if(!n.profileid)return void t("Please login to request an appointment");e({method:"GET",url:"/booking/patient_appts/"+n.profileid}).success(function(e,i,r,n){t(null,e.appts)}).error(function(e,i,n,s){r.debug("error fetching patient appointments",e),t(e.message)})},this.getProviderAppts=function(t,i,n,s,o){e({method:"POST",url:"/booking/provider_appts/"+s,data:{start:t,end:i,office:n}}).success(function(t,e,i,r){o(null,t.appts)}).error(function(t,e,i,n){r.debug("error fetching provider appointments",t),o(t.message)})}}]),trdServices.service("cartService",["$rootScope","$http","$cookieStore",function(t,e,i){}]),trdServices.service("emailService",["$http","$log",function(t,e){this.sendSupportRequest=function(i,r,n){t({method:"POST",url:"/email_support",data:{email:i,props:r}}).success(function(t,e,i,r){n(null,t.result)}).error(function(t,i,r,s){e.debug("error sending support request",t),n(t.message)})},this.changeUserEmail=function(i,r,n){t({method:"POST",url:"/change_email",data:{oldemail:i,newemail:r}}).success(function(t,e,i,r){n&&n(null)}).error(function(t,i,r,s){e.debug("error sending email",t),n&&n(t.message)})}}]),trdServices.service("locationService",["$rootScope","$http","$cookieStore","$q","authService","$log",function(t,e,i,r,n,s){this.locationsRetrieved=!1,this.locations=[],this.locationsByDoctor={},this.locationsByProfile={},this.addressToLatLong=function(t){var e=r.defer(),i=new google.maps.Geocoder,n=t.address1+", "+t.city+", "+t.state+" "+t.zip;return i.geocode({address:n},function(i,r){r==google.maps.GeocoderStatus.OK&&i.length>0?(t.location=i[0].geometry.location,t.formattedaddress=i[0].formatted_address,e.resolve(t)):e.reject(new Error("bad address"))}),e.promise},this.getYLiftLocations=function(t){if(this.locationsRetrieved)return void t(this.locations);var i=this;e({method:"GET",url:"/ylift_locations"}).success(function(e,n,o,a){var d=[];e.locations.forEach(function(t,e){var n=r.defer();i.addressToLatLong(t).then(function(t){n.resolve(t)},function(t){n.resolve(null)}),d.push(n.promise)}),r.all(d).then(function(e){var r=e.filter(function(t){return null!=t});i.locationsRetrieved=!0,i.locations=r;for(var n=0;n<r.length;n++)i.locationsByDoctor[r[n].profileid]=r[n];t(null,i.locations)},function(e){s.debug("error retrieving y lift locations",e),t("There was an error retrieving Y Lift Network locations")})}).error(function(e,i,r,n){t(e.message)})},this.getProfileAddresses=function(t){return n.profileid?void 0!==this.locationsByProfile[n.profileid]?void t(null,this.locationsByProfile[n.profileid]):(inThis=this,void e({method:"GET",url:"/profile/addresses/"+n.profileid}).success(function(e,i,r,s){inThis.locationsByProfile[n.profileid]=e.addresses,t(null,e.addresses)}).error(function(e,i,r,n){s.debug("error getting addresses",e),t(e.message)})):void t("Not authorized")},this.addAddressToProfile=function(t,i){if(!n.profileid)return void i("Not authorized");var r=this;e({method:"POST",url:"/profile/add_address/"+n.profileid,data:{address:t}}).success(function(t,e,s,o){r.locationsByProfile[n.profileid]=r.locationsByProfile[n.profileid]||[],r.locationsByProfile[n.profileid].push(t.address),i&&i(null,t.address)}).error(function(t,e,r,n){s.debug("error adding address",t),i&&i(t.message)})},this.updateAddress=function(t,i){if(!n.profileid)return void i("Not authorized");var r=this;e({method:"POST",url:"/profile/update_address/"+n.profileid,data:{address:t}}).success(function(t,e,s,o){for(var a=0;a<r.locationsByProfile[n.profileid].length;a++)r.locationsByProfile[n.profileid][a].id==t.address.id&&(r.locationsByProfile[n.profileid][a]=t.address);i&&i(null,t.address)}).error(function(t,e,r,n){s.debug("error updating address",t),i&&i(t.message)})},this.removeAddress=function(t,i){if(!n.profileid)return void i("Not authorized");var r=this;e({method:"POST",url:"/profile/remove_address/"+n.profileid,data:{address:t}}).success(function(e,s,o,a){for(var d=0;d<r.locationsByProfile[n.profileid].length;d++)r.locationsByProfile[n.profileid][d].id==t.id&&r.locationsByProfile[n.profileid].splice(d,1);i&&i(null,e.success)}).error(function(t,e,r,n){s.debug("error removing address",t),i&&i(t.message)})}}]),trdServices.service("merchantService",["$http",function(t){this.merchants=[],this.getMerchantByID=function(e,i){this.merchants[e]&&i(null,this.merchants[e]);var r=this;t({method:"POST",url:"/get_merchant_name",data:{id:e}}).success(function(t,e,n,s){r.merchants[t.merchant.id]=t.merchant,i(null,t.merchant)}).error(function(t,e,r,n){i("Merchant not found")})},this.getMerchantName=function(t,e){this.merchants[t]?e(this.merchants[t].name):this.getMerchantByID(t,function(t){e(t.name?t.name:"No merchant found")})}}]),trdServices.service("productService",["$rootScope","$http","$cookieStore","stripeService","profileService","authService","$log",function(t,e,i,r,n,s,o){this.initService=function(){this.mostViewedByProfile={},this.reviewsByProduct={},this.merchantByProduct={}},this.initService(),this.submitReview=function(t,i,r){i.productnumber=t,e({method:"POST",url:"/submit_review",data:{review:i}}).success(function(t,e,i,n){r&&r(null,{message:"success!"})}).error(function(t,e,i,n){o.debug("error submitting review",t),r&&r(t.message)})},this.getRating=function(t,i){e({method:"GET",url:"/product_rating/"+t}).success(function(t,e,r,n){i(null,t.data)}).error(function(t,e,r,n){o.debug("error getting rating",t),i(t.message)})},this.getReviews=function(t,i){if(void 0!==this.reviewsByProduct[t])return void i(null,this.reviewsByProduct[t]);var r=this;e({method:"GET",url:"/product_reviews/"+t}).success(function(e,n,s,o){r.reviewsByProduct[t]=e.data,i(null,e.data)}).error(function(t,e,r,n){o.debug("error getting reviews",t),i(t.message)})},this.getMerchant=function(t,i){if(void 0!==this.merchantByProduct[t])return void i(null,this.merchantByProduct[t]);var r=this;e({method:"GET",url:"/product_merchant/"+t}).success(function(e,n,s,o){r.merchantByProduct[t]=e.merchant,i(null,e.merchant)}).error(function(t,e,r,n){o.debug("error getting merchant",t),i(t.message)})},this.addPageView=function(t,i){e({method:"POST",url:"/product_page_view/"+t+"?profile="+s.profileid}).success(function(t,e,r,n){i&&i(null,t)}).error(function(t,e,r,n){o.debug("error adding page view",t),i&&i(t.message)})},this.addProduct=function(t,i){return n.merchant?void e({method:"POST",url:"/add_product",data:{product:t,merchant:n.merchant}}).success(function(t,e,r,n){i&&i(null,t)}).error(function(t,e,r,n){o.debug("error adding product",t),i&&i(t.message)}):void i("Merchant not authorized to add product")},this.updateProduct=function(t,i){e({method:"POST",url:"/update_product",data:{product:t}}).success(function(t,e,r,n){i&&i(t)}).error(function(t,e,r,n){o.debug("error updating product",t),i&&i(t.message)})}}]),trdServices.service("profileService",["$rootScope","$http","$cookieStore","authService","$log",function(t,e,i,r,n){this.adminOf={},this.profilesByID={},this.updateProfile=function(t,i){e({method:"POST",url:"/profile/update/"+t.id,data:{profile:t}}).success(function(t,e,r,n){i&&i(null,t)}).error(function(t,e,r,s){n.debug("error updating profile",t),i&&i(t.message)})},this.getProfileByID=function(t,i){if(void 0!==this.profilesByID[t])return void i(this.profilesByID[t]);e({method:"GET",url:"/profile/"+t}).success(function(t,e,r,n){i(null,t.profile)}).error(function(t,e,r,s){n.debug("error getting profile",t),i(t.message)})},this.getMerchantProfile=function(t){if(void 0!==this.merchant)return void t(null,this.merchant);var i=this;e({method:"GET",url:"/profile/get_merchant/"+r.profile.id}).success(function(e,r,n,s){e.profile&&e.admin&&(i.adminOf[e.profile.id]=!0),i.merchant=e.profile,t(null,e.profile)}).error(function(e,i,r,s){n.debug("error getting merchant profile",e),t(e.message)})},this.addMerchantProfile=function(t,i,s,o){var a=this;e({method:"POST",url:"/profile/add_merchant/"+r.profile.id,data:{name:t,category:i,regkey:s}}).success(function(t,e,i,r){a.merchant=t,a.adminOf[t.id]=!0,o(null,t)}).error(function(t,e,i,r){n.debug("error adding merchant profile",t),o(t.message)})},this.updateMerchantProfile=function(t,i){var r=this;e({method:"POST",url:"/profile/update_merchant",data:{profile:t}}).success(function(t,e,n,s){t.profile&&t.admin&&(r.adminOf[t.profile.id]=!0),r.merchant=t.profile,i(null,t.profile)}).error(function(t,e,r,s){n.debug("error updating merchant profile",t),i(t.message)})},this.deleteMerchantProfile=function(t){var i=this;e({method:"POST",url:"/profile/delete_merchant/"+r.profile.id,data:{merchantid:this.merchant.id}}).success(function(e,r,n,s){return"unauthorized"==e.result?void t("You are not authorized to remove this account"):(i.adminOf[i.merchant.id]=!1,i.merchant=null,void t(null,null))}).error(function(e,i,r,s){n.debug("error deleting profile",e),t(e.message)})},this.isAdminOfMerchant=function(t){return this.adminOf[t]},t.$on("loggedout",function(t,e){this.adminOf={}})}]),trdServices.service("promoService",["$http","$log","$rootScope",function(t,e,i){
this.initService=function(){this.currentPromo=null},this.getPromoCode=function(i,r,n){inThis=this,t({method:"POST",url:"/promo/"+i,data:{domain:r}}).success(function(t,e,i,r){inThis.currentPromo=t.key,n(null,t.key)}).error(function(t,i,r,s){e.debug("error getting promo code",t),inThis.currentPromo=null,n(t.message)})},this.initService(),i.$on("loggedout",function(t,e){this.initService})}]),trdServices.service("registrationService",["$rootScope","$http",function(t,e){this.verifyKey=function(t,i){e({method:"POST",url:"/verify_key",data:{key:t}}).success(function(t,e,r,n){i(t.status,t.merchant)}).error(function(t,e,r,n){console.log("error validating key",t),i(t.status)})}}]),trdServices.service("storeService",["$rootScope","$http","$cookieStore","stripeService","$log","authService",function(t,e,i,r,n,s){this.initService=function(){this.productsReceived=!1,this.cartReceived=!1,this.ordersReceived=!1,this.productsInCart=[],this.products=[],this.productsByID={},this.relatedProductsByID={},this.productsByCategory={},this.productsByMerchant={},this.orders=[],this.ordersByID={},this.cart={}},this.initService(),this.getProductMerchant=function(t,e){return this.productsByID[t].attributes.vendor},this.getStoreFront=function(t,i){if(this.productsReceived&&!i)return void t(null,this.products);var r=this;e({method:"POST",url:"/store",data:{ylift:s.isYLIFT}}).success(function(e,i,n,s){r.products=[],r.productsByID={},r.productsByCategory={};for(var o=0;o<e.products.length;o++)r.productsByID[e.products[o].productnumber]=e.products[o],r.products.push(e.products[o]),r.productsByCategory[e.products[o].category]?r.productsByCategory[e.products[o].category].push(e.products[o]):(r.productsByCategory[e.products[o].category]=[],r.productsByCategory[e.products[o].category].push(e.products[o]));r.productsReceived=!0,t(null,r.products)}).error(function(e,i,s,o){n.debug("there was an error getting all products",e),r.productsReceived=!1,t(e.message)})},this.getProductByID=function(t,i){if(void 0!==this.productsByID[t])return void i(null,this.productsByID[t]);var r=this;e({method:"GET",url:"/get_product_by_id/"+t}).success(function(e,n,s,o){r.productsByID[t]=e.product,i(null,e.product)}).error(function(t,e,r,s){n.debug("there was an error getting product by id",t),i(t.message)})},this.getProductsByIDs=function(t,i){Array.isArray(t)||(t=[t]);var r={},s=[];if(t.forEach(function(t,e){void 0!==this.productsByID[t]?r[t]=this.productsByID[t]:s.push(t)}),0==s.length)i(null,r);else{var o=this;e({method:"POST",url:"/get_products_by_ids",data:{productIDs:s}}).success(function(t,e,n,s){t.products.forEach(function(t,e){o.productsByID[t.productnumber]=t,r[t.productnumber]=t}),i(null,r)}).error(function(t,e,r,s){n.debug("there was an error getting products by ids",t),i(t.message)})}},this.getRelatedProducts=function(t,i){if(void 0!==this.relatedProductsByID[t])return void i(null,this.relatedProductsByID[t]);var r=this;e({method:"GET",url:"/get_related_products/"+t}).success(function(e,n,s,o){r.relatedProductsByID[t]=e.products,i(null,e.products)}).error(function(t,e,r,s){n.debug("there was an error getting related products",t),i(t.message)})},this.getProductsByCategory=function(t,i){if(this.productsReceived)i(null,this.productsByCategory[t]);else{var r=this;e({method:"POST",url:"/get_products_by_category",data:{category:t}}).success(function(e,n,s,o){r.productsByCategory[t]=e.products,i(null,e.products)}).error(function(t,e,r,s){n.debug("there was an error getting products by category",t),i(t.message)})}},this.getProductsByMerchant=function(t,i){if(void 0!==this.productsByMerchant[t])i(null,this.productsByMerchant[t]);else{var r=this;e({method:"GET",url:"/get_products_by_merchant/"+t}).success(function(e,n,s,o){r.productsByMerchant[t]=e.products,i(null,e.products)}).error(function(t,e,r,s){n.debug("there was an error getting products by merchant",t),i(t.message)})}},this.addItemToCart=function(t,r,s,o){if(t){var a=this;a.cartReceived=!1,e({method:"POST",url:"/add_item_to_cart",data:{profileid:t,productnumber:r,quantity:s}}).success(function(t,e,i,r){a.cartReceived=!0,a.cart=t.cart,a.updateProductsInCartCookie(a.cart.products),o(null,t.cart)}).error(function(t,e,i,r){a.cartReceived=!1,n.debug("there was an error adding item to cart",t),o(t.message)})}else{for(var d=i.get("pInCart")||[],c={productnumber:r,quantity:s},l=!1,u=0;u<d.length;u++)if(d[u].productnumber==c.productnumber){var l=!0;d[u].quantity=parseInt(d[u].quantity)+parseInt(c.quantity)}l||d.push(c),console.log("guest cart",d,c),this.updateProductsInCartCookie(d),o(null,null)}},this.updateCart=function(t,i,r,s){if(t){var o=this;o.cartReceived=!1,e({method:"POST",url:"/update_cart",data:{profileid:t,productnumbers:i,quantities:r}}).success(function(t,e,i,r){o.cartReceived=!0,o.cart=t.cart,o.updateProductsInCartCookie(o.cart.products),s&&s(null,t.cart)}).error(function(t,e,i,r){o.cartReceived=!1,n.debug("there was an error updating cart",t),s&&s(t.message)})}else{var a=[];i.forEach(function(t,e){var i={productnumber:t,quantity:r[e]};a.push(i)}),this.updateProductsInCartCookie(a),s&&s(null,null)}},this.emptyCart=function(t,i){if(t){var r=this;r.cartReceived=!1,e({method:"POST",url:"/empty_cart",data:{profileid:t}}).success(function(t,e,n,s){r.cartReceived=!0,r.cart=t.cart,r.updateProductsInCartCookie(r.cart.products),i(null,t.cart)}).error(function(t,e,s,o){n.debug("there was an error emptying the cart",t),r.cartReceived=!1,i(t.message)})}else this.updateProductsInCartCookie(),i(null,null)},this.getProductsInCart=function(r,s){if(r){var o=this;e({method:"GET",url:"/cart/"+r}).success(function(e,i,r,n){o.cartReceived=!0,o.cart=e.cart,o.updateProductsInCartCookie(o.cart.products),s(null,e.cart.products),t.$broadcast("cartloaded",o.cart)}).error(function(t,e,i,r){n.debug("there was an error getting products in user cart",t),o.cartReceived=!1,s(t.message)})}else s(null,i.get("pInCart")||[])},this.getOrderByID=function(t,i){if("undefined"!=typeof this.ordersByID[t])return void i(null,this.ordersByID[t]);var r=this;e({method:"GET",url:"/order/"+t}).success(function(e,n,s,o){r.ordersByID[t]=e.order,i(null,e.order)}).error(function(t,e,r,s){n.debug("there was an error getting order by id",t),i(t.message)})},this.getOrdersByUserID=function(t,i){if(this.ordersReceived)return void i(null,this.orders);var r=this;e({method:"GET",url:"/all_orders/"+t}).success(function(t,e,n,s){for(var o=0;o<t.orders.length;o++)r.ordersByID[t.orders[o].id]=t.orders[o];r.orders=t.orders,r.ordersReceived=!0,i(null,r.orders)}).error(function(t,e,r,s){n.debug("there was an error getting orders by user",t),i(t.message)})},this.getMerchantOrders=function(t,i){var r=this;e({method:"GET",url:"/merchant_orders/"+t}).success(function(t,e,n,s){for(var o=0;o<t.orders.length;o++)r.ordersByID[t.orders[o].id]=t.orders[o];i(null,t.orders)}).error(function(t,e,r,s){n.debug("there was an error getting merchant orders",t),i(t.message)})},this.updateOrder=function(t,i){var r=this;e({method:"POST",url:"/update_order",data:{order:t}}).success(function(t,e,n,s){r.ordersByID[t.order.id]=t.order,i&&i(null,t.order)}).error(function(t,e,r,s){n.debug("there was an error updating the order",t),i&&i(t.message)})},this.getFilteredProducts=function(t,e){var i=[];this.products.forEach(function(e,r){(e.name.toLowerCase().indexOf(t)>-1||e.description.toLowerCase().indexOf(t)>-1||e.category.toLowerCase()==t)&&i.push(e)}),e(i)},this.updateProductsInCartCookie=function(t){i.put("pInCart",t||[])},this.submitCheckOrder=function(t,i,r){e({method:"POST",url:"/add_check_order",data:{total:i,customer:t}}).success(function(t,e,i,n){r(null,{id:t.order.id})}).error(function(t,e,i,s){n.debug("there was an error submitting the check order",t),r(t.message)})},t.$on("loggedout",function(t,e){this.initService})}]),trdServices.service("stripeService",["$rootScope","$http","$cookieStore","authService","PUBLISH","$log","promoService",function(t,e,i,r,n,s,o){Stripe.setPublishableKey(n),this.initService=function(){this.token=null,this.card=null,this.customer={},this.customerReceived=!1},this.initService(),this.setToken=function(t){this.token=t},this.setCard=function(t){this.card=t},this.setCustomer=function(t){this.customer=t},this.getToken=function(){return this.token},this.getCard=function(){return this.card},this.addCard=function(t,i,n,o){var a=this;Stripe.card.createToken({number:t.number,cvc:t.cvc,exp_month:t.exp_month,exp_year:t.exp_year,name:i.name,address_line1:i.address_line1,address_line2:i.address_line2,address_city:i.address_city,address_state:i.address_state,address_zip:i.address_zip,metadata:o},function(t,i){t.error?n(t.error):r.authorized?r.profile.customerid?e({method:"POST",url:"/add_token_to_customer/"+r.profile.id+"/"+r.profile.customerid,data:{token:i.id}}).success(function(t,e,i,r){a.customerReceived=!0,a.customer=t.customer,n(a.customer)}).error(function(t,e,i,r){s.debug("error adding token to customer",t),n(null,t.message)}):e({method:"POST",url:"/add_customer/"+r.profile.id,data:{card:i.id,email:r.profile.email}}).success(function(t,e,i,r){a.customerReceived=!0,a.customer=t.customer,a.card=t.customer.default_source,n(a.customer)}).error(function(t,e,i,r){s.debug("error adding card",t),n(null,t.message)}):a.addGuestCustomer(i,n)})},this.removeCard=function(t,i){var n=this;e({method:"POST",url:"/remove_card_from_customer/"+r.profile.id+"/"+n.customer.id,data:{cardid:t}}).success(function(t,e,r,s){n.customerReceived=!0,n.customer=t.customer,i(n.customer)}).error(function(t,e,r,n){i(null,t.err)})},this.getCustomer=function(t,i){if(this.customerReceived)return void i(this.customer);var r=this;e({method:"GET",url:"/get_customer/"+t}).success(function(t,e,n,s){r.customerReceived=!0,r.customer=t.customer,i(t.customer)}).error(function(t,e,n,s){r.customerReceived=!1,i()})},this.addCustomer=function(t,i){var n=this;e({method:"POST",url:"/add_customer/"+r.profile.id,data:{card:t,email:r.profile.email}}).success(function(t,e,r,s){n.customerReceived=!0,n.customer=t.customer,i(t.customer)}).error(function(t,e,r,n){console.log("error adding customer",t.err),i(mull,t.message)})},this.addGuestCustomer=function(t,i){var r=this;e({method:"POST",url:"/add_guest_customer",data:{card:t}}).success(function(t,e,n,s){r.customerReceived=!0,r.customer=t.customer,r.card=t.customer.default_source,i(t.customer)}).error(function(t,e,r,n){i(null,t.message)})},this.updateCustomer=function(t,i){Stripe.customers.update(this.customer.id,t,function(t,n){return t?void i():void e({method:"POST",url:"/update_customer/"+r.profile.id,data:{customer:n}}).success(function(t,e,r,n){internalThis.customerReceived=!0,internalThis.customer=t.customer,i(t.customer)}).error(function(t,e,r,n){i()})})},this.updateGuestCustomer=function(t,i){var r=this;e({method:"POST",url:"/update_guest_customer",data:{customerid:r.customer.id,props:t}}).success(function(t,e,n,s){r.customerReceived=!0,r.customer=t.customer,i(t.customer)}).error(function(t,e,r,n){i(null,t.message)})},this.submitOrder=function(t,i,n,s,a,d){if(this.card){var c=this;e({method:"POST",url:"/process_transaction?profile="+(r.profileid||""),data:{card:c.card,customer:c.customer,addressShipTo:t,productsInCart:i,total:a,shipping:s,merchants:n,promo:o.currentPromo}}).success(function(t,e,i,r){d(null,{id:t.order.id,success:t.success})}).error(function(t,e,i,r){d(t.message||"There was an error processing your order, please try again. If this issue persists, please contact YLift Support (support@ylift.io).")})}else d("Invalid credit card info, please check that the information provided is correct and try again.",null)},t.$on("loggedout",function(t,e){this.initService})}]),trdServices.service("testimonialService",["$rootScope","$http","$cookieStore","profileService",function(t,e,i,r){this.getAllTestimonials=function(t){e({method:"GET",url:"/get_all_testimonials"}).success(function(e,i,r,n){t(!0,e.testimonials)}).error(function(e,i,r,n){t(!1,e.error)})}}]),trdServices.service("trainingService",["$rootScope","$http","$cookieStore","authService",function(t,e,i,r){this.trainingsByProfile={},this.getAvailableDates=function(t){e({method:"GET",url:"/training_dates"}).success(function(e,i,r,n){t(e)}).error(function(e,i,r,n){$log.debug("getting training dates failed:",e),t()})},this.getTrainingsByProfileID=function(t){var i=this;e({method:"GET",url:"/training_dates/"+r.profileid}).success(function(e,n,s,o){i.trainingsByProfile[r.profileid]=e.dates,t(null,e.dates)}).error(function(e,i,r,n){$log.debug("getting profile training dates failed:",e),t(e.message)})}}]),!function(t){"use strict";var e=window.angulartics||(window.angulartics={});e.waitForVendorCount=0,e.waitForVendorApi=function(t,i,r,n,s){s||e.waitForVendorCount++,n||(n=r,r=void 0),!Object.prototype.hasOwnProperty.call(window,t)||void 0!==r&&void 0===window[t][r]?setTimeout(function(){e.waitForVendorApi(t,i,r,n,!0)},i):(e.waitForVendorCount--,n(window[t]))},t.module("angulartics",[]).provider("$analytics",function(){var i={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},r=["pageTrack","eventTrack","setAlias","setUsername","setAlias","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],n={},s={},o=function(t){return function(){e.waitForVendorCount&&(n[t]||(n[t]=[]),n[t].push(arguments))}},a=function(e,i){return s[e]||(s[e]=[]),s[e].push(i),function(){var i=arguments;t.forEach(s[e],function(t){t.apply(this,i)},this)}},d={settings:i},c=function(t,e){e?setTimeout(t,e):t()},l={$get:function(){return d},api:d,settings:i,virtualPageviews:function(t){this.settings.pageTracking.autoTrackVirtualPages=t},firstPageview:function(t){this.settings.pageTracking.autoTrackFirstPage=t},withBase:function(e){this.settings.pageTracking.basePath=e?t.element("base").attr("href").slice(0,-1):""},withAutoBase:function(t){this.settings.pageTracking.autoBasePath=t},developerMode:function(t){this.settings.developerMode=t}},u=function(e,r){d[e]=a(e,r);var s=i[e],o=s?s.bufferFlushDelay:null,l=null!==o?o:i.bufferFlushDelay;t.forEach(n[e],function(t,e){c(function(){r.apply(this,t)},e*l)})},p=function(t){return t.replace(/^./,function(t){return t.toUpperCase()})},f=function(t){var e="register"+p(t);l[e]=function(e){u(t,e)},d[t]=a(t,o(t))};return t.forEach(r,f),l}).run(["$rootScope","$window","$analytics","$injector",function(e,i,r,n){r.settings.pageTracking.autoTrackFirstPage&&n.invoke(["$location",function(t){var e=!0;if(n.has("$route")){var s=n.get("$route");for(var o in s.routes){e=!1;break}}else if(n.has("$state")){var a=n.get("$state");for(var d in a.get()){e=!1;break}}if(e)if(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname),r.settings.pageTracking.trackRelativePath){var c=r.settings.pageTracking.basePath+t.url();r.pageTrack(c,t)}else r.pageTrack(t.absUrl(),t)}]),r.settings.pageTracking.autoTrackVirtualPages&&n.invoke(["$location",function(t){r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname+"#"),n.has("$route")&&e.$on("$routeChangeSuccess",function(e,i){if(!i||!(i.$$route||i).redirectTo){var n=r.settings.pageTracking.basePath+t.url();r.pageTrack(n,t)}}),n.has("$state")&&e.$on("$stateChangeSuccess",function(){var e=r.settings.pageTracking.basePath+t.url();r.pageTrack(e,t)})}]),r.settings.developerMode&&t.forEach(r,function(t,e){"function"==typeof t&&(r[e]=function(){})})}]).directive("analyticsOn",["$analytics",function(e){function i(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}function r(t){return i(t),"click"}function n(t){return i(t)?t.innerText||t.value:t.id||t.name||t.tagName}function s(t){return"analytics"===t.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(t.substr(9))}function o(t){var e=t.slice(9);return"undefined"!=typeof e&&null!==e&&e.length>0?e.substring(0,1).toLowerCase()+e.substring(1):e}return{restrict:"A",link:function(i,a,d){var c=d.analyticsOn||r(a[0]),l={};t.forEach(d.$attr,function(t,e){s(e)&&(l[o(e)]=d[e],d.$observe(e,function(t){l[o(e)]=t}))}),t.element(a[0]).bind(c,function(r){var s=d.analyticsEvent||n(a[0]);l.eventType=r.type,(!d.analyticsIf||i.$eval(d.analyticsIf))&&(d.analyticsProperties&&t.extend(l,i.$eval(d.analyticsProperties)),e.eventTrack(s,l))})}}}])}(angular),!function(t){"use strict";t.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function(e){e.settings.trackRelativePath=!0,e.settings.ga={additionalAccountNames:void 0,userId:null},e.registerPageTrack(function(i){window._gaq&&_gaq.push(["_trackPageview",i]),window.ga&&(e.settings.ga.userId&&ga("set","&uid",e.settings.ga.userId),ga("send","pageview",i),t.forEach(e.settings.ga.additionalAccountNames,function(t){ga(t+".send","pageview",i)}))}),e.registerEventTrack(function(i,r){if(r&&r.category||(r=r||{},r.category="Event"),r.value){var n=parseInt(r.value,10);r.value=isNaN(n)?0:n}if(window.ga){for(var s={eventCategory:r.category,eventAction:i,eventLabel:r.label,eventValue:r.value,nonInteraction:r.noninteraction,page:r.page||window.location.hash.substring(1),userId:e.settings.ga.userId},o=1;20>=o;o++)r["dimension"+o.toString()]&&(s["dimension"+o.toString()]=r["dimension"+o.toString()]),r["metric"+o.toString()]&&(s["metric"+o.toString()]=r["metric"+o.toString()]);ga("send","event",s),t.forEach(e.settings.ga.additionalAccountNames,function(t){ga(t+".send","event",s)})}else window._gaq&&_gaq.push(["_trackEvent",r.category,i,r.label,r.value,r.noninteraction])}),e.registerSetUsername(function(t){e.settings.ga.userId=t})}])}(angular),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports["angular-file-upload"]=e():t["angular-file-upload"]=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},n=r(i(2)),s=r(i(3)),o=r(i(4)),a=r(i(5)),d=r(i(6)),c=r(i(7)),l=r(i(1)),u=r(i(8)),p=r(i(9)),f=r(i(10)),h=r(i(11)),m=r(i(12));angular.module(n.name,[]).value("fileUploaderOptions",s).factory("FileUploader",o).factory("FileLikeObject",a).factory("FileItem",d).factory("FileDirective",c).factory("FileSelect",l).factory("FileDrop",u).factory("FileOver",p).directive("nvFileSelect",f).directive("nvFileDrop",h).directive("nvFileOver",m).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver",function(t,e,i,r,n,s,o){t.FileLikeObject=e,t.FileItem=i,t.FileDirective=r,t.FileSelect=n,t.FileDrop=s,t.FileOver=o}])},function(t,e,i){"use strict";function r(t){var e=function(t){function e(t){d(this,e),this.events={$destroy:"destroy",change:"onChange"},this.prop="select",o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}return a(e,t),s(e,{getOptions:{value:function(){}},getFilters:{value:function(){}},isEmptyAfterSelection:{value:function(){return!!this.element.attr("multiple")}},onChange:{value:function(){var t=this.uploader.isHTML5?this.element[0].files:this.element[0],e=this.getOptions(),i=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(t,e,i),this.isEmptyAfterSelection()&&this.element.prop("value",null)}}}),e}(t);return e}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function c(t,e,i){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:c(n,e,i)}if("value"in r&&r.writable)return r.value;var s=r.get;return void 0===s?void 0:s.call(i)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r,n(i(2)),r.$inject=["FileDirective"]},function(t,e){t.exports={name:"angularFileUpload"}},function(t,e){"use strict";t.exports={url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}},function(t,e,i){"use strict";function r(t,e,i,r,n,m){var g=r.File,v=r.FormData,_=function(){function r(e){o(this,r);var i=a(t);d(this,i,e,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return s(r,{addToQueue:{value:function(t,e,i){var r=this.isArrayLikeObject(t)?t:[t],s=this._getFilters(i),o=this.queue.length,a=[];c(r,function(t){var i=new n(t);if(this._isValidFile(i,s,e)){var r=new m(this,t,e);a.push(r),this.queue.push(r),this._onAfterAddingFile(r)}else{var o=s[this._failFilterIndex];this._onWhenAddingFileFailed(i,o,e)}},this),this.queue.length!==o&&(this._onAfterAddingAll(a),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()}},removeFromQueue:{value:function(t){var e=this.getIndexOfItem(t),i=this.queue[e];i.isUploading&&i.cancel(),this.queue.splice(e,1),i._destroy(),this.progress=this._getTotalProgress()}},clearQueue:{value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},uploadItem:{value:function(t){var e=this.getIndexOfItem(t),i=this.queue[e],r=this.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[r](i))}},cancelItem:{value:function(t){var e=this.getIndexOfItem(t),i=this.queue[e],r=this.isHTML5?"_xhr":"_form";i&&i.isUploading&&i[r].abort()}},uploadAll:{value:function(){var t=this.getNotUploadedItems().filter(function(t){return!t.isUploading});t.length&&(c(t,function(t){t._prepareToUploading()}),t[0].upload())}},cancelAll:{value:function(){var t=this.getNotUploadedItems();c(t,function(t){t.cancel()})}},isFile:{value:function(t){return this.constructor.isFile(t)}},isFileLikeObject:{value:function(t){return this.constructor.isFileLikeObject(t)}},isArrayLikeObject:{value:function(t){return this.constructor.isArrayLikeObject(t)}},getIndexOfItem:{value:function(t){return u(t)?t:this.queue.indexOf(t)}},getNotUploadedItems:{value:function(){return this.queue.filter(function(t){return!t.isUploaded})}},getReadyItems:{value:function(){return this.queue.filter(function(t){return t.isReady&&!t.isUploading}).sort(function(t,e){return t.index-e.index})}},destroy:{value:function(){c(this._directives,function(t){c(this._directives[t],function(t){t.destroy()},this)},this)}},onAfterAddingAll:{value:function(t){}},onAfterAddingFile:{value:function(t){}},onWhenAddingFileFailed:{value:function(t,e,i){}},onBeforeUploadItem:{value:function(t){}},onProgressItem:{value:function(t,e){}},onProgressAll:{value:function(t){}},onSuccessItem:{value:function(t,e,i,r){}},onErrorItem:{value:function(t,e,i,r){}},onCancelItem:{value:function(t,e,i,r){}},onCompleteItem:{value:function(t,e,i,r){}},onCompleteAll:{value:function(){}},_getTotalProgress:{value:function(t){if(this.removeAfterUpload)return t||0;var e=this.getNotUploadedItems().length,i=e?this.queue.length-e:this.queue.length,r=100/this.queue.length,n=(t||0)*r/100;return Math.round(i*r+n)}},_getFilters:{value:function(t){if(!t)return this.filters;if(f(t))return t;var e=t.match(/[^\s,]+/g);return this.filters.filter(function(t){return-1!==e.indexOf(t.name)},this)}},_render:{value:function(){e.$$phase||e.$apply()}},_folderFilter:{value:function(t){return!(!t.size&&!t.type)}},_queueLimitFilter:{value:function(){return this.queue.length<this.queueLimit}},_isValidFile:{value:function(t,e,i){return this._failFilterIndex=-1,e.length?e.every(function(e){return this._failFilterIndex++,e.fn.call(this,t,i)},this):!0}},_isSuccessCode:{value:function(t){return t>=200&&300>t||304===t}},_transformResponse:{value:function(t,e){var r=this._headersGetter(e);return c(i.defaults.transformResponse,function(e){t=e(t,r)}),t}},_parseHeaders:{value:function(t){var e,i,r,n={};return t?(c(t.split("\n"),function(t){r=t.indexOf(":"),e=t.slice(0,r).trim().toLowerCase(),i=t.slice(r+1).trim(),e&&(n[e]=n[e]?n[e]+", "+i:i)}),n):n}},_headersGetter:{value:function(t){return function(e){return e?t[e.toLowerCase()]||null:t}}},_xhrTransport:{value:function(t){var e=t._xhr=new XMLHttpRequest,i=new v,r=this;if(r._onBeforeUploadItem(t),c(t.formData,function(t){c(t,function(t,e){i.append(e,t)})}),"number"!=typeof t._file.size)throw new TypeError("The file specified is no longer valid");i.append(t.alias,t._file,t.file.name),e.upload.onprogress=function(e){var i=Math.round(e.lengthComputable?100*e.loaded/e.total:0);r._onProgressItem(t,i)},e.onload=function(){var i=r._parseHeaders(e.getAllResponseHeaders()),n=r._transformResponse(e.response,i),s=r._isSuccessCode(e.status)?"Success":"Error",o="_on"+s+"Item";r[o](t,n,e.status,i),r._onCompleteItem(t,n,e.status,i)},e.onerror=function(){var i=r._parseHeaders(e.getAllResponseHeaders()),n=r._transformResponse(e.response,i);r._onErrorItem(t,n,e.status,i),r._onCompleteItem(t,n,e.status,i)},e.onabort=function(){var i=r._parseHeaders(e.getAllResponseHeaders()),n=r._transformResponse(e.response,i);r._onCancelItem(t,n,e.status,i),r._onCompleteItem(t,n,e.status,i)},e.open(t.method,t.url,!0),e.withCredentials=t.withCredentials,c(t.headers,function(t,i){e.setRequestHeader(i,t)}),e.send(i),this._render()}},_iframeTransport:{value:function(t){var e=h('<form style="display: none;" />'),i=h('<iframe name="iframeTransport'+Date.now()+'">'),r=t._input,n=this;t._form&&t._form.replaceWith(r),t._form=e,n._onBeforeUploadItem(t),r.prop("name",t.alias),c(t.formData,function(t){c(t,function(t,i){var r=r('<input type="hidden" name="'+i+'" />');r.val(t),e.append(r)})}),e.prop({action:t.url,method:"POST",target:i.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),i.bind("load",function(){var e="",r=200;try{e=i[0].contentDocument.body.innerHTML}catch(s){r=500}var o={response:e,status:r,dummy:!0},a={},d=n._transformResponse(o.response,a);n._onSuccessItem(t,d,o.status,a),n._onCompleteItem(t,d,o.status,a)}),e.abort=function(){var s,o={status:0,dummy:!0},a={};i.unbind("load").prop("src","javascript:false;"),e.replaceWith(r),n._onCancelItem(t,s,o.status,a),n._onCompleteItem(t,s,o.status,a)},r.after(e),e.append(r).append(i),e[0].submit(),this._render()}},_onWhenAddingFileFailed:{value:function(t,e,i){this.onWhenAddingFileFailed(t,e,i)}},_onAfterAddingFile:{value:function(t){this.onAfterAddingFile(t)}},_onAfterAddingAll:{value:function(t){this.onAfterAddingAll(t)}},_onBeforeUploadItem:{value:function(t){t._onBeforeUpload(),this.onBeforeUploadItem(t)}},_onProgressItem:{value:function(t,e){var i=this._getTotalProgress(e);this.progress=i,t._onProgress(e),this.onProgressItem(t,e),this.onProgressAll(i),this._render()}},_onSuccessItem:{value:function(t,e,i,r){t._onSuccess(e,i,r),this.onSuccessItem(t,e,i,r)}},_onErrorItem:{value:function(t,e,i,r){t._onError(e,i,r),this.onErrorItem(t,e,i,r)}},_onCancelItem:{value:function(t,e,i,r){t._onCancel(e,i,r),this.onCancelItem(t,e,i,r)}},_onCompleteItem:{value:function(t,e,i,r){t._onComplete(e,i,r),this.onCompleteItem(t,e,i,r);var n=this.getReadyItems()[0];return this.isUploading=!1,p(n)?void n.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())}}},{isFile:{value:function(t){return g&&t instanceof g}},isFileLikeObject:{value:function(t){return t instanceof this.constructor.FileLikeObject}},isArrayLikeObject:{value:function(t){return l(t)&&"length"in t}},inherit:{value:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.super_=e}}}),r}();return _.prototype.isHTML5=!(!g||!v),_.isHTML5=_.prototype.isHTML5,_}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r;var a=(n(i(2)),angular.copy),d=angular.extend,c=angular.forEach,l=angular.isObject,u=angular.isNumber,p=angular.isDefined,f=angular.isArray,h=angular.element;r.$inject=["fileUploaderOptions","$rootScope","$http","$window","FileLikeObject","FileItem"]},function(t,e,i){"use strict";function r(){var t=function(){function t(e){o(this,t);var i=d(e),r=i?e.value:e,n=c(r)?"FakePath":"Object",s="_createFrom"+n;this[s](r)}return s(t,{_createFromFakePath:{value:function(t){this.lastModifiedDate=null,this.size=null,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)}},_createFromObject:{value:function(t){this.lastModifiedDate=a(t.lastModifiedDate),this.size=t.size,this.type=t.type,this.name=t.name}}}),t}();return t}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r;var a=(n(i(2)),angular.copy),d=angular.isElement,c=angular.isString;r.$inject=[]},function(t,e,i){"use strict";function r(t,e){var i=function(){function i(t,r,n){o(this,i);var s=l(r),u=s?c(r):null,p=s?null:r;d(this,{url:t.url,alias:t.alias,headers:a(t.headers),formData:a(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,method:t.method},n,{uploader:t,file:new e(r),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:p,_input:u}),u&&this._replaceNode(u)}return s(i,{upload:{value:function(){try{this.uploader.uploadItem(this)}catch(t){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}}},cancel:{value:function(){this.uploader.cancelItem(this)}},remove:{value:function(){this.uploader.removeFromQueue(this)}},onBeforeUpload:{value:function(){}},onProgress:{value:function(t){}},onSuccess:{value:function(t,e,i){}},onError:{value:function(t,e,i){}},onCancel:{value:function(t,e,i){}},onComplete:{value:function(t,e,i){}},_onBeforeUpload:{value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},_onProgress:{value:function(t){this.progress=t,this.onProgress(t)}},_onSuccess:{value:function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(t,e,i)}},_onError:{value:function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(t,e,i)}},_onCancel:{value:function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(t,e,i)}},_onComplete:{value:function(t,e,i){this.onComplete(t,e,i),this.removeAfterUpload&&this.remove()}},_destroy:{value:function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input}},_prepareToUploading:{value:function(){
this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}},_replaceNode:{value:function(e){var i=t(e.clone())(e.scope());i.prop("value",null),e.css("display","none"),e.after(i)}}}),i}();return i}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r;var a=(n(i(2)),angular.copy),d=angular.extend,c=angular.element,l=angular.isElement;r.$inject=["$compile","FileLikeObject"]},function(t,e,i){"use strict";function r(){var t=function(){function t(e){o(this,t),a(this,e),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return s(t,{bind:{value:function(){for(var t in this.events){var e=this.events[t];this.element.bind(t,this[e])}}},unbind:{value:function(){for(var t in this.events)this.element.unbind(t,this.events[t])}},destroy:{value:function(){var t=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(t,1),this.unbind()}},_saveLinks:{value:function(){for(var t in this.events){var e=this.events[t];this[e]=this[e].bind(this)}}}}),t}();return t.prototype.events={},t}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r;var a=(n(i(2)),angular.extend);r.$inject=[]},function(t,e,i){"use strict";function r(t){var e=function(t){function e(t){d(this,e),this.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},this.prop="drop",o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),s(e,{getOptions:{value:function(){}},getFilters:{value:function(){}},onDrop:{value:function(t){var e=this._getTransfer(t);if(e){var i=this.getOptions(),r=this.getFilters();this._preventAndStop(t),c(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(e.files,i,r)}}},onDragOver:{value:function(t){var e=this._getTransfer(t);this._haveFiles(e.types)&&(e.dropEffect="copy",this._preventAndStop(t),c(this.uploader._directives.over,this._addOverClass,this))}},onDragLeave:{value:function(t){t.currentTarget!==this.element[0]&&(this._preventAndStop(t),c(this.uploader._directives.over,this._removeOverClass,this))}},_getTransfer:{value:function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer}},_preventAndStop:{value:function(t){t.preventDefault(),t.stopPropagation()}},_haveFiles:{value:function(t){return t?t.indexOf?-1!==t.indexOf("Files"):t.contains?t.contains("Files"):!1:!1}},_addOverClass:{value:function(t){t.addOverClass()}},_removeOverClass:{value:function(t){t.removeOverClass()}}}),e}(t);return e}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function l(t,e,i){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:l(n,e,i)}if("value"in r&&r.writable)return r.value;var s=r.get;return void 0===s?void 0:s.call(i)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r;var c=(n(i(2)),angular.forEach);r.$inject=["FileDirective"]},function(t,e,i){"use strict";function r(t){var e=function(t){function e(t){d(this,e),this.events={$destroy:"destroy"},this.prop="over",this.overClass="nv-file-over",o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),s(e,{addOverClass:{value:function(){this.element.addClass(this.getOverClass())}},removeOverClass:{value:function(){this.element.removeClass(this.getOverClass())}},getOverClass:{value:function(){return this.overClass}}}),e}(t);return e}var n=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var i in e){var r=e[i];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function c(t,e,i){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:c(n,e,i)}if("value"in r&&r.writable)return r.value;var s=r.get;return void 0===s?void 0:s.call(i)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t.exports=r,n(i(2)),r.$inject=["FileDirective"]},function(t,e,i){"use strict";function r(t,e,i){return{link:function(r,n,s){var o=r.$eval(s.uploader);if(!(o instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new i({uploader:o,element:n});a.getOptions=t(s.options).bind(a,r),a.getFilters=function(){return s.filters}}}}var n=function(t){return t&&t.__esModule?t["default"]:t};t.exports=r,n(i(2)),r.$inject=["$parse","FileUploader","FileSelect"]},function(t,e,i){"use strict";function r(t,e,i){return{link:function(r,n,s){var o=r.$eval(s.uploader);if(!(o instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');if(o.isHTML5){var a=new i({uploader:o,element:n});a.getOptions=t(s.options).bind(a,r),a.getFilters=function(){return s.filters}}}}}var n=function(t){return t&&t.__esModule?t["default"]:t};t.exports=r,n(i(2)),r.$inject=["$parse","FileUploader","FileDrop"]},function(t,e,i){"use strict";function r(t,e){return{link:function(i,r,n){var s=i.$eval(n.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var o=new e({uploader:s,element:r});o.getOverClass=function(){return n.overClass||this.overClass}}}}var n=function(t){return t&&t.__esModule?t["default"]:t};t.exports=r,n(i(2)),r.$inject=["FileUploader","FileOver"]}])}),function(){"use strict";function t(e,r){function n(t,e){return function(){return t.apply(e,arguments)}}var s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=e,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!t.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,d=0,c=o.length;c>d;d++)a[o[d]]=n(a[o[d]],a);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,r){var n=Node.prototype.removeEventListener;"click"===t?n.call(e,t,i.hijacked||i,r):n.call(e,t,i,r)},e.addEventListener=function(t,i,r){var n=Node.prototype.addEventListener;"click"===t?n.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),r):n.call(e,t,i,r)}),"function"==typeof e.onclick&&(s=e.onclick,e.addEventListener("click",function(t){s(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!e,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,n=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=r&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(r&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;r&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,s;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],r){if(s=window.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!n){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,o,a,d,c,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=t.changedTouches[0],l=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=l.tagName.toLowerCase(),"label"===a){if(e=this.findControl(l)){if(this.focus(l),i)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-o>100||r&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),r&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return r&&!n&&(d=l.fastClickScrollParent,d&&d.fastClickLastScrollTop!==d.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,r,n,s;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),n[1]>=10&&n[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(s=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],s>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,i){return new t(e,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),function(t,e,i,r){"use strict";function n(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}var s=function(e){for(var i=e.length,r=t("head");i--;)0===r.has("."+e[i]).length&&r.append('<meta class="'+e[i]+'" />')};s(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof i.body&&FastClick.attach(i.body)});var o=function(e,r){if("string"==typeof e){if(r){var n;if(r.jquery){if(n=r[0],!n)return r}else n=r;return t(n.querySelectorAll(e))}return t(i.querySelectorAll(e))}return t(e,r)},a=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},d=function(t){for(var e=t.split("-"),i=e.length,r=[];i--;)0!==i?r.push(e[i]):this.namespace.length>0?r.push(this.namespace,e[i]):r.push(e[i]);return r.reverse().join("-")},c=function(e,i){var r=this,n=!o(this).data(this.attr_name(!0));return"string"==typeof e?this[e].call(this,i):void(o(this.scope).is("["+this.attr_name()+"]")?(o(this.scope).data(this.attr_name(!0)+"-init",t.extend({},this.settings,i||e,this.data_options(o(this.scope)))),n&&this.events(this.scope)):o("["+this.attr_name()+"]",this.scope).each(function(){var n=!o(this).data(r.attr_name(!0)+"-init");o(this).data(r.attr_name(!0)+"-init",t.extend({},r.settings,i||e,r.data_options(o(this)))),n&&r.events(this)}))},l=function(t,e){function i(){e(t[0])}function r(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?i():r.call(t)):void i()};e.matchMedia=e.matchMedia||function(t){var e,i=t.documentElement,r=i.firstElementChild||i.firstChild,n=t.createElement("body"),s=t.createElement("div");return s.id="mq-test-1",s.style.cssText="position:absolute;top:-100em",n.style.background="none",n.appendChild(s),function(t){return s.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(n,r),e=42===s.offsetWidth,i.removeChild(n),{matches:e,media:t}}}(i),function(t){function i(){r&&(o(i),d&&jQuery.fx.tick())}for(var r,n=0,s=["webkit","moz"],o=e.requestAnimationFrame,a=e.cancelAnimationFrame,d="undefined"!=typeof jQuery.fx;n<s.length&&!o;n++)o=e[s[n]+"RequestAnimationFrame"],a=a||e[s[n]+"CancelAnimationFrame"]||e[s[n]+"CancelRequestAnimationFrame"];o?(e.requestAnimationFrame=o,e.cancelAnimationFrame=a,d&&(jQuery.fx.timer=function(t){t()&&jQuery.timers.push(t)&&!r&&(r=!0,i())},jQuery.fx.stop=function(){r=!1})):(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout(function(){t(i+r)},r);return n=i+r,s},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(jQuery),e.Foundation={name:"Foundation",version:"5.2.3",media_queries:{small:o(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:o(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:o(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:o(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:o(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:r},init:function(t,e,i,r,n){var s=[t,i,r,n],a=[];if(this.rtl=/rtl/i.test(o("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),e&&"string"==typeof e&&!/reflow/i.test(e))this.libs.hasOwnProperty(e)&&a.push(this.init_lib(e,s));else for(var d in this.libs)a.push(this.init_lib(d,e));return t},init_lib:function(e,i){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),i&&i.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,i[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,i[e]),this.libs[e].init.apply(this.libs[e],[this.scope,i[e]])):(i=i instanceof Array?i:new Array(i),this.libs[e].init.apply(this.libs[e],i))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=a,t.add_namespace=d,t.bindings=c,t.S=this.utils.S},inherit:function(t,e){for(var i=e.split(" "),r=i.length;r--;)this.utils.hasOwnProperty(i[r])&&(t[i[r]]=this.utils[i[r]])},set_namespace:function(){var e=this.global.namespace===r?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===r||/false/i.test(e)?"":e},libs:{},utils:{S:o,throttle:function(t,e){var i=null;return function(){var r=this,n=arguments;null==i&&(i=setTimeout(function(){t.apply(r,n),i=null},e))}},debounce:function(t,e,i){var r,n;return function(){var s=this,o=arguments,a=function(){r=null,i||(n=t.apply(s,o))},d=i&&!r;return clearTimeout(r),r=setTimeout(a,e),d&&(n=t.apply(s,o)),n}},data_options:function(e,i){function r(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function n(e){return"string"==typeof e?t.trim(e):e}i=i||"options";var s,o,a,d={},c=function(t){var e=Foundation.global.namespace;return t.data(e.length>0?e+"-"+i:i)},l=c(e);if("object"==typeof l)return l;for(a=(l||":").split(";"),s=a.length;s--;)o=a[s].split(":"),o=[o[0],o.slice(1).join(":")],/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),r(o[1])&&(o[1]=-1===o[1].indexOf(".")?parseInt(o[1],10):parseFloat(o[1])),2===o.length&&o[0].length>0&&(d[n(o[0])]=n(o[1]));return d},register_media:function(e,i){Foundation.media_queries[e]===r&&(t("head").append('<meta class="'+i+'">'),Foundation.media_queries[e]=n(t("."+i).css("font-family")))},add_custom_rule:function(t,e){if(e===r&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[e];i!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }")}},image_loaded:function(t,e){var i=this,r=t.length;0===r&&e(t),t.each(function(){l(i.S(this),function(){r-=1,0===r&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.abide={name:"abide",version:"5.2.3",settings:{live_validate:!0,focus_on_invalid:!0,error_labels:!0,timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:\.\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t,e,r){var n=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,s=t.value,o=n===s;return o}}},timer:null,init:function(t,e,i){this.bindings(e,i)},events:function(e){var i=this,r=i.S(e).attr("novalidate","novalidate"),n=r.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid"),r.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(t){var e=/ajax/i.test(i.S(this).attr(i.attr_name()));return i.validate(i.S(this).find("input, textarea, select").get(),t,e)}).on("reset",function(){return i.reset(t(this))}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(t){i.validate([this],t)}).on("keydown.fndtn.abide",function(t){n.live_validate===!0&&(clearTimeout(i.timer),i.timer=setTimeout(function(){i.validate([this],t)}.bind(this),n.timeout))})},reset:function(e){e.removeAttr(this.invalid_attr),t(this.invalid_attr,e).removeAttr(this.invalid_attr),t(".error",e).not("small").removeClass("error")},validate:function(t,e,i){var r=this.parse_patterns(t),n=r.length,s=this.S(t[0]).closest("[data-"+this.attr_name(!0)+"]"),o=s.data(this.attr_name(!0)+"-init")||{},a=/submit/.test(e.type);s.trigger("validated");for(var d=0;n>d;d++)if(!r[d]&&(a||i))return o.focus_on_invalid&&t[d].focus(),s.trigger("invalid"),this.S(t[d]).closest("[data-"+this.attr_name(!0)+"]").attr(this.invalid_attr,""),!1;return(a||i)&&s.trigger("valid"),s.removeAttr(this.invalid_attr),i?!1:!0},parse_patterns:function(t){for(var e=t.length,i=[];e--;)i.push(this.pattern(t[e]));return this.check_validation_and_apply_styles(i)},pattern:function(t){var e=t.getAttribute("type"),i="string"==typeof t.getAttribute("required"),r=t.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(r)&&r.length>0?[t,this.settings.patterns[r],i]:r.length>0?[t,new RegExp("^"+r+"$"),i]:this.settings.patterns.hasOwnProperty(e)?[t,this.settings.patterns[e],i]:(r=/.*/,[t,r,i])},check_validation_and_apply_styles:function(e){for(var i=e.length,r=[],n=this.S(e[0][0]).closest("[data-"+this.attr_name(!0)+"]"),s=n.data(this.attr_name(!0)+"-init")||{};i--;){var o,a,d=e[i][0],c=e[i][2],l=d.value.trim(),u=this.S(d).parent(),p=d.getAttribute(this.add_namespace("data-abide-validator")),f="radio"===d.type,h="checkbox"===d.type,m=this.S('label[for="'+d.getAttribute("id")+'"]'),g=c?d.value.length>0:!0;d.getAttribute(this.add_namespace("data-equalto"))&&(p="equalTo"),o=u.is("label")?u.parent():u,f&&c?r.push(this.valid_radio(d,c)):h&&c?r.push(this.valid_checkbox(d,c)):p?(a=this.settings.validators[p].apply(this,[d,c,o]),r.push(a),a?(this.S(d).removeAttr(this.invalid_attr),o.removeClass("error")):(this.S(d).attr(this.invalid_attr,""),o.addClass("error"))):e[i][1].test(l)&&g||!c&&d.value.length<1||t(d).attr("disabled")?(this.S(d).removeAttr(this.invalid_attr),o.removeClass("error"),m.length>0&&s.error_labels&&m.removeClass("error"),r.push(!0),t(d).triggerHandler("valid")):(this.S(d).attr(this.invalid_attr,""),o.addClass("error"),m.length>0&&s.error_labels&&m.addClass("error"),r.push(!1),t(d).triggerHandler("invalid"))}return r},valid_checkbox:function(t,e){var t=this.S(t),i=t.is(":checked")||!e;return i?t.removeAttr(this.invalid_attr).parent().removeClass("error"):t.attr(this.invalid_attr,"").parent().addClass("error"),i},valid_radio:function(t,e){for(var i=t.getAttribute("name"),r=this.S(t).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+i+"']"),n=r.length,s=!1,o=0;n>o;o++)r[o].checked&&(s=!0);for(var o=0;n>o;o++)s?this.S(r[o]).removeAttr(this.invalid_attr).parent().removeClass("error"):this.S(r[o]).attr(this.invalid_attr,"").parent().addClass("error");return s},valid_equal:function(t,e,r){var n=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,s=t.value,o=n===s;return o?(this.S(t).removeAttr(this.invalid_attr),r.removeClass("error")):(this.S(t).attr(this.invalid_attr,""),r.addClass("error")),o},valid_oneof:function(t,e,i,r){var t=this.S(t),n=this.S("["+this.add_namespace("data-oneof")+"]"),s=n.filter(":checked").length>0;if(s?t.removeAttr(this.invalid_attr).parent().removeClass("error"):t.attr(this.invalid_attr,"").parent().addClass("error"),!r){var o=this;n.each(function(){o.valid_oneof.call(o,this,null,null,!0)})}return s}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.accordion={name:"accordion",version:"5.2.3",settings:{active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(){var e=this,i=this.S;i(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > dd > a",function(r){var n=i(this).closest("["+e.attr_name()+"]"),s=i("#"+this.href.split("#")[1]),o=i("dd > .content",n),a=t("dd",n),d=e.attr_name()+"="+n.attr(e.attr_name()),c=n.data(e.attr_name(!0)+"-init"),l=i("dd > .content."+c.active_class,n);return r.preventDefault(),n.attr(e.attr_name())&&(o=o.add("["+d+"] dd > .content"),a=a.add("["+d+"] dd")),c.toggleable&&s.is(l)?(s.parent("dd").toggleClass(c.active_class,!1),s.toggleClass(c.active_class,!1)):(c.multi_expand||(o.removeClass(c.active_class),a.removeClass(c.active_class)),s.addClass(c.active_class).parent().addClass(c.active_class),void c.callback(s))})},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.alert={name:"alert",version:"5.2.3",settings:{callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(){var i=this,r=this.S;t(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] a.close",function(t){var n=r(this).closest("["+i.attr_name()+"]"),s=n.data(i.attr_name(!0)+"-init")||i.settings;t.preventDefault(),"transitionend"in e||"webkitTransitionEnd"in e||"oTransitionEnd"in e?(n.addClass("alert-close"),n.on("transitionend webkitTransitionEnd oTransitionEnd",function(t){r(this).trigger("close").remove(),s.callback()})):n.fadeOut(300,function(){r(this).trigger("close").remove(),s.callback()})})},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.2.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",touch_label:"",init:!1,locked:!1},init:function(t,e,i){var r=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(e,i),r.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(r.S("li",this.scope)):r.S("["+this.attr_name()+"]",this.scope).each(function(){r.assemble(r.S("li",this))})},events:function(r){var n=this,s=n.S,o=t(".scroll-container");o.length>0&&(this.scope=o),s(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li",function(t,e,i){var e=e||s(this),i=i||e,r=e.next("li"),o=e.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init"),a=s(t.target);t.preventDefault(),o||(n.init(),o=e.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init")),i.hasClass("visible")&&e[0]===i[0]&&r.length>0&&n.is_open(e)&&(i=r,a=s("img",i)),n.open(a,e,i),n.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(t){n.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){n.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),t(i).on("keydown.fndtn.clearing",function(t){n.keydown(t)}),s(e).off(".clearing").on("resize.fndtn.clearing",function(){n.resize()}),this.swipe_events(r)},swipe_events:function(t){var e=this,i=e.S;i(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:r};i(this).data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var r=i(this).data("swipe-transition");if("undefined"==typeof r&&(r={}),r.delta_x=t.touches[0].pageX-r.start_page_x,"undefined"==typeof r.is_scrolling&&(r.is_scrolling=!!(r.is_scrolling||Math.abs(r.delta_x)<Math.abs(t.touches[0].pageY-r.start_page_y))),
!r.is_scrolling&&!r.active){t.preventDefault();var n=r.delta_x<0?"next":"prev";r.active=!0,e.nav(t,n)}}}).on("touchend.fndtn.clearing",".visible-img",function(t){i(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(e){var i=e.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"></div>');var r=i.detach(),n="";if(null!=r[0]){n=r[0].outerHTML;var s=this.S("#foundationClearingHolder"),o=i.data(this.attr_name(!0)+"-init"),a={grid:'<div class="carousel">'+n+"</div>",viewing:o.templates.viewing},d='<div class="clearing-assembled"><div>'+a.viewing+a.grid+"</div></div>",c=this.settings.touch_label;Modernizr.touch&&(d=t(d).find(".clearing-touch-label").html(c).end()),s.after(d).remove()}}},open:function(e,r,n){function s(){setTimeout(function(){this.image_loaded(p,function(){1!==p.outerWidth()||h?o.call(this,p):s.call(this)}.bind(this))}.bind(this),50)}function o(e){var i=t(e);i.css("visibility","visible"),d.css("overflow","hidden"),c.addClass("clearing-blackout"),l.addClass("clearing-container"),u.show(),this.fix_height(n).caption(a.S(".clearing-caption",u),a.S("img",n)).center_and_label(e,f).shift(r,n,function(){n.siblings().removeClass("visible"),n.addClass("visible")}),u.trigger("opened.fndtn.clearing")}var a=this,d=t(i.body),c=n.closest(".clearing-assembled"),l=a.S("div",c).first(),u=a.S(".visible-img",l),p=a.S("img",u).not(e),f=a.S(".clearing-touch-label",l),h=!1;p.error(function(){h=!0}),this.locked()||(u.trigger("open.fndtn.clearing"),p.attr("src",this.load(e)).css("visibility","hidden"),s.call(this))},close:function(e,r){e.preventDefault();var n,s,o=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(r)),a=t(i.body);return r===e.target&&o&&(a.css("overflow",""),n=t("div",o).first(),s=t(".visible-img",n),s.trigger("close.fndtn.clearing"),this.settings.prev_index=0,t("ul["+this.attr_name()+"]",o).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),n.removeClass("clearing-container"),s.hide(),s.trigger("closed.fndtn.clearing")),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var i=t(".clearing-blackout ul["+this.attr_name()+"]"),r=this.rtl?37:39,n=this.rtl?39:37,s=27;e.which===r&&this.go(i,"next"),e.which===n&&this.go(i,"prev"),e.which===s&&this.S("a.clearing-close").trigger("click")},nav:function(e,i){var r=t("ul["+this.attr_name()+"]",".clearing-blackout");e.preventDefault(),this.go(r,i)},resize:function(){var e=t("img",".clearing-blackout .visible-img"),i=t(".clearing-touch-label",".clearing-blackout");e.length&&(this.center_and_label(e,i),e.trigger("resized.fndtn.clearing"))},fix_height:function(t){var e=t.parent().children(),i=this;return e.each(function(){var t=i.S(this),e=t.find("img");t.height()>e.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*e.length+"%"),this},update_paddles:function(t){var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?this.S(".clearing-main-next",e).removeClass("disabled"):this.S(".clearing-main-next",e).addClass("disabled"),t.prev().length>0?this.S(".clearing-main-prev",e).removeClass("disabled"):this.S(".clearing-main-prev",e).addClass("disabled")},center_and_label:function(t,e){return this.rtl?(t.css({marginRight:-(t.outerWidth()/2),marginTop:-(t.outerHeight()/2),left:"auto",right:"50%"}),e.length>0&&e.css({marginRight:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10,left:"auto",right:"50%"})):(t.css({marginLeft:-(t.outerWidth()/2),marginTop:-(t.outerHeight()/2)}),e.length>0&&e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10})),this},load:function(t){var e;return e="A"===t[0].nodeName?t.attr("href"):t.parent().attr("href"),this.preload(t),e?e:t.attr("src")},preload:function(t){this.img(t.closest("li").next()).img(t.closest("li").prev())},img:function(t){if(t.length){var e=new Image,i=this.S("a",t);e.src=i.length?i.attr("href"):this.S("img",t).attr("src")}return this},caption:function(t,e){var i=e.attr("data-caption");return i?t.html(i).show():t.text("").hide(),this},go:function(t,e){var i=this.S(".visible",t),r=i[e]();r.length&&this.S("img",r).trigger("click",[i,r]).trigger("change.fndtn.clearing")},shift:function(t,e,i){var r,n=e.parent(),s=this.settings.prev_index||e.index(),o=this.direction(n,t,e),a=this.rtl?"right":"left",d=parseInt(n.css("left"),10),c=e.outerWidth(),l={};e.index()===s||/skip/.test(o)?/skip/.test(o)&&(r=e.index()-this.settings.up_count,this.lock(),r>0?(l[a]=-(r*c),n.animate(l,300,this.unlock())):(l[a]=0,n.animate(l,300,this.unlock()))):/left/.test(o)?(this.lock(),l[a]=d+c,n.animate(l,300,this.unlock())):/right/.test(o)&&(this.lock(),l[a]=d-c,n.animate(l,300,this.unlock())),i()},direction:function(t,e,i){var r,n=this.S("li",t),s=n.outerWidth()+n.outerWidth()/4,o=Math.floor(this.S(".clearing-container").outerWidth()/s)-1,a=n.index(i);return this.settings.up_count=o,r=this.adjacent(this.settings.prev_index,a)?a>o&&a>this.settings.prev_index?"right":a>o-1&&a<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=a,r},adjacent:function(t,e){for(var i=e+1;i>=e-1;i--)if(i===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.2.3",settings:{active_class:"open",align:"bottom",is_hover:!1,opened:function(){},closed:function(){}},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i)},events:function(i){var r=this,n=r.S;n(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(e){var i=n(this).data(r.attr_name(!0)+"-init")||r.settings;(!i.is_hover||Modernizr.touch)&&(e.preventDefault(),r.toggle(t(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e,i,s=n(this);clearTimeout(r.timeout),s.data(r.data_attr())?(e=n("#"+s.data(r.data_attr())),i=s):(e=s,i=n("["+r.attr_name()+"='"+e.attr("id")+"']"));var o=i.data(r.attr_name(!0)+"-init")||r.settings;n(t.target).data(r.data_attr())&&o.is_hover&&r.closeall.call(r),o.is_hover&&r.open.apply(r,[e,i])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e=n(this);r.timeout=setTimeout(function(){if(e.data(r.data_attr())){var t=e.data(r.data_attr(!0)+"-init")||r.settings;t.is_hover&&r.close.call(r,n("#"+e.data(r.data_attr())))}else{var i=n("["+r.attr_name()+'="'+n(this).attr("id")+'"]'),t=i.data(r.attr_name(!0)+"-init")||r.settings;t.is_hover&&r.close.call(r,e)}}.bind(this),150)}).on("click.fndtn.dropdown",function(e){var i=n(e.target).closest("["+r.attr_name()+"-content]");if(!n(e.target).data(r.data_attr())&&!n(e.target).parent().data(r.data_attr()))return!n(e.target).data("revealId")&&i.length>0&&(n(e.target).is("["+r.attr_name()+"-content]")||t.contains(i.first()[0],e.target))?void e.stopPropagation():void r.close.call(r,n("["+r.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+r.attr_name()+"-content]",function(){r.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+r.attr_name()+"-content]",function(){r.settings.closed.call(this)}),n(e).off(".dropdown").on("resize.fndtn.dropdown",r.throttle(function(){r.resize.call(r)},50)),this.resize()},close:function(t){var e=this;t.each(function(){e.S(this).hasClass(e.settings.active_class)&&(e.S(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.active_class).prev("["+e.attr_name()+"]").removeClass(e.settings.active_class).removeData("target"),e.S(this).trigger("closed",[t]))})},closeall:function(){var e=this;t.each(e.S("["+this.attr_name()+"-content]"),function(){e.close.call(e,e.S(this))})},open:function(t,e){this.css(t.addClass(this.settings.active_class),e),t.prev("["+this.attr_name()+"]").addClass(this.settings.active_class),t.data("target",e.get(0)).trigger("opened",[t,e])},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(t){var e=this.S("#"+t.data(this.data_attr()));0!==e.length&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(e)),e.hasClass(this.settings.active_class)?(this.close.call(this,e),e.data("target")!==t.get(0)&&this.open.call(this,e,t)):this.open.call(this,e,t))},resize:function(){var t=this.S("["+this.attr_name()+"-content].open"),e=this.S("["+this.attr_name()+"='"+t.attr("id")+"']");t.length&&e.length&&this.css(t,e)},css:function(t,e){if(this.clear_idx(),this.small()){var i=this.dirs.bottom.call(t,e);t.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:i.top}),t.css(Foundation.rtl?"right":"left","2.5%")}else{var r=e.data(this.attr_name(!0)+"-init")||this.settings;this.style(t,e,r)}return t},style:function(e,i,r){var n=t.extend({position:"absolute"},this.dirs[r.align].call(e,i,r));e.attr("style","").css(n)},dirs:{_base:function(t){var e=this.offsetParent(),i=e.offset(),r=t.offset();return r.top-=i.top,r.left-=i.left,r},top:function(t,e){var i=Foundation.libs.dropdown,r=i.dirs._base.call(this,t),n=t.outerWidth()/2-8;return this.addClass("drop-top"),(t.outerWidth()<this.outerWidth()||i.small())&&i.adjust_pip(n,r),Foundation.rtl?{left:r.left-this.outerWidth()+t.outerWidth(),top:r.top-this.outerHeight()}:{left:r.left,top:r.top-this.outerHeight()}},bottom:function(t,e){var i=Foundation.libs.dropdown,r=i.dirs._base.call(this,t),n=t.outerWidth()/2-8;return(t.outerWidth()<this.outerWidth()||i.small())&&i.adjust_pip(n,r),i.rtl?{left:r.left-this.outerWidth()+t.outerWidth(),top:r.top+t.outerHeight()}:{left:r.left,top:r.top+t.outerHeight()}},left:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t);return this.addClass("drop-left"),{left:i.left-this.outerWidth(),top:i.top}},right:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t);return this.addClass("drop-right"),{left:i.left+t.outerWidth(),top:i.top}}},adjust_pip:function(t,e){var i=Foundation.stylesheet;this.small()&&(t+=e.left-8),this.rule_idx=i.cssRules.length;var r=".f-dropdown.open:before",n=".f-dropdown.open:after",s="left: "+t+"px;",o="left: "+(t-1)+"px;";i.insertRule?(i.insertRule([r,"{",s,"}"].join(" "),this.rule_idx),i.insertRule([n,"{",o,"}"].join(" "),this.rule_idx+1)):(i.addRule(r,s,this.rule_idx),i.addRule(n,o,this.rule_idx+1))},clear_idx:function(){var t=Foundation.stylesheet;this.rule_idx&&(t.deleteRule(this.rule_idx),t.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown"),this.S("html, body").off(".fndtn.dropdown"),this.S(e).off(".fndtn.dropdown"),this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.2.3",settings:{use_tallest:!0,before_height_change:t.noop,after_height_change:t.noop,equalize_on_stack:!1},init:function(t,e,i){Foundation.inherit(this,"image_loaded"),this.bindings(e,i),this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(t){this.reflow()}.bind(this))},equalize:function(e){var i=!1,r=e.find("["+this.attr_name()+"-watch]:visible"),n=e.data(this.attr_name(!0)+"-init");if(0!==r.length){var s=r.first().offset().top;if(n.before_height_change(),e.trigger("before-height-change"),r.height("inherit"),r.each(function(){var e=t(this);e.offset().top!==s&&(i=!0)}),n.equalize_on_stack!==!1||!i){var o=r.map(function(){return t(this).outerHeight(!1)}).get();if(n.use_tallest){var a=Math.max.apply(null,o);r.css("height",a)}else{var d=Math.min.apply(null,o);r.css("height",d)}n.after_height_change(),e.trigger("after-height-change")}}},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var i=t(this);e.image_loaded(e.S("img",this),function(){e.equalize(i)})})}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.interchange={name:"interchange",version:"5.2.3",cache:{},images_loaded:!1,nodes_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,medium:Foundation.media_queries.medium,large:Foundation.media_queries.large,xlarge:Foundation.media_queries.xlarge,xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,i,r){if(/IMG/.test(e[0].nodeName)){var n=e[0].src;if(new RegExp(i,"i").test(n))return;return e[0].src=i,r(e[0].src)}var s=e.data(this.data_attr+"-last-path");if(s!=i)return/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i.test(i)?(t(e).css("background-image","url("+i+")"),e.data("interchange-last-path",i),r(i)):t.get(i,function(t){e.html(t),e.data(this.data_attr+"-last-path",i),r()})}}},init:function(e,i,r){Foundation.inherit(this,"throttle random_str"),this.data_attr=this.set_data_attr(),t.extend(!0,this.settings,i,r),this.bindings(i,r),this.load("images"),this.load("nodes")},get_media_hash:function(){var t="";for(var e in this.settings.named_queries)t+=matchMedia(this.settings.named_queries[e]).matches.toString();return t},events:function(){var i,r=this;return t(e).off(".interchange").on("resize.fndtn.interchange",r.throttle(function(){var t=r.get_media_hash();t!==i&&r.resize(),i=t},50)),this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded)return void setTimeout(t.proxy(this.resize,this),50);for(var i in e)if(e.hasOwnProperty(i)){var r=this.results(i,e[i]);r&&this.settings.directives[r.scenario[1]].call(this,r.el,r.scenario[0],function(){if(arguments[0]instanceof Array)var t=arguments[0];else var t=Array.prototype.slice.call(arguments,0);r.el.trigger(r.scenario[1],t)})}},results:function(t,e){var i=e.length;if(i>0)for(var r=this.S("["+this.add_namespace("data-uuid")+'="'+t+'"]');i--;){var n,s=e[i][2];if(n=matchMedia(this.settings.named_queries.hasOwnProperty(s)?this.settings.named_queries[s]:s),n.matches)return{el:r,scenario:e[i]}}return!1},load:function(t,e){return("undefined"==typeof this["cached_"+t]||e)&&this["update_"+t](),this["cached_"+t]},update_images:function(){var t=this.S("img["+this.data_attr+"]"),e=t.length,i=e,r=0,n=this.data_attr;for(this.cache={},this.cached_images=[],this.images_loaded=0===e;i--;){if(r++,t[i]){var s=t[i].getAttribute(n)||"";s.length>0&&this.cached_images.push(t[i])}r===e&&(this.images_loaded=!0,this.enhance("images"))}return this},update_nodes:function(){var t=this.S("["+this.data_attr+"]").not("img"),e=t.length,i=e,r=0,n=this.data_attr;for(this.cached_nodes=[],this.nodes_loaded=0===e;i--;){r++;var s=t[i].getAttribute(n)||"";s.length>0&&this.cached_nodes.push(t[i]),r===e&&(this.nodes_loaded=!0,this.enhance("nodes"))}return this},enhance:function(i){for(var r=this["cached_"+i].length;r--;)this.object(t(this["cached_"+i][r]));return t(e).trigger("resize")},parse_params:function(t,e,i){return[this.trim(t),this.convert_directive(e),this.trim(i)]},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},object:function(t){var e=this.parse_data_attr(t),i=[],r=e.length;if(r>0)for(;r--;){var n=e[r].split(/\((.*?)(\))$/);if(n.length>1){var s=n[0].split(/\, /),o=this.parse_params(s[0],s[1],n[1]);i.push(o)}}return this.store(t,i)},store:function(t,e){var i=this.random_str(),r=t.data(this.add_namespace("uuid",!0));return this.cache[r]?this.cache[r]:(t.attr(this.add_namespace("data-uuid"),i),this.cache[i]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},set_data_attr:function(t){return t?this.namespace.length>0?this.namespace+"-"+this.settings.load_attr:this.settings.load_attr:this.namespace.length>0?"data-"+this.namespace+"-"+this.settings.load_attr:"data-"+this.settings.load_attr},parse_data_attr:function(t){for(var e=t.attr(this.attr_name()).split(/\[(.*?)\]/),i=e.length,r=[];i--;)e[i].replace(/[\W\d]+/,"").length>4&&r.push(e[i]);return r},reflow:function(){this.load("images",!0),this.load("nodes",!0)}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.joyride={name:"joyride",version:"5.2.3",defaults:{expose:!1,modal:!0,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:!0,start_offset:0,next_button:!0,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:!1,cookie_name:"joyride",cookie_domain:!1,cookie_expires:365,tip_container:"body",abort_on_close:!0,tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(e,i,r){Foundation.inherit(this,"throttle random_str"),this.settings=this.settings||t.extend({},this.defaults,r||i),this.bindings(i,r)},events:function(){var i=this;t(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end(this.settings.abort_on_close)}.bind(this)),t(e).off(".joyride").on("resize.fndtn.joyride",i.throttle(function(){if(t("["+i.attr_name()+"]").length>0&&i.settings.$next_tip){if(i.settings.exposed.length>0){var e=t(i.settings.exposed);e.each(function(){var e=t(this);i.un_expose(e),i.expose(e)})}i.is_phone()?i.pos_phone():i.pos_default(!1)}},100))},start:function(){var e=this,i=t("["+this.attr_name()+"]",this.scope),r=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],n=r.length;!i.length>0||(this.settings.init||this.events(),this.settings=i.data(this.attr_name(!0)+"-init"),this.settings.$content_el=i,this.settings.$body=t(this.settings.tip_container),this.settings.body_offset=t(this.settings.tip_container).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,"function"!=typeof t.cookie&&(this.settings.cookie_monster=!1),(!this.settings.cookie_monster||this.settings.cookie_monster&&!t.cookie(this.settings.cookie_name))&&(this.settings.$tip_content.each(function(i){var s=t(this);this.settings=t.extend({},e.defaults,e.data_options(s));for(var o=n;o--;)e.settings[r[o]]=parseInt(e.settings[r[o]],10);e.create({$li:s,index:i})}),!this.settings.start_timer_on_click&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")))},resume:function(){this.set_li(),this.show()},tip_template:function(e){var i,r;return e.tip_class=e.tip_class||"",i=t(this.settings.template.tip).addClass(e.tip_class),r=t.trim(t(e.li).html())+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),i.append(t(this.settings.template.wrapper)),i.first().attr(this.add_namespace("data-index"),e.index),t(".joyride-content-wrapper",i).append(r),i[0]},timer_instance:function(e){var i;return i=0===e&&this.settings.start_timer_on_click&&this.settings.timer>0||0===this.settings.timer?"":t(this.settings.template.timer)[0].outerHTML},button_text:function(e){return this.settings.next_button?(e=t.trim(e)||"Next",e=t(this.settings.template.button).append(e)[0].outerHTML):e="",e},create:function(e){var i=e.$li.attr(this.add_namespace("data-button"))||e.$li.attr(this.add_namespace("data-text")),r=e.$li.attr("class"),n=t(this.tip_template({tip_class:r,index:e.index,button_text:i,li:e.$li}));t(this.settings.tip_container).append(n)},show:function(e){var i=null;this.settings.$li===r||-1===t.inArray(this.settings.$li.index(),this.settings.pause_after)?(this.settings.paused?this.settings.paused=!1:this.set_li(e),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(e&&(this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tip_settings=t.extend({},this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),i=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tip_animation)?(i.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),setTimeout(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tip_animation)&&(i.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show(),setTimeout(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||t(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(t.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(t){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide").eq(this.settings.$li.index()),this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr(this.add_namespace("data-class")),r=this.settings.$li.attr(this.add_namespace("data-id")),n=function(){return r?t(i.getElementById(r)):e?t("."+e).first():t("body")};this.settings.$target=n()},scroll_to:function(){var i,r;i=t(e).height()/2,r=Math.ceil(this.settings.$target.offset().top-i+this.settings.$next_tip.outerHeight()),0!=r&&t("html, body").stop().animate({scrollTop:r},this.settings.scroll_speed,"swing")},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pause_after)},restart:function(){this.hide(),this.settings.$li=r,this.show("init")},pos_default:function(t){var e=this.settings.$next_tip.find(".joyride-nub"),i=Math.ceil(e.outerWidth()/2),r=Math.ceil(e.outerHeight()/2),n=t||!1;n&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(e):(this.bottom()?(this.settings.$next_tip.css(this.rtl?{top:this.settings.$target.offset().top+r+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}:{top:this.settings.$target.offset().top+r+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left}),this.nub_position(e,this.settings.tip_settings.nub_position,"top")):this.top()?(this.settings.$next_tip.css(this.rtl?{top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-r,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}:{top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-r,left:this.settings.$target.offset().left}),this.nub_position(e,this.settings.tip_settings.nub_position,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.outerWidth()+this.settings.$target.offset().left+i}),this.nub_position(e,this.settings.tip_settings.nub_position,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.settings.$next_tip.outerWidth()-i}),this.nub_position(e,this.settings.tip_settings.nub_position,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length&&(e.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts],this.settings.attempts++,this.pos_default())),n&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(e){var i=this.settings.$next_tip.outerHeight(),r=(this.settings.$next_tip.offset(),this.settings.$target.outerHeight()),n=t(".joyride-nub",this.settings.$next_tip),s=Math.ceil(n.outerHeight()/2),o=e||!1;n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(n):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-i-s}),n.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+r+s}),n.addClass("top")),o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(t){this.center(),t.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=t(".joyride-modal-bg");e.length<1&&t("body").append(this.settings.template.modal).show(),/pop/i.test(this.settings.tip_animation)?e.show():e.fadeIn(this.settings.tip_animation_fade_speed)}},expose:function(){var i,r,n,s,o,a="expose-"+this.random_str(6);if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;n=this.settings.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(i=t(this.settings.template.expose),this.settings.$body.append(i),i.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),r=t(this.settings.template.expose_cover),s={zIndex:n.css("z-index"),position:n.css("position")},o=null==n.attr("class")?"":n.attr("class"),n.css("z-index",parseInt(i.css("z-index"))+1),"static"==s.position&&n.css("position","relative"),n.data("expose-css",s),n.data("orig-class",o),n.attr("class",o+" "+this.settings.expose_add_class),r.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),this.settings.modal&&this.show_modal(),this.settings.$body.append(r),i.addClass(a),r.addClass(a),n.data("expose",a),this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,n),void this.add_exposed(n))},un_expose:function(){var i,r,n,s,o,a=!1;if(arguments.length>0&&arguments[0]instanceof t)r=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;r=this.settings.$target}return r.length<1?(e.console&&console.error("element not valid",r),!1):(i=r.data("expose"),n=t("."+i),arguments.length>1&&(a=arguments[1]),a===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():n.remove(),s=r.data("expose-css"),"auto"==s.zIndex?r.css("z-index",""):r.css("z-index",s.zIndex),s.position!=r.css("position")&&("static"==s.position?r.css("position",""):r.css("position",s.position)),o=r.data("orig-class"),r.attr("class",o),r.removeData("orig-classes"),r.removeData("expose"),r.removeData("expose-z-index"),void this.remove_exposed(r))},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof t||"object"==typeof e?this.settings.exposed.push(e[0]):"string"==typeof e&&this.settings.exposed.push(e)},remove_exposed:function(e){var i,r;for(e instanceof t?i=e[0]:"string"==typeof e&&(i=e),this.settings.exposed=this.settings.exposed||[],r=this.settings.exposed.length;r--;)if(this.settings.exposed[r]==i)return void this.settings.exposed.splice(r,1)},center:function(){var i=t(e);return this.settings.$next_tip.css({top:(i.height()-this.settings.$next_tip.outerHeight())/2+i.scrollTop(),left:(i.width()-this.settings.$next_tip.outerWidth())/2+i.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(i){var r=t(e),n=r.height()/2,s=Math.ceil(this.settings.$target.offset().top-n+this.settings.$next_tip.outerHeight()),o=r.width()+r.scrollLeft(),a=r.height()+s,d=r.height()+r.scrollTop(),c=r.scrollTop();return c>s&&(c=0>s?0:s),a>d&&(d=a),[i.offset().top<c,o<i.offset().left+i.outerWidth(),d<i.offset().top+i.outerHeight(),r.scrollLeft()>i.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,i){t.addClass("auto"===e?i:e)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(e){this.settings.cookie_monster&&t.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.$next_tip.data("closed",!0),t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),("undefined"==typeof e||e===!1)&&(this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip),this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip)),t(".joyride-tip-guide").remove()},off:function(){t(this.scope).off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs["magellan-expedition"]={
name:"magellan-expedition",version:"5.2.3",settings:{active_class:"active",threshold:0,destination_threshold:20,throttle_delay:30,fixed_top:0},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i)},events:function(){var i=this,r=i.S,n=i.settings;i.set_expedition_position(),r(i.scope).off(".magellan").on("click.fndtn.magellan","["+i.add_namespace("data-magellan-arrival")+'] a[href^="#"]',function(e){e.preventDefault();var r=t(this).closest("["+i.attr_name()+"]"),n=(r.data("magellan-expedition-init"),this.hash.split("#").join("")),s=t("a[name='"+n+"']");0===s.length&&(s=t("#"+n));var o=s.offset().top;o-=r.outerHeight(),t("html, body").stop().animate({scrollTop:o},700,"swing",function(){history.pushState?history.pushState(null,null,"#"+n):location.hash="#"+n})}).on("scroll.fndtn.magellan",i.throttle(this.check_for_arrivals.bind(this),n.throttle_delay)),t(e).on("resize.fndtn.magellan",i.throttle(this.set_expedition_position.bind(this),n.throttle_delay))},check_for_arrivals:function(){var t=this;t.update_arrivals(),t.update_expedition_positions()},set_expedition_position:function(){var e=this;t("["+this.attr_name()+"=fixed]",e.scope).each(function(i,r){var n,s=t(this),o=s.attr("styles");s.attr("style",""),n=s.offset().top+e.settings.threshold,s.data(e.data_attr("magellan-top-offset"),n),s.attr("style",o)})},update_expedition_positions:function(){var i=this,r=t(e).scrollTop();t("["+this.attr_name()+"=fixed]",i.scope).each(function(){var e=t(this),n=e.data("magellan-top-offset");if(r>=n){var s=e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]");0===s.length&&(s=e.clone(),s.removeAttr(i.attr_name()),s.attr(i.add_namespace("data-magellan-expedition-clone"),""),e.before(s)),e.css({position:"fixed",top:i.settings.fixed_top})}else e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]").remove(),e.attr("style","").removeClass("fixed")})},update_arrivals:function(){var i=this,r=t(e).scrollTop();t("["+this.attr_name()+"]",i.scope).each(function(){var e=t(this),n=e.data(i.attr_name(!0)+"-init"),s=i.offsets(e,r),o=e.find("["+i.add_namespace("data-magellan-arrival")+"]"),a=!1;s.each(function(t,r){if(r.viewport_offset>=r.top_offset){var s=e.find("["+i.add_namespace("data-magellan-arrival")+"]");return s.not(r.arrival).removeClass(n.active_class),r.arrival.addClass(n.active_class),a=!0,!0}}),a||o.removeClass(n.active_class)})},offsets:function(e,i){var r=this,n=e.data(r.attr_name(!0)+"-init"),s=i;return e.find("["+r.add_namespace("data-magellan-arrival")+"]").map(function(i,o){var a=t(this).data(r.data_attr("magellan-arrival")),d=t("["+r.add_namespace("data-magellan-destination")+"="+a+"]");if(d.length>0){var c=d.offset().top-n.destination_threshold-e.outerHeight();return{destination:d,arrival:t(this),top_offset:c,viewport_offset:s}}}).sort(function(t,e){return t.top_offset<e.top_offset?-1:t.top_offset>e.top_offset?1:0})},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){this.S(this.scope).off(".magellan"),this.S(e).off(".magellan")},reflow:function(){var e=this;t("["+e.add_namespace("data-magellan-expedition-clone")+"]",e.scope).remove()}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.offcanvas={name:"offcanvas",version:"5.2.3",settings:{open_method:"move",close_on_click:!0},init:function(t,e,i){this.bindings(e,i)},events:function(){var t=this,e=t.S,i="",r="",n="";"move"===this.settings.open_method?(i="move-",r="right",n="left"):"overlap"===this.settings.open_method&&(i="offcanvas-overlap"),e(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(e){t.click_toggle_class(e,i+r)}).on("click.fndtn.offcanvas",".left-off-canvas-menu a",function(e){var n=t.get_settings(e);n.close_on_click&&t.hide.call(t,i+r,t.get_wrapper(e))}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(e){t.click_toggle_class(e,i+n)}).on("click.fndtn.offcanvas",".right-off-canvas-menu a",function(e){var r=t.get_settings(e);r.close_on_click&&t.hide.call(t,i+n,t.get_wrapper(e))}).on("click.fndtn.offcanvas",".exit-off-canvas",function(e){t.click_remove_class(e,i+n),r&&t.click_remove_class(e,i+r)})},toggle:function(t,e){e=e||this.get_wrapper(),e.is("."+t)?this.hide(t,e):this.show(t,e)},show:function(t,e){e=e||this.get_wrapper(),e.trigger("open"),e.addClass(t)},hide:function(t,e){e=e||this.get_wrapper(),e.trigger("close"),e.removeClass(t)},click_toggle_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.toggle(e,i)},click_remove_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.hide(e,i)},get_settings:function(t){var e=this.S(t.target).closest("["+this.attr_name()+"]");return e.data(this.attr_name(!0)+"-init")||this.settings},get_wrapper:function(t){var e=this.S(t?t.target:this.scope).closest(".off-canvas-wrap");return 0===e.length&&(e=this.S(".off-canvas-wrap")),e},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";var n=function(){},s=function(r,n){if(r.hasClass(n.slides_container_class))return this;var s,d,c,l,u,p=this,f=r,h=0,m=f.find("."+n.active_slide_class).length>0;p.cache={},p.slides=function(){return f.children(n.slide_selector)},m||p.slides().first().addClass(n.active_slide_class),p.update_slide_number=function(e){n.slide_number&&(d.find("span:first").text(parseInt(e)+1),d.find("span:last").text(p.slides().length)),n.bullets&&(c.children().removeClass(n.bullets_active_class),t(c.children().get(e)).addClass(n.bullets_active_class))},p.update_active_link=function(e){var i=t('[data-orbit-link="'+p.slides().eq(e).attr("data-orbit-slide")+'"]');i.siblings().removeClass(n.bullets_active_class),i.addClass(n.bullets_active_class)},p.build_markup=function(){f.wrap('<div class="'+n.container_class+'"></div>'),s=f.parent(),f.addClass(n.slides_container_class),f.addClass(n.animation),n.stack_on_small&&s.addClass(n.stack_on_small_class),n.navigation_arrows&&(s.append(t('<a href="#"><span></span></a>').addClass(n.prev_class)),s.append(t('<a href="#"><span></span></a>').addClass(n.next_class))),n.timer&&(l=t("<div>").addClass(n.timer_container_class),l.append("<span>"),n.timer_show_progress_bar&&l.append(t("<div>").addClass(n.timer_progress_class)),l.addClass(n.timer_paused_class),s.append(l)),n.slide_number&&(d=t("<div>").addClass(n.slide_number_class),d.append("<span></span> "+n.slide_number_text+" <span></span>"),s.append(d)),n.bullets&&(c=t("<ol>").addClass(n.bullets_container_class),s.append(c),c.wrap('<div class="orbit-bullets-container"></div>'),p.slides().each(function(e,i){var r=t("<li>").attr("data-orbit-slide",e).on("click",p.link_bullet);c.append(r)}))},p._prepare_direction=function(e,i){var r="next";h>=e&&(r="prev"),"slide"===n.animation&&setTimeout(function(){f.removeClass("swipe-prev swipe-next"),"next"===r?f.addClass("swipe-next"):"prev"===r&&f.addClass("swipe-prev")},0);var s=p.slides();if(e>=s.length){if(!n.circular)return!1;e=0}else if(0>e){if(!n.circular)return!1;e=s.length-1}var o=t(s.get(h)),a=t(s.get(e));return[r,o,a,e]},p._goto=function(t,e){if(null===t)return!1;if(p.cache.animating)return!1;if(t===h)return!1;"object"==typeof p.cache.timer&&p.cache.timer.restart();var i=p.slides();p.cache.animating=!0;var r=p._prepare_direction(t),s=r[0],o=r[1],a=r[2],t=r[3];if(r===!1)return!1;f.trigger("before-slide-change.fndtn.orbit"),n.before_slide_change(),h=t,o.css("transitionDuration",n.animation_speed+"ms"),a.css("transitionDuration",n.animation_speed+"ms");var d=function(){var r=function(){e===!0&&p.cache.timer.restart(),p.update_slide_number(h),a.removeClass("animate-in"),a.addClass(n.active_slide_class),p.update_active_link(t),f.trigger("after-slide-change.fndtn.orbit",[{slide_number:h,total_slides:i.length}]),n.after_slide_change(h,i.length),setTimeout(function(){p.cache.animating=!1},100)};f.height()!=a.height()&&n.variable_height?f.animate({"min-height":a.height()},250,"linear",r):r()};if(1===i.length)return d(),!1;var c=function(){"next"===s&&u.next(o,a,d),"prev"===s&&u.prev(o,a,d)};a.height()>f.height()&&n.variable_height?f.animate({"min-height":a.height()},250,"linear",c):c()},p.next=function(t){t.stopImmediatePropagation(),t.preventDefault(),p._prepare_direction(h+1),setTimeout(function(){p._goto(h+1)},100)},p.prev=function(t){t.stopImmediatePropagation(),t.preventDefault(),p._prepare_direction(h-1),setTimeout(function(){p._goto(h-1)},100)},p.link_custom=function(e){e.preventDefault();var i=t(this).attr("data-orbit-link");if("string"==typeof i&&""!=(i=t.trim(i))){var r=s.find("[data-orbit-slide="+i+"]");-1!=r.index()&&setTimeout(function(){p._goto(r.index())},100)}},p.link_bullet=function(e){var i=t(this).attr("data-orbit-slide");if("string"==typeof i&&""!=(i=t.trim(i)))if(isNaN(parseInt(i))){var r=s.find("[data-orbit-slide="+i+"]");-1!=r.index()&&(i=r.index()+1,p._prepare_direction(i),setTimeout(function(){p._goto(i)},100))}else i=parseInt(i),p._prepare_direction(i),setTimeout(function(){p._goto(i)},100)},p.timer_callback=function(){p._goto(h+1,!0)},p.compute_dimensions=function(){var e=t(p.slides().get(h)),i=e.height();n.variable_height||p.slides().each(function(){t(this).height()>i&&(i=t(this).height())}),f.css("minHeight",String(i)+"px")},p.create_timer=function(){var t=new o(s.find("."+n.timer_container_class),n,p.timer_callback);return t},p.stop_timer=function(){"object"==typeof p.cache.timer&&p.cache.timer.stop()},p.toggle_timer=function(){var t=s.find("."+n.timer_container_class);t.hasClass(n.timer_paused_class)?("undefined"==typeof p.cache.timer&&(p.cache.timer=p.create_timer()),p.cache.timer.start()):"object"==typeof p.cache.timer&&p.cache.timer.stop()},p.init=function(){if(p.build_markup(),n.timer&&(p.cache.timer=p.create_timer(),Foundation.utils.image_loaded(this.slides().find("img"),p.cache.timer.start)),u=new a(n,f),m){var r=f.find("."+n.active_slide_class),o=n.animation_speed;n.animation_speed=1,r.removeClass("active"),p._goto(r.index()),n.animation_speed=o}s.on("click","."+n.next_class,p.next),s.on("click","."+n.prev_class,p.prev),n.next_on_click&&s.on("click","."+n.slides_container_class+" [data-orbit-slide]",p.link_bullet),s.on("click",p.toggle_timer),n.swipe&&f.on("touchstart.fndtn.orbit",function(t){p.cache.animating||(t.touches||(t=t.originalEvent),t.preventDefault(),t.stopPropagation(),p.cache.start_page_x=t.touches[0].pageX,p.cache.start_page_y=t.touches[0].pageY,p.cache.start_time=(new Date).getTime(),p.cache.delta_x=0,p.cache.is_scrolling=null,p.cache.direction=null,p.stop_timer())}).on("touchmove.fndtn.orbit",function(t){Math.abs(p.cache.delta_x)>5&&(t.preventDefault(),t.stopPropagation()),p.cache.animating||requestAnimationFrame(function(){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale||(p.cache.delta_x=t.touches[0].pageX-p.cache.start_page_x,null===p.cache.is_scrolling&&(p.cache.is_scrolling=!!(p.cache.is_scrolling||Math.abs(p.cache.delta_x)<Math.abs(t.touches[0].pageY-p.cache.start_page_y))),p.cache.is_scrolling))){var e=p.cache.delta_x<0?h+1:h-1;if(p.cache.direction!==e){var i=p._prepare_direction(e);p.cache.direction=e,p.cache.dir=i[0],p.cache.current=i[1],p.cache.next=i[2]}if("slide"===n.animation){var r,o;r=p.cache.delta_x/s.width()*100,o=r>=0?-(100-r):100+r,p.cache.current.css("transform","translate3d("+r+"%,0,0)"),p.cache.next.css("transform","translate3d("+o+"%,0,0)")}}})}).on("touchend.fndtn.orbit",function(t){p.cache.animating||(t.preventDefault(),t.stopPropagation(),setTimeout(function(){p._goto(p.cache.direction)},50))}),s.on("mouseenter.fndtn.orbit",function(t){n.timer&&n.pause_on_hover&&p.stop_timer()}).on("mouseleave.fndtn.orbit",function(t){n.timer&&n.resume_on_mouseout&&p.cache.timer.start()}),t(i).on("click","[data-orbit-link]",p.link_custom),t(e).on("load resize",p.compute_dimensions);var d=this.slides().find("img");Foundation.utils.image_loaded(d,p.compute_dimensions),Foundation.utils.image_loaded(d,function(){s.prev("."+n.preloader_class).css("display","none"),p.update_slide_number(h),p.update_active_link(h),f.trigger("ready.fndtn.orbit")})},p.init()},o=function(t,e,i){var r,n,s=this,o=e.timer_speed,a=t.find("."+e.timer_progress_class),d=a&&"none"!=a.css("display"),c=-1;this.update_progress=function(t){var e=a.clone();e.attr("style",""),e.css("width",t+"%"),a.replaceWith(e),a=e},this.restart=function(){clearTimeout(n),t.addClass(e.timer_paused_class),c=-1,d&&s.update_progress(0),s.start()},this.start=function(){return t.hasClass(e.timer_paused_class)?(c=-1===c?o:c,t.removeClass(e.timer_paused_class),d&&(r=(new Date).getTime(),a.animate({width:"100%"},c,"linear")),n=setTimeout(function(){s.restart(),i()},c),void t.trigger("timer-started.fndtn.orbit")):!0},this.stop=function(){if(t.hasClass(e.timer_paused_class))return!0;if(clearTimeout(n),t.addClass(e.timer_paused_class),d){var i=(new Date).getTime();c-=i-r;var a=100-c/o*100;s.update_progress(a)}t.trigger("timer-stopped.fndtn.orbit")}},a=function(t,e){var i="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";this.next=function(r,n,s){Modernizr.csstransitions?n.on(i,function(t){n.unbind(i),r.removeClass("active animate-out"),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),s()}):setTimeout(function(){r.removeClass("active animate-out"),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),s()},t.animation_speed),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),r.addClass("animate-out"),n.addClass("animate-in")},this.prev=function(r,n,s){Modernizr.csstransitions?n.on(i,function(t){n.unbind(i),r.removeClass("active animate-out"),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),s()}):setTimeout(function(){r.removeClass("active animate-out"),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),s()},t.animation_speed),e.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""}),r.addClass("animate-out"),n.addClass("animate-in")}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"5.2.3",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,next_on_click:!0,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",timer_show_progress_bar:!0,slides_container_class:"orbit-slides-container",preloader_class:"preloader",slide_selector:"*",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,circular:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:n,after_slide_change:n},init:function(t,e,i){this.bindings(e,i)},events:function(t){var e=this,i=new s(this.S(t),this.S(t).data("orbit-init"));this.S(t).data(e.name+"-instance",i)},reflow:function(){var t=this;if(t.S(t.scope).is("[data-orbit]")){var e=t.S(t.scope),i=e.data(t.name+"-instance");i.compute_dimensions()}else t.S("[data-orbit]",t.scope).each(function(e,i){var r=t.S(i),n=(t.data_options(r),r.data(t.name+"-instance"));n.compute_dimensions()})}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";function n(t){var e=/fade/i.test(t),i=/pop/i.test(t);return{animate:e||i,pop:i,fade:e}}Foundation.libs.reveal={name:"reveal",version:"5.2.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,r){t.extend(!0,this.settings,i,r),this.bindings(i,r)},events:function(t){var e=this,r=e.S;return r(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]",function(t){if(t.preventDefault(),!e.locked){var i=r(this),n=i.data(e.data_attr("reveal-ajax"));if(e.locked=!0,"undefined"==typeof n)e.open.call(e,i);else{var s=n===!0?i.attr("href"):n;e.open.call(e,i,{url:s})}}}),r(i).on("touchend.fndtn.reveal click.fndtn.reveal",this.close_targets(),function(t){if(t.preventDefault(),!e.locked){var i=r("["+e.attr_name()+"].open").data(e.attr_name(!0)+"-init"),n=r(t.target)[0]===r("."+i.bg_class)[0];if(n){if(!i.close_on_background_click)return;t.stopPropagation()}e.locked=!0,e.close.call(e,n?r("["+e.attr_name()+"].open"):r(this).closest("["+e.attr_name()+"]"))}}),r("["+e.attr_name()+"]",this.scope).length>0?r(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):r(this.scope).on("open.fndtn.reveal","["+e.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+e.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.close_video),!0},key_up_on:function(t){var e=this;return e.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(t){var i=e.S("["+e.attr_name()+"].open"),r=i.data(e.attr_name(!0)+"-init");r&&27===t.which&&r.close_on_esc&&!e.locked&&e.close.call(e,i)}),!0},key_up_off:function(t){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,i){var r,n=this;e?"undefined"!=typeof e.selector?r=n.S("#"+e.data(n.data_attr("reveal-id"))).first():(r=n.S(this.scope),i=e):r=n.S(this.scope);var s=r.data(n.attr_name(!0)+"-init");if(s=s||this.settings,!r.hasClass("open")){var o=n.S("["+n.attr_name()+"].open");if("undefined"==typeof r.data("css-top")&&r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r)),this.key_up_on(r),r.trigger("open"),o.length<1&&this.toggle_bg(r,!0),"string"==typeof i&&(i={url:i}),"undefined"!=typeof i&&i.url){var a="undefined"!=typeof i.success?i.success:null;t.extend(i,{success:function(e,i,d){t.isFunction(a)&&a(e,i,d),r.html(e),n.S(r).foundation("section","reflow"),n.S(r).children().foundation(),o.length>0&&n.hide(o,s.css.close),n.show(r,s.css.open)}}),t.ajax(i)}else o.length>0&&this.hide(o,s.css.close),this.show(r,s.css.open)}},close:function(t){var t=t&&t.length?t:this.S(this.scope),e=this.S("["+this.attr_name()+"].open"),i=t.data(this.attr_name(!0)+"-init")||this.settings;e.length>0&&(this.locked=!0,this.key_up_off(t),t.trigger("close"),this.toggle_bg(t,!1),this.hide(e,i.css.close,i))},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,i){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var n=this.settings.bg.filter(":visible").length>0;i!=n&&((i==r?n:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,r){if(r){var s=i.data(this.attr_name(!0)+"-init");if(s=s||this.settings,0===i.parent("body").length){var o=i.wrap('<div style="display: none;" />').parent(),a=this.settings.rootElement||"body";i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(o),i.unwrap().unbind("closed.fndtn.reveal.wrapped")}),i.detach().appendTo(a)}var d=n(s.animation);if(d.animate||(this.locked=!1),d.pop){r.top=t(e).scrollTop()-i.data("offset")+"px";var c={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return setTimeout(function(){return i.css(r).animate(c,s.animation_speed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),s.animation_speed/2)}if(d.fade){r.top=t(e).scrollTop()+i.data("css-top")+"px";var c={opacity:1};return setTimeout(function(){return i.css(r).animate(c,s.animation_speed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),s.animation_speed/2)}return i.css(r).show().css({opacity:1}).addClass("open").trigger("opened")}var s=this.settings;return n(s.animation).fade?i.fadeIn(s.animation_speed/2):(this.locked=!1,i.show())},hide:function(i,r){if(r){var s=i.data(this.attr_name(!0)+"-init");s=s||this.settings;var o=n(s.animation);if(o.animate||(this.locked=!1),o.pop){var a={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return setTimeout(function(){return i.animate(a,s.animation_speed,"linear",function(){this.locked=!1,i.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),s.animation_speed/2)}if(o.fade){var a={opacity:0};return setTimeout(function(){return i.animate(a,s.animation_speed,"linear",function(){this.locked=!1,i.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),s.animation_speed/2)}return i.hide().css(r).removeClass("open").trigger("closed")}var s=this.settings;return n(s.animation).fade?i.fadeOut(s.animation_speed/2):i.hide()},close_video:function(e){var i=t(".flex-video",e.target),r=t("iframe",i);r.length>0&&(r.attr("data-src",r[0].src),r.attr("src","about:blank"),i.hide())},open_video:function(e){var i=t(".flex-video",e.target),n=i.find("iframe");if(n.length>0){var s=n.attr("data-src");if("string"==typeof s)n[0].src=n.attr("data-src");else{var o=n[0].src;n[0].src=r,n[0].src=o}i.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10);return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.slider={name:"slider",version:"5.2.3",settings:{start:0,end:100,step:1,initial:null,display_selector:"",on_change:function(){}},cache:{},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i),this.reflow()},events:function(){var i=this;t(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+i.attr_name()+"] .range-slider-handle",function(e){i.cache.active||(e.preventDefault(),i.set_active_slider(t(e.target)))}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(t){i.cache.active&&(t.preventDefault(),i.calculate_position(i.cache.active,t.pageX||t.originalEvent.clientX||t.originalEvent.touches[0].clientX||t.currentPoint.x))}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(t){i.remove_active_slider()}).on("change.fndtn.slider",function(t){i.settings.on_change()}),i.S(e).on("resize.fndtn.slider",i.throttle(function(t){i.reflow()},300))},set_active_slider:function(t){this.cache.active=t},remove_active_slider:function(){this.cache.active=null},calculate_position:function(e,i){var r=this,n=t.extend({},r.settings,r.data_options(e.parent())),s=(t.data(e[0],"handle_w"),t.data(e[0],"handle_o"),t.data(e[0],"bar_w")),o=t.data(e[0],"bar_o");requestAnimationFrame(function(){var t;t=Foundation.rtl?r.limit_to((o+s-i)/s,0,1):r.limit_to((i-o)/s,0,1);var a=r.normalized_value(t,n.start,n.end,n.step);r.set_ui(e,a)})},set_ui:function(e,i){var r=t.extend({},this.settings,this.data_options(e.parent())),n=t.data(e[0],"handle_w"),s=t.data(e[0],"bar_w"),o=this.normalized_percentage(i,r.start,r.end),a=o*(s-n)-1,d=100*o;Foundation.rtl&&(a=-a),this.set_translate(e,a),e.siblings(".range-slider-active-segment").css("width",d+"%"),e.parent().attr(this.attr_name(),i),e.parent().trigger("change"),e.parent().children("input[type=hidden]").val(i),""!=r.input_id&&t(r.display_selector).each(function(){this.hasOwnProperty("value")?t(this).val(i):t(this).text(i)})},normalized_percentage:function(t,e,i){return(t-e)/(i-e)},normalized_value:function(t,e,i,r){var n=i-e,s=t*n,o=(s-s%r)/r,a=s%r,d=a>=.5*r?r:0;return o*r+d+e},set_translate:function(e,i,r){r?t(e).css("-webkit-transform","translateY("+i+"px)").css("-moz-transform","translateY("+i+"px)").css("-ms-transform","translateY("+i+"px)").css("-o-transform","translateY("+i+"px)").css("transform","translateY("+i+"px)"):t(e).css("-webkit-transform","translateX("+i+"px)").css("-moz-transform","translateX("+i+"px)").css("-ms-transform","translateX("+i+"px)").css("-o-transform","translateX("+i+"px)").css("transform","translateX("+i+"px)")},limit_to:function(t,e,i){return Math.min(Math.max(t,e),i)},initialize_settings:function(e){t.data(e,"bar",t(e).parent()),t.data(e,"bar_o",t(e).parent().offset().left),t.data(e,"bar_w",t(e).parent().outerWidth()),t.data(e,"handle_o",t(e).offset().left),t.data(e,"handle_w",t(e).outerWidth()),t.data(e,"settings",t.extend({},this.settings,this.data_options(t(e).parent())))},set_initial_position:function(e){var i=t.data(e.children(".range-slider-handle")[0],"settings"),r=i.initial?i.initial:Math.floor(.5*(i.end-i.start)/i.step)*i.step+i.start,n=e.children(".range-slider-handle");this.set_ui(n,r)},set_value:function(e){var i=this;t("["+i.attr_name()+"]",this.scope).each(function(){t(this).attr(i.attr_name(),e)}),t(this.scope).attr(i.attr_name())&&t(this.scope).attr(i.attr_name(),e),i.reflow()},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var i=t(this).children(".range-slider-handle")[0],r=t(this).attr(e.attr_name());e.initialize_settings(i),r?e.set_ui(t(i),parseFloat(r)):e.set_initial_position(t(this))})}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.tab={name:"tab",version:"5.2.3",settings:{active_class:"active",callback:function(){},deep_linking:!1,scroll_to_content:!0,is_hover:!1},default_tab_hashes:[],init:function(t,e,i){var r=this,n=this.S;this.bindings(e,i),this.handle_location_hash_change(),n("["+this.attr_name()+"] > .active > a",this.scope).each(function(){r.default_tab_hashes.push(this.hash)})},events:function(){var t=this,i=this.S;i(this.scope).off(".tab").on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var r=i(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");(!r.is_hover||Modernizr.touch)&&(e.preventDefault(),e.stopPropagation(),t.toggle_active_tab(i(this).parent()))}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var r=i(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");r.is_hover&&t.toggle_active_tab(i(this).parent())}),i(e).on("hashchange.fndtn.tab",function(e){e.preventDefault(),t.handle_location_hash_change()})},handle_location_hash_change:function(){var e=this,i=this.S;i("["+this.attr_name()+"]",this.scope).each(function(){var n=i(this).data(e.attr_name(!0)+"-init");if(n.deep_linking){var s=e.scope.location.hash;if(""!=s){var o=i(s);if(o.hasClass("content")&&o.parent().hasClass("tab-content"))e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+s+"]").parent());else{var a=o.closest(".content").attr("id");a!=r&&e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href=#"+a+"]").parent(),s)}}else for(var d in e.default_tab_hashes)e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[d]+"]").parent())}})},toggle_active_tab:function(i,n){var s=this.S,o=i.closest("["+this.attr_name()+"]"),a=i.children("a").first(),d="#"+a.attr("href").split("#")[1],c=s(d),l=i.siblings(),u=o.data(this.attr_name(!0)+"-init");if(s(this).data(this.data_attr("tab-content"))&&(d="#"+s(this).data(this.data_attr("tab-content")).split("#")[1],c=s(d)),u.deep_linking){var p=t("body,html").scrollTop();e.location.hash=n!=r?n:d,u.scroll_to_content?n==r||n==d?i.parent()[0].scrollIntoView():s(d)[0].scrollIntoView():(n==r||n==d)&&t("body,html").scrollTop(p)}i.addClass(u.active_class).triggerHandler("opened"),l.removeClass(u.active_class),c.siblings().removeClass(u.active_class).end().addClass(u.active_class),u.callback(i),c.triggerHandler("toggled",[i]),o.triggerHandler("toggled",[c])},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.2.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:200,show_on:"all",tip_template:function(t,e){return'<span data-selector="'+t+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(t,e,i){Foundation.inherit(this,"random_str"),this.bindings(e,i)},should_show:function(e,i){var r=t.extend({},this.settings,this.data_options(e));return"all"===r.show_on?!0:this.small()&&"small"===r.show_on?!0:this.medium()&&"medium"===r.show_on?!0:this.large()&&"large"===r.show_on?!0:!1},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(e){var i=this,r=i.S;i.create(this.S(e)),t(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var n=r(this),s=t.extend({},i.settings,i.data_options(n)),o=!1;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&r(e.target).is("a"))return!1;if(/mouse/i.test(e.type)&&i.ie_touch(e))return!1;if(n.hasClass("open"))Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&e.preventDefault(),i.hide(n);else{if(s.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type))return;!s.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&(e.preventDefault(),r(s.tooltip_class+".open").hide(),o=!0),/enter|over/i.test(e.type)?this.timer=setTimeout(function(){i.showTip(n)}.bind(this),i.settings.hover_delay):"mouseout"===e.type||"mouseleave"===e.type?(clearTimeout(this.timer),i.hide(n)):i.showTip(n)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){return/mouse/i.test(e.type)&&i.ie_touch(e)?!1:void(("touch"!=t(this).data("tooltip-open-event-type")||"mouseleave"!=e.type)&&("mouse"==t(this).data("tooltip-open-event-type")&&/MSPointerDown|touchstart/i.test(e.type)?i.convert_to_touch(t(this)):i.hide(t(this))))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(t){i.hide(r(this))})},ie_touch:function(t){return!1},showTip:function(t){var e=this.getTip(t);return this.should_show(t,e)?this.show(t):void 0},getTip:function(e){var i=this.selector(e),r=t.extend({},this.settings,this.data_options(e)),n=null;return i&&(n=this.S('span[data-selector="'+i+'"]'+r.tooltip_class)),"object"==typeof n?n:!1},selector:function(t){var e=t.attr("id"),i=t.attr(this.attr_name())||t.attr("data-selector");return(e&&e.length<1||!e)&&"string"!=typeof i&&(i=this.random_str(6),t.attr("data-selector",i)),e&&e.length>0?e:i},create:function(i){var r=this,n=t.extend({},this.settings,this.data_options(i)),s=this.settings.tip_template;"string"==typeof n.tip_template&&e.hasOwnProperty(n.tip_template)&&(s=e[n.tip_template]);var o=t(s(this.selector(i),t("<div></div>").html(i.attr("title")).html())),a=this.inheritable_classes(i);

o.addClass(a).appendTo(n.append_to),Modernizr.touch&&(o.append('<span class="tap-to-close">'+n.touch_close_text+"</span>"),o.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(t){r.hide(i)})),i.removeAttr("title").attr("title","")},reposition:function(e,i,r){var n,s,o,a,d;if(i.css("visibility","hidden").show(),n=e.data("width"),s=i.children(".nub"),o=s.outerHeight(),a=s.outerHeight(),i.css(this.small()?{width:"100%"}:{width:n?n:"auto"}),d=function(t,e,i,r,n,s){return t.css({top:e?e:"auto",bottom:r?r:"auto",left:n?n:"auto",right:i?i:"auto"}).end()},d(i,e.offset().top+e.outerHeight()+10,"auto","auto",e.offset().left),this.small())d(i,e.offset().top+e.outerHeight()+10,"auto","auto",12.5,t(this.scope).width()),i.addClass("tip-override"),d(s,-o,"auto","auto",e.offset().left);else{var c=e.offset().left;Foundation.rtl&&(s.addClass("rtl"),c=e.offset().left+e.outerWidth()-i.outerWidth()),d(i,e.offset().top+e.outerHeight()+10,"auto","auto",c),i.removeClass("tip-override"),r&&r.indexOf("tip-top")>-1?(Foundation.rtl&&s.addClass("rtl"),d(i,e.offset().top-i.outerHeight(),"auto","auto",c).removeClass("tip-override")):r&&r.indexOf("tip-left")>-1?(d(i,e.offset().top+e.outerHeight()/2-i.outerHeight()/2,"auto","auto",e.offset().left-i.outerWidth()-o).removeClass("tip-override"),s.removeClass("rtl")):r&&r.indexOf("tip-right")>-1&&(d(i,e.offset().top+e.outerHeight()/2-i.outerHeight()/2,"auto","auto",e.offset().left+e.outerWidth()+o).removeClass("tip-override"),s.removeClass("rtl"))}i.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var i=t.extend({},this.settings,this.data_options(e)),r=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(i.additional_inheritable_classes),n=e.attr("class"),s=n?t.map(n.split(" "),function(e,i){return-1!==t.inArray(e,r)?e:void 0}).join(" "):"";return t.trim(s)},convert_to_touch:function(e){var i=this,r=i.getTip(e),n=t.extend({},i.settings,i.data_options(e));0===r.find(".tap-to-close").length&&(r.append('<span class="tap-to-close">'+n.touch_close_text+"</span>"),r.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(t){i.hide(e)})),e.data("tooltip-open-event-type","touch")},show:function(t){var e=this.getTip(t);"touch"==t.data("tooltip-open-event-type")&&this.convert_to_touch(t),this.reposition(t,e,t.attr("class")),t.addClass("open"),e.fadeIn(150)},hide:function(t){var e=this.getTip(t);e.fadeOut(150,function(){e.find(".tap-to-close").remove(),e.off("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose"),t.removeClass("open")})},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip"),this.S(this.settings.tooltip_class).each(function(i){t("["+e.attr_name()+"]").eq(i).attr("title",t(this).text())}).remove()},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,r){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.2.3",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0,sticky_on:"all"},init:function(e,i,r){Foundation.inherit(this,"add_custom_rule register_media throttle");var n=this;n.register_media("topbar","foundation-mq-topbar"),this.bindings(i,r),n.S("["+this.attr_name()+"]",this.scope).each(function(){{var e=t(this),i=e.data(n.attr_name(!0)+"-init");n.S("section",this)}e.data("index",0);var r=e.parent();r.hasClass("fixed")||n.is_sticky(e,r,i)?(n.settings.sticky_class=i.sticky_class,n.settings.sticky_topbar=e,e.data("height",r.outerHeight()),e.data("stickyoffset",r.offset().top)):e.data("height",e.outerHeight()),i.assembled||n.assemble(e),i.is_hover?n.S(".has-dropdown",e).addClass("not-click"):n.S(".has-dropdown",e).removeClass("not-click"),n.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),r.hasClass("fixed")&&n.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,i){var r=e.hasClass(i.sticky_class);return r&&"all"===i.sticky_on?!0:r&&this.small()&&"small"===i.sticky_on?!0:r&&this.medium()&&"medium"===i.sticky_on?!0:r&&this.large()&&"large"===i.sticky_on?!0:!1},toggle:function(i){var r,n=this;r=i?n.S(i).closest("["+this.attr_name()+"]"):n.S("["+this.attr_name()+"]");var s=r.data(this.attr_name(!0)+"-init"),o=n.S("section, .section",r);n.breakpoint()&&(n.rtl?(o.css({right:"0%"}),t(">.name",o).css({right:"100%"})):(o.css({left:"0%"}),t(">.name",o).css({left:"100%"})),n.S("li.moved",o).removeClass("moved"),r.data("index",0),r.toggleClass("expanded").css("height","")),s.scrolltop?r.hasClass("expanded")?r.parent().hasClass("fixed")&&(s.scrolltop?(r.parent().removeClass("fixed"),r.addClass("fixed"),n.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):r.parent().removeClass("expanded")):r.hasClass("fixed")&&(r.parent().addClass("fixed"),r.removeClass("fixed"),n.S("body").addClass("f-topbar-fixed")):(n.is_sticky(r,r.parent(),s)&&r.parent().addClass("fixed"),r.parent().hasClass("fixed")&&(r.hasClass("expanded")?(r.addClass("fixed"),r.parent().addClass("expanded"),n.S("body").addClass("f-topbar-fixed")):(r.removeClass("fixed"),r.parent().removeClass("expanded"),n.update_sticky_positioning())))},timer:null,events:function(i){var r=this,n=this.S;n(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),r.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(e){var i=t(this).closest("li");!r.breakpoint()||i.hasClass("back")||i.hasClass("has-dropdown")||r.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var i=n(this),s=n(e.target),o=i.closest("["+r.attr_name()+"]"),a=o.data(r.attr_name(!0)+"-init");return s.data("revealId")?void r.toggle():void(r.breakpoint()||(!a.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),i.hasClass("hover")?(i.removeClass("hover").find("li").removeClass("hover"),i.parents("li.hover").removeClass("hover")):(i.addClass("hover"),t(i).siblings().removeClass("hover"),"A"===s[0].nodeName&&s.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(r.breakpoint()){t.preventDefault();var e=n(this),i=e.closest("["+r.attr_name()+"]"),s=i.find("section, .section"),o=(e.next(".dropdown").outerHeight(),e.closest("li"));i.data("index",i.data("index")+1),o.addClass("moved"),r.rtl?(s.css({right:-(100*i.data("index"))+"%"}),s.find(">.name").css({right:100*i.data("index")+"%"})):(s.css({left:-(100*i.data("index"))+"%"}),s.find(">.name").css({left:100*i.data("index")+"%"})),i.css("height",e.siblings("ul").outerHeight(!0)+i.data("height"))}}),n(e).off(".topbar").on("resize.fndtn.topbar",r.throttle(function(){r.resize.call(r)},50)).trigger("resize"),n("body").off(".topbar").on("click.fndtn.topbar touchstart.fndtn.topbar",function(t){var e=n(t.target).closest("li").closest("li.hover");e.length>0||n("["+r.attr_name()+"] li.hover").removeClass("hover")}),n(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=n(this),i=e.closest("["+r.attr_name()+"]"),s=i.find("section, .section"),o=(i.data(r.attr_name(!0)+"-init"),e.closest("li.moved")),a=o.parent();i.data("index",i.data("index")-1),r.rtl?(s.css({right:-(100*i.data("index"))+"%"}),s.find(">.name").css({right:100*i.data("index")+"%"})):(s.css({left:-(100*i.data("index"))+"%"}),s.find(">.name").css({left:100*i.data("index")+"%"})),0===i.data("index")?i.css("height",""):i.css("height",a.outerHeight(!0)+i.data("height")),setTimeout(function(){o.removeClass("moved")},300)})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,r=t.S(this),n=r.data(t.attr_name(!0)+"-init"),s=r.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var o=r.hasClass("expanded");r.css("height","").removeClass("expanded").find("li").removeClass("hover"),o&&t.toggle(r)}t.is_sticky(r,s,n)&&(s.hasClass("fixed")?(s.removeClass("fixed"),e=s.offset().top,t.S(i.body).hasClass("f-topbar-fixed")&&(e-=r.data("height")),r.data("stickyoffset",e),s.addClass("fixed")):(e=s.offset().top,r.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var i=this,r=e.data(this.attr_name(!0)+"-init"),n=i.S("section",e);n.detach(),i.S(".has-dropdown>a",n).each(function(){var e,n=i.S(this),s=n.siblings(".dropdown"),o=n.attr("href");s.find(".title.back").length||(e=t(r.mobile_show_parent_link&&o&&o.length>1?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li><a class="parent-link js-generated" href="'+o+'">'+n.text()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li>'),t("h5>a",e).html(1==r.custom_back_text?r.back_text:"&laquo; "+n.html()),s.prepend(e))}),n.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var i=0,r=this;return t("> li",e).each(function(){i+=r.S(this).outerHeight(!0)}),i},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,i=this.S(e),r=this;if(r.settings.sticky_topbar&&r.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var n=this.settings.sticky_topbar.data("stickyoffset");r.S(t).hasClass("expanded")||(i.scrollTop()>n?r.S(t).hasClass("fixed")||(r.S(t).addClass("fixed"),r.S("body").addClass("f-topbar-fixed")):i.scrollTop()<=n&&r.S(t).hasClass("fixed")&&(r.S(t).removeClass("fixed"),r.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,this,this.document);